{"version":3,"file":"default-node_modules_supabase_supabase-js_dist_module_index_js-node_modules_babel_runtime_hel-eac4ae.js","mappings":"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","sources":["./node_modules/@supabase/functions-js/dist/module/FunctionsClient.js","./node_modules/@supabase/functions-js/dist/module/helper.js","./node_modules/@supabase/functions-js/dist/module/types.js","./node_modules/@supabase/gotrue-js/dist/module/GoTrueAdminApi.js","./node_modules/@supabase/gotrue-js/dist/module/GoTrueClient.js","./node_modules/@supabase/gotrue-js/dist/module/index.js","./node_modules/@supabase/gotrue-js/dist/module/lib/constants.js","./node_modules/@supabase/gotrue-js/dist/module/lib/errors.js","./node_modules/@supabase/gotrue-js/dist/module/lib/fetch.js","./node_modules/@supabase/gotrue-js/dist/module/lib/helpers.js","./node_modules/@supabase/gotrue-js/dist/module/lib/local-storage.js","./node_modules/@supabase/gotrue-js/dist/module/lib/polyfills.js","./node_modules/@supabase/gotrue-js/dist/module/lib/types.js","./node_modules/@supabase/gotrue-js/dist/module/lib/version.js","./node_modules/@supabase/postgrest-js/dist/module/PostgrestBuilder.js","./node_modules/@supabase/postgrest-js/dist/module/PostgrestClient.js","./node_modules/@supabase/postgrest-js/dist/module/PostgrestFilterBuilder.js","./node_modules/@supabase/postgrest-js/dist/module/PostgrestQueryBuilder.js","./node_modules/@supabase/postgrest-js/dist/module/PostgrestTransformBuilder.js","./node_modules/@supabase/postgrest-js/dist/module/constants.js","./node_modules/@supabase/postgrest-js/dist/module/index.js","./node_modules/@supabase/postgrest-js/dist/module/version.js","./node_modules/@supabase/realtime-js/dist/module/RealtimeChannel.js","./node_modules/@supabase/realtime-js/dist/module/RealtimeClient.js","./node_modules/@supabase/realtime-js/dist/module/RealtimePresence.js","./node_modules/@supabase/realtime-js/dist/module/index.js","./node_modules/@supabase/realtime-js/dist/module/lib/constants.js","./node_modules/@supabase/realtime-js/dist/module/lib/push.js","./node_modules/@supabase/realtime-js/dist/module/lib/serializer.js","./node_modules/@supabase/realtime-js/dist/module/lib/timer.js","./node_modules/@supabase/realtime-js/dist/module/lib/transformers.js","./node_modules/@supabase/realtime-js/dist/module/lib/version.js","./node_modules/@supabase/storage-js/dist/module/StorageClient.js","./node_modules/@supabase/storage-js/dist/module/lib/constants.js","./node_modules/@supabase/storage-js/dist/module/lib/errors.js","./node_modules/@supabase/storage-js/dist/module/lib/fetch.js","./node_modules/@supabase/storage-js/dist/module/lib/helpers.js","./node_modules/@supabase/storage-js/dist/module/lib/version.js","./node_modules/@supabase/storage-js/dist/module/packages/StorageBucketApi.js","./node_modules/@supabase/storage-js/dist/module/packages/StorageFileApi.js","./node_modules/@supabase/supabase-js/dist/module/SupabaseClient.js","./node_modules/@supabase/supabase-js/dist/module/index.js","./node_modules/@supabase/supabase-js/dist/module/lib/SupabaseAuthClient.js","./node_modules/@supabase/supabase-js/dist/module/lib/constants.js","./node_modules/@supabase/supabase-js/dist/module/lib/fetch.js","./node_modules/@supabase/supabase-js/dist/module/lib/helpers.js","./node_modules/@supabase/supabase-js/dist/module/lib/version.js","./node_modules/cross-fetch/dist/browser-ponyfill.js","./node_modules/es5-ext/global.js","./node_modules/websocket/lib/browser.js","./node_modules/websocket/lib/version.js","./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"],"sourcesContent":["var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { resolveFetch } from './helper';\nimport { FunctionsFetchError, FunctionsHttpError, FunctionsRelayError, } from './types';\nexport class FunctionsClient {\n    constructor(url, { headers = {}, customFetch, } = {}) {\n        this.url = url;\n        this.headers = headers;\n        this.fetch = resolveFetch(customFetch);\n    }\n    /**\n     * Updates the authorization header\n     * @param token - the new jwt token sent in the authorisation header\n     */\n    setAuth(token) {\n        this.headers.Authorization = `Bearer ${token}`;\n    }\n    /**\n     * Invokes a function\n     * @param functionName - the name of the function to invoke\n     */\n    invoke(functionName, invokeOptions = {}) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const { headers, body: functionArgs } = invokeOptions;\n                let _headers = {};\n                let body;\n                if (functionArgs &&\n                    ((headers && !Object.prototype.hasOwnProperty.call(headers, 'Content-Type')) || !headers)) {\n                    if ((typeof Blob !== 'undefined' && functionArgs instanceof Blob) ||\n                        functionArgs instanceof ArrayBuffer) {\n                        // will work for File as File inherits Blob\n                        // also works for ArrayBuffer as it is the same underlying structure as a Blob\n                        _headers['Content-Type'] = 'application/octet-stream';\n                        body = functionArgs;\n                    }\n                    else if (typeof functionArgs === 'string') {\n                        // plain string\n                        _headers['Content-Type'] = 'text/plain';\n                        body = functionArgs;\n                    }\n                    else if (typeof FormData !== 'undefined' && functionArgs instanceof FormData) {\n                        // don't set content-type headers\n                        // Request will automatically add the right boundary value\n                        body = functionArgs;\n                    }\n                    else {\n                        // default, assume this is JSON\n                        _headers['Content-Type'] = 'application/json';\n                        body = JSON.stringify(functionArgs);\n                    }\n                }\n                const response = yield this.fetch(`${this.url}/${functionName}`, {\n                    method: 'POST',\n                    // headers priority is (high to low):\n                    // 1. invoke-level headers\n                    // 2. client-level headers\n                    // 3. default Content-Type header\n                    headers: Object.assign(Object.assign(Object.assign({}, _headers), this.headers), headers),\n                    body,\n                }).catch((fetchError) => {\n                    throw new FunctionsFetchError(fetchError);\n                });\n                const isRelayError = response.headers.get('x-relay-error');\n                if (isRelayError && isRelayError === 'true') {\n                    throw new FunctionsRelayError(response);\n                }\n                if (!response.ok) {\n                    throw new FunctionsHttpError(response);\n                }\n                let responseType = ((_a = response.headers.get('Content-Type')) !== null && _a !== void 0 ? _a : 'text/plain').split(';')[0].trim();\n                let data;\n                if (responseType === 'application/json') {\n                    data = yield response.json();\n                }\n                else if (responseType === 'application/octet-stream') {\n                    data = yield response.blob();\n                }\n                else if (responseType === 'multipart/form-data') {\n                    data = yield response.formData();\n                }\n                else {\n                    // default to text\n                    data = yield response.text();\n                }\n                return { data, error: null };\n            }\n            catch (error) {\n                return { data: null, error };\n            }\n        });\n    }\n}\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nexport const resolveFetch = (customFetch) => {\n    let _fetch;\n    if (customFetch) {\n        _fetch = customFetch;\n    }\n    else if (typeof fetch === 'undefined') {\n        _fetch = (...args) => __awaiter(void 0, void 0, void 0, function* () { return yield (yield import('cross-fetch')).fetch(...args); });\n    }\n    else {\n        _fetch = fetch;\n    }\n    return (...args) => _fetch(...args);\n};\n","export class FunctionsError extends Error {\n    constructor(message, name = 'FunctionsError', context) {\n        super(message);\n        super.name = name;\n        this.context = context;\n    }\n}\nexport class FunctionsFetchError extends FunctionsError {\n    constructor(context) {\n        super('Failed to send a request to the Edge Function', 'FunctionsFetchError', context);\n    }\n}\nexport class FunctionsRelayError extends FunctionsError {\n    constructor(context) {\n        super('Relay Error invoking the Edge Function', 'FunctionsRelayError', context);\n    }\n}\nexport class FunctionsHttpError extends FunctionsError {\n    constructor(context) {\n        super('Edge Function returned a non-2xx status code', 'FunctionsHttpError', context);\n    }\n}\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { _generateLinkResponse, _request, _userResponse } from './lib/fetch';\nimport { resolveFetch } from './lib/helpers';\nimport { isAuthError } from './lib/errors';\nexport default class GoTrueAdminApi {\n    constructor({ url = '', headers = {}, fetch, }) {\n        this.url = url;\n        this.headers = headers;\n        this.fetch = resolveFetch(fetch);\n        this.mfa = {\n            listFactors: this._listFactors.bind(this),\n            deleteFactor: this._deleteFactor.bind(this),\n        };\n    }\n    /**\n     * Removes a logged-in session.\n     * @param jwt A valid, logged-in JWT.\n     */\n    signOut(jwt) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                yield _request(this.fetch, 'POST', `${this.url}/logout`, {\n                    headers: this.headers,\n                    jwt,\n                    noResolveJson: true,\n                });\n                return { data: null, error: null };\n            }\n            catch (error) {\n                if (isAuthError(error)) {\n                    return { data: null, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Sends an invite link to an email address.\n     * @param email The email address of the user.\n     * @param options.redirectTo A URL or mobile deeplink to send the user to after they are confirmed.\n     * @param options.data Optional user metadata\n     */\n    inviteUserByEmail(email, options = {}) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                return yield _request(this.fetch, 'POST', `${this.url}/invite`, {\n                    body: { email, data: options.data },\n                    headers: this.headers,\n                    redirectTo: options.redirectTo,\n                    xform: _userResponse,\n                });\n            }\n            catch (error) {\n                if (isAuthError(error)) {\n                    return { data: { user: null }, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Generates email links and OTPs to be sent via a custom email provider.\n     * @param email The user's email.\n     * @param options.password User password. For signup only.\n     * @param options.data Optional user metadata. For signup only.\n     * @param options.redirectTo The redirect url which should be appended to the generated link\n     */\n    generateLink(params) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const { options } = params, rest = __rest(params, [\"options\"]);\n                const body = Object.assign(Object.assign({}, rest), options);\n                if ('newEmail' in rest) {\n                    // replace newEmail with new_email in request body\n                    body.new_email = rest === null || rest === void 0 ? void 0 : rest.newEmail;\n                    delete body['newEmail'];\n                }\n                return yield _request(this.fetch, 'POST', `${this.url}/admin/generate_link`, {\n                    body: body,\n                    headers: this.headers,\n                    xform: _generateLinkResponse,\n                    redirectTo: options === null || options === void 0 ? void 0 : options.redirectTo,\n                });\n            }\n            catch (error) {\n                if (isAuthError(error)) {\n                    return {\n                        data: {\n                            properties: null,\n                            user: null,\n                        },\n                        error,\n                    };\n                }\n                throw error;\n            }\n        });\n    }\n    // User Admin API\n    /**\n     * Creates a new user.\n     * This function should only be called on a server. Never expose your `service_role` key in the browser.\n     */\n    createUser(attributes) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                return yield _request(this.fetch, 'POST', `${this.url}/admin/users`, {\n                    body: attributes,\n                    headers: this.headers,\n                    xform: _userResponse,\n                });\n            }\n            catch (error) {\n                if (isAuthError(error)) {\n                    return { data: { user: null }, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Get a list of users.\n     *\n     * This function should only be called on a server. Never expose your `service_role` key in the browser.\n     */\n    listUsers() {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const { data, error } = yield _request(this.fetch, 'GET', `${this.url}/admin/users`, {\n                    headers: this.headers,\n                });\n                if (error)\n                    throw error;\n                return { data: Object.assign({}, data), error: null };\n            }\n            catch (error) {\n                if (isAuthError(error)) {\n                    return { data: { users: [] }, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Get user by id.\n     *\n     * @param uid The user's unique identifier\n     *\n     * This function should only be called on a server. Never expose your `service_role` key in the browser.\n     */\n    getUserById(uid) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                return yield _request(this.fetch, 'GET', `${this.url}/admin/users/${uid}`, {\n                    headers: this.headers,\n                    xform: _userResponse,\n                });\n            }\n            catch (error) {\n                if (isAuthError(error)) {\n                    return { data: { user: null }, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Updates the user data.\n     *\n     * @param attributes The data you want to update.\n     *\n     * This function should only be called on a server. Never expose your `service_role` key in the browser.\n     */\n    updateUserById(uid, attributes) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                return yield _request(this.fetch, 'PUT', `${this.url}/admin/users/${uid}`, {\n                    body: attributes,\n                    headers: this.headers,\n                    xform: _userResponse,\n                });\n            }\n            catch (error) {\n                if (isAuthError(error)) {\n                    return { data: { user: null }, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Delete a user. Requires a `service_role` key.\n     *\n     * @param id The user id you want to remove.\n     *\n     * This function should only be called on a server. Never expose your `service_role` key in the browser.\n     */\n    deleteUser(id) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                return yield _request(this.fetch, 'DELETE', `${this.url}/admin/users/${id}`, {\n                    headers: this.headers,\n                    xform: _userResponse,\n                });\n            }\n            catch (error) {\n                if (isAuthError(error)) {\n                    return { data: { user: null }, error };\n                }\n                throw error;\n            }\n        });\n    }\n    _listFactors(params) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const data = yield _request(this.fetch, 'GET', `${this.url}/admin/users/${params.userId}/factors`, {\n                    headers: this.headers,\n                });\n                return { data, error: null };\n            }\n            catch (error) {\n                if (isAuthError(error)) {\n                    return { data: null, error };\n                }\n                throw error;\n            }\n        });\n    }\n    _deleteFactor(params) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const data = yield _request(this.fetch, 'DELETE', `${this.url}/admin/users/${params.userId}/factors/${params.id}`, {\n                    headers: this.headers,\n                });\n                return { data, error: null };\n            }\n            catch (error) {\n                if (isAuthError(error)) {\n                    return { data: null, error };\n                }\n                throw error;\n            }\n        });\n    }\n}\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport GoTrueAdminApi from './GoTrueAdminApi';\nimport { DEFAULT_HEADERS, EXPIRY_MARGIN, GOTRUE_URL, NETWORK_FAILURE, STORAGE_KEY, } from './lib/constants';\nimport { AuthImplicitGrantRedirectError, AuthInvalidCredentialsError, AuthRetryableFetchError, AuthSessionMissingError, AuthUnknownError, isAuthApiError, isAuthError, } from './lib/errors';\nimport { _request, _sessionResponse, _userResponse, _ssoResponse } from './lib/fetch';\nimport { Deferred, getItemAsync, getParameterByName, isBrowser, removeItemAsync, resolveFetch, setItemAsync, uuid, decodeJWTPayload, } from './lib/helpers';\nimport localStorageAdapter from './lib/local-storage';\nimport { polyfillGlobalThis } from './lib/polyfills';\npolyfillGlobalThis(); // Make \"globalThis\" available\nconst DEFAULT_OPTIONS = {\n    url: GOTRUE_URL,\n    storageKey: STORAGE_KEY,\n    autoRefreshToken: true,\n    persistSession: true,\n    detectSessionInUrl: true,\n    headers: DEFAULT_HEADERS,\n};\nexport default class GoTrueClient {\n    /**\n     * Create a new client for use in the browser.\n     */\n    constructor(options) {\n        this.stateChangeEmitters = new Map();\n        this.networkRetries = 0;\n        this.refreshingDeferred = null;\n        /**\n         * Keeps track of the async client initialization.\n         * When null or not yet resolved the auth state is `unknown`\n         * Once resolved the the auth state is known and it's save to call any further client methods.\n         * Keep extra care to never reject or throw uncaught errors\n         */\n        this.initializePromise = null;\n        this.detectSessionInUrl = true;\n        const settings = Object.assign(Object.assign({}, DEFAULT_OPTIONS), options);\n        this.inMemorySession = null;\n        this.storageKey = settings.storageKey;\n        this.autoRefreshToken = settings.autoRefreshToken;\n        this.persistSession = settings.persistSession;\n        this.storage = settings.storage || localStorageAdapter;\n        this.admin = new GoTrueAdminApi({\n            url: settings.url,\n            headers: settings.headers,\n            fetch: settings.fetch,\n        });\n        this.url = settings.url;\n        this.headers = settings.headers;\n        this.fetch = resolveFetch(settings.fetch);\n        this.detectSessionInUrl = settings.detectSessionInUrl;\n        this.initialize();\n        this.mfa = {\n            verify: this._verify.bind(this),\n            enroll: this._enroll.bind(this),\n            unenroll: this._unenroll.bind(this),\n            challenge: this._challenge.bind(this),\n            listFactors: this._listFactors.bind(this),\n            challengeAndVerify: this._challengeAndVerify.bind(this),\n            getAuthenticatorAssuranceLevel: this._getAuthenticatorAssuranceLevel.bind(this),\n        };\n    }\n    /**\n     * Initializes the client session either from the url or from storage.\n     * This method is automatically called when instantiating the client, but should also be called\n     * manually when checking for an error from an auth redirect (oauth, magiclink, password recovery, etc).\n     */\n    initialize() {\n        if (!this.initializePromise) {\n            this.initializePromise = this._initialize();\n        }\n        return this.initializePromise;\n    }\n    /**\n     * IMPORTANT:\n     * 1. Never throw in this method, as it is called from the constructor\n     * 2. Never return a session from this method as it would be cached over\n     *    the whole lifetime of the client\n     */\n    _initialize() {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (this.initializePromise) {\n                return this.initializePromise;\n            }\n            try {\n                if (this.detectSessionInUrl && this._isImplicitGrantFlow()) {\n                    const { data, error } = yield this._getSessionFromUrl();\n                    if (error) {\n                        // failed login attempt via url,\n                        // remove old session as in verifyOtp, signUp and signInWith*\n                        yield this._removeSession();\n                        return { error };\n                    }\n                    const { session, redirectType } = data;\n                    yield this._saveSession(session);\n                    this._notifyAllSubscribers('SIGNED_IN', session);\n                    if (redirectType === 'recovery') {\n                        this._notifyAllSubscribers('PASSWORD_RECOVERY', session);\n                    }\n                    return { error: null };\n                }\n                // no login attempt via callback url try to recover session from storage\n                yield this._recoverAndRefresh();\n                return { error: null };\n            }\n            catch (error) {\n                if (isAuthError(error)) {\n                    return { error };\n                }\n                return {\n                    error: new AuthUnknownError('Unexpected error during initialization', error),\n                };\n            }\n            finally {\n                this._handleVisibilityChange();\n            }\n        });\n    }\n    /**\n     * Creates a new user.\n     * @returns A logged-in session if the server has \"autoconfirm\" ON\n     * @returns A user if the server has \"autoconfirm\" OFF\n     */\n    signUp(credentials) {\n        var _a, _b;\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                yield this._removeSession();\n                let res;\n                if ('email' in credentials) {\n                    const { email, password, options } = credentials;\n                    res = yield _request(this.fetch, 'POST', `${this.url}/signup`, {\n                        headers: this.headers,\n                        redirectTo: options === null || options === void 0 ? void 0 : options.emailRedirectTo,\n                        body: {\n                            email,\n                            password,\n                            data: (_a = options === null || options === void 0 ? void 0 : options.data) !== null && _a !== void 0 ? _a : {},\n                            gotrue_meta_security: { captcha_token: options === null || options === void 0 ? void 0 : options.captchaToken },\n                        },\n                        xform: _sessionResponse,\n                    });\n                }\n                else if ('phone' in credentials) {\n                    const { phone, password, options } = credentials;\n                    res = yield _request(this.fetch, 'POST', `${this.url}/signup`, {\n                        headers: this.headers,\n                        body: {\n                            phone,\n                            password,\n                            data: (_b = options === null || options === void 0 ? void 0 : options.data) !== null && _b !== void 0 ? _b : {},\n                            gotrue_meta_security: { captcha_token: options === null || options === void 0 ? void 0 : options.captchaToken },\n                        },\n                        xform: _sessionResponse,\n                    });\n                }\n                else {\n                    throw new AuthInvalidCredentialsError('You must provide either an email or phone number and a password');\n                }\n                const { data, error } = res;\n                if (error || !data) {\n                    return { data: { user: null, session: null }, error: error };\n                }\n                const session = data.session;\n                const user = data.user;\n                if (data.session) {\n                    yield this._saveSession(data.session);\n                    this._notifyAllSubscribers('SIGNED_IN', session);\n                }\n                return { data: { user, session }, error: null };\n            }\n            catch (error) {\n                if (isAuthError(error)) {\n                    return { data: { user: null, session: null }, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Log in an existing user with an email and password or phone and password.\n     */\n    signInWithPassword(credentials) {\n        var _a, _b;\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                yield this._removeSession();\n                let res;\n                if ('email' in credentials) {\n                    const { email, password, options } = credentials;\n                    res = yield _request(this.fetch, 'POST', `${this.url}/token?grant_type=password`, {\n                        headers: this.headers,\n                        body: {\n                            email,\n                            password,\n                            data: (_a = options === null || options === void 0 ? void 0 : options.data) !== null && _a !== void 0 ? _a : {},\n                            gotrue_meta_security: { captcha_token: options === null || options === void 0 ? void 0 : options.captchaToken },\n                        },\n                        xform: _sessionResponse,\n                    });\n                }\n                else if ('phone' in credentials) {\n                    const { phone, password, options } = credentials;\n                    res = yield _request(this.fetch, 'POST', `${this.url}/token?grant_type=password`, {\n                        headers: this.headers,\n                        body: {\n                            phone,\n                            password,\n                            data: (_b = options === null || options === void 0 ? void 0 : options.data) !== null && _b !== void 0 ? _b : {},\n                            gotrue_meta_security: { captcha_token: options === null || options === void 0 ? void 0 : options.captchaToken },\n                        },\n                        xform: _sessionResponse,\n                    });\n                }\n                else {\n                    throw new AuthInvalidCredentialsError('You must provide either an email or phone number and a password');\n                }\n                const { data, error } = res;\n                if (error || !data)\n                    return { data: { user: null, session: null }, error };\n                if (data.session) {\n                    yield this._saveSession(data.session);\n                    this._notifyAllSubscribers('SIGNED_IN', data.session);\n                }\n                return { data, error };\n            }\n            catch (error) {\n                if (isAuthError(error)) {\n                    return { data: { user: null, session: null }, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Log in an existing user via a third-party provider.\n     */\n    signInWithOAuth(credentials) {\n        var _a, _b, _c;\n        return __awaiter(this, void 0, void 0, function* () {\n            yield this._removeSession();\n            return this._handleProviderSignIn(credentials.provider, {\n                redirectTo: (_a = credentials.options) === null || _a === void 0 ? void 0 : _a.redirectTo,\n                scopes: (_b = credentials.options) === null || _b === void 0 ? void 0 : _b.scopes,\n                queryParams: (_c = credentials.options) === null || _c === void 0 ? void 0 : _c.queryParams,\n            });\n        });\n    }\n    /**\n     * Log in a user using magiclink or a one-time password (OTP).\n     * If the `{{ .ConfirmationURL }}` variable is specified in the email template, a magiclink will be sent.\n     * If the `{{ .Token }}` variable is specified in the email template, an OTP will be sent.\n     * If you're using phone sign-ins, only an OTP will be sent. You won't be able to send a magiclink for phone sign-ins.\n     */\n    signInWithOtp(credentials) {\n        var _a, _b, _c, _d;\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                yield this._removeSession();\n                if ('email' in credentials) {\n                    const { email, options } = credentials;\n                    const { error } = yield _request(this.fetch, 'POST', `${this.url}/otp`, {\n                        headers: this.headers,\n                        body: {\n                            email,\n                            data: (_a = options === null || options === void 0 ? void 0 : options.data) !== null && _a !== void 0 ? _a : {},\n                            create_user: (_b = options === null || options === void 0 ? void 0 : options.shouldCreateUser) !== null && _b !== void 0 ? _b : true,\n                            gotrue_meta_security: { captcha_token: options === null || options === void 0 ? void 0 : options.captchaToken },\n                        },\n                        redirectTo: options === null || options === void 0 ? void 0 : options.emailRedirectTo,\n                    });\n                    return { data: { user: null, session: null }, error };\n                }\n                if ('phone' in credentials) {\n                    const { phone, options } = credentials;\n                    const { error } = yield _request(this.fetch, 'POST', `${this.url}/otp`, {\n                        headers: this.headers,\n                        body: {\n                            phone,\n                            data: (_c = options === null || options === void 0 ? void 0 : options.data) !== null && _c !== void 0 ? _c : {},\n                            create_user: (_d = options === null || options === void 0 ? void 0 : options.shouldCreateUser) !== null && _d !== void 0 ? _d : true,\n                            gotrue_meta_security: { captcha_token: options === null || options === void 0 ? void 0 : options.captchaToken },\n                        },\n                    });\n                    return { data: { user: null, session: null }, error };\n                }\n                throw new AuthInvalidCredentialsError('You must provide either an email or phone number.');\n            }\n            catch (error) {\n                if (isAuthError(error)) {\n                    return { data: { user: null, session: null }, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Log in a user given a User supplied OTP received via mobile.\n     */\n    verifyOtp(params) {\n        var _a, _b;\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                yield this._removeSession();\n                const { data, error } = yield _request(this.fetch, 'POST', `${this.url}/verify`, {\n                    headers: this.headers,\n                    body: Object.assign(Object.assign({}, params), { gotrue_meta_security: { captcha_token: (_a = params.options) === null || _a === void 0 ? void 0 : _a.captchaToken } }),\n                    redirectTo: (_b = params.options) === null || _b === void 0 ? void 0 : _b.redirectTo,\n                    xform: _sessionResponse,\n                });\n                if (error) {\n                    throw error;\n                }\n                if (!data) {\n                    throw 'An error occurred on token verification.';\n                }\n                const session = data.session;\n                const user = data.user;\n                if (session === null || session === void 0 ? void 0 : session.access_token) {\n                    yield this._saveSession(session);\n                    this._notifyAllSubscribers('SIGNED_IN', session);\n                }\n                return { data: { user, session }, error: null };\n            }\n            catch (error) {\n                if (isAuthError(error)) {\n                    return { data: { user: null, session: null }, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Attempts a single-sign on using an enterprise Identity Provider. A\n     * successful SSO attempt will redirect the current page to the identity\n     * provider authorization page. The redirect URL is implementation and SSO\n     * protocol specific.\n     *\n     * You can use it by providing a SSO domain. Typically you can extract this\n     * domain by asking users for their email address. If this domain is\n     * registered on the Auth instance the redirect will use that organization's\n     * currently active SSO Identity Provider for the login.\n     *\n     * If you have built an organization-specific login page, you can use the\n     * organization's SSO Identity Provider UUID directly instead.\n     *\n     * This API is experimental and availability is conditional on correct\n     * settings on the Auth service.\n     *\n     * @experimental\n     */\n    signInWithSSO(params) {\n        var _a, _b, _c;\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                yield this._removeSession();\n                return yield _request(this.fetch, 'POST', `${this.url}/sso`, {\n                    body: Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({}, ('providerId' in params ? { provider_id: params.providerId } : null)), ('domain' in params ? { domain: params.domain } : null)), { redirect_to: (_b = (_a = params.options) === null || _a === void 0 ? void 0 : _a.redirectTo) !== null && _b !== void 0 ? _b : undefined }), (((_c = params === null || params === void 0 ? void 0 : params.options) === null || _c === void 0 ? void 0 : _c.captchaToken)\n                        ? { gotrue_meta_security: { captcha_token: params.options.captchaToken } }\n                        : null)), { skip_http_redirect: true }),\n                    headers: this.headers,\n                    xform: _ssoResponse,\n                });\n            }\n            catch (error) {\n                if (isAuthError(error)) {\n                    return { data: null, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Returns the session, refreshing it if necessary.\n     * The session returned can be null if the session is not detected which can happen in the event a user is not signed-in or has logged out.\n     */\n    getSession() {\n        return __awaiter(this, void 0, void 0, function* () {\n            // make sure we've read the session from the url if there is one\n            // save to just await, as long we make sure _initialize() never throws\n            yield this.initializePromise;\n            let currentSession = null;\n            if (this.persistSession) {\n                const maybeSession = yield getItemAsync(this.storage, this.storageKey);\n                if (maybeSession !== null) {\n                    if (this._isValidSession(maybeSession)) {\n                        currentSession = maybeSession;\n                    }\n                    else {\n                        yield this._removeSession();\n                    }\n                }\n            }\n            else {\n                currentSession = this.inMemorySession;\n            }\n            if (!currentSession) {\n                return { data: { session: null }, error: null };\n            }\n            const hasExpired = currentSession.expires_at\n                ? currentSession.expires_at <= Date.now() / 1000\n                : false;\n            if (!hasExpired) {\n                return { data: { session: currentSession }, error: null };\n            }\n            const { session, error } = yield this._callRefreshToken(currentSession.refresh_token);\n            if (error) {\n                return { data: { session: null }, error };\n            }\n            return { data: { session }, error: null };\n        });\n    }\n    /**\n     * Gets the current user details if there is an existing session.\n     * @param jwt Takes in an optional access token jwt. If no jwt is provided, getUser() will attempt to get the jwt from the current session.\n     */\n    getUser(jwt) {\n        var _a, _b;\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                if (!jwt) {\n                    const { data, error } = yield this.getSession();\n                    if (error) {\n                        throw error;\n                    }\n                    // Default to Authorization header if there is no existing session\n                    jwt = (_b = (_a = data.session) === null || _a === void 0 ? void 0 : _a.access_token) !== null && _b !== void 0 ? _b : undefined;\n                }\n                return yield _request(this.fetch, 'GET', `${this.url}/user`, {\n                    headers: this.headers,\n                    jwt: jwt,\n                    xform: _userResponse,\n                });\n            }\n            catch (error) {\n                if (isAuthError(error)) {\n                    return { data: { user: null }, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Updates user data, if there is a logged in user.\n     */\n    updateUser(attributes) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const { data: sessionData, error: sessionError } = yield this.getSession();\n                if (sessionError) {\n                    throw sessionError;\n                }\n                if (!sessionData.session) {\n                    throw new AuthSessionMissingError();\n                }\n                const session = sessionData.session;\n                const { data, error: userError } = yield _request(this.fetch, 'PUT', `${this.url}/user`, {\n                    headers: this.headers,\n                    body: attributes,\n                    jwt: session.access_token,\n                    xform: _userResponse,\n                });\n                if (userError)\n                    throw userError;\n                session.user = data.user;\n                yield this._saveSession(session);\n                this._notifyAllSubscribers('USER_UPDATED', session);\n                return { data: { user: session.user }, error: null };\n            }\n            catch (error) {\n                if (isAuthError(error)) {\n                    return { data: { user: null }, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Decodes a JWT (without performing any validation).\n     */\n    _decodeJWT(jwt) {\n        return decodeJWTPayload(jwt);\n    }\n    /**\n     * Sets the session data from the current session. If the current session is expired, setSession will take care of refreshing it to obtain a new session.\n     * If the refresh token in the current session is invalid and the current session has expired, an error will be thrown.\n     * If the current session does not contain at expires_at field, setSession will use the exp claim defined in the access token.\n     * @param currentSession The current session that minimally contains an access token and refresh token.\n     */\n    setSession(currentSession) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const timeNow = Date.now() / 1000;\n                let expiresAt = timeNow;\n                let hasExpired = true;\n                let session = null;\n                if (currentSession.access_token && currentSession.access_token.split('.')[1]) {\n                    const payload = this._decodeJWT(currentSession.access_token);\n                    if (payload.exp) {\n                        expiresAt = payload.exp;\n                        hasExpired = expiresAt <= timeNow;\n                    }\n                }\n                if (hasExpired) {\n                    if (!currentSession.refresh_token) {\n                        throw new AuthSessionMissingError();\n                    }\n                    const { data, error } = yield this._refreshAccessToken(currentSession.refresh_token);\n                    if (error) {\n                        return { data: { session: null, user: null }, error: error };\n                    }\n                    if (!data.session) {\n                        return { data: { session: null, user: null }, error: null };\n                    }\n                    session = data.session;\n                }\n                else {\n                    const { data, error } = yield this.getUser(currentSession.access_token);\n                    if (error) {\n                        throw error;\n                    }\n                    session = {\n                        access_token: currentSession.access_token,\n                        refresh_token: currentSession.refresh_token,\n                        user: data.user,\n                        token_type: 'bearer',\n                        expires_in: expiresAt - timeNow,\n                        expires_at: expiresAt,\n                    };\n                }\n                yield this._saveSession(session);\n                this._notifyAllSubscribers('TOKEN_REFRESHED', session);\n                return { data: { session, user: session.user }, error: null };\n            }\n            catch (error) {\n                if (isAuthError(error)) {\n                    return { data: { session: null, user: null }, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Returns a new session, regardless of expiry status.\n     * Takes in an optional current session. If not passed in, then refreshSession() will attempt to retrieve it from getSession().\n     * If the current session's refresh token is invalid, an error will be thrown.\n     * @param currentSession The current session. If passed in, it must contain a refresh token.\n     */\n    refreshSession(currentSession) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                if (!currentSession) {\n                    const { data, error } = yield this.getSession();\n                    if (error) {\n                        throw error;\n                    }\n                    currentSession = (_a = data.session) !== null && _a !== void 0 ? _a : undefined;\n                }\n                if (!(currentSession === null || currentSession === void 0 ? void 0 : currentSession.refresh_token)) {\n                    throw new AuthSessionMissingError();\n                }\n                const { session, error } = yield this._callRefreshToken(currentSession.refresh_token);\n                if (error) {\n                    return { data: { user: null, session: null }, error: error };\n                }\n                if (!session) {\n                    return { data: { user: null, session: null }, error: null };\n                }\n                return { data: { user: session.user, session }, error: null };\n            }\n            catch (error) {\n                if (isAuthError(error)) {\n                    return { data: { user: null, session: null }, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Gets the session data from a URL string\n     */\n    _getSessionFromUrl() {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                if (!isBrowser())\n                    throw new AuthImplicitGrantRedirectError('No browser detected.');\n                if (!this._isImplicitGrantFlow()) {\n                    throw new AuthImplicitGrantRedirectError('Not a valid implicit grant flow url.');\n                }\n                const error_description = getParameterByName('error_description');\n                if (error_description) {\n                    const error_code = getParameterByName('error_code');\n                    if (!error_code)\n                        throw new AuthImplicitGrantRedirectError('No error_code detected.');\n                    const error = getParameterByName('error');\n                    if (!error)\n                        throw new AuthImplicitGrantRedirectError('No error detected.');\n                    throw new AuthImplicitGrantRedirectError(error_description, { error, code: error_code });\n                }\n                const provider_token = getParameterByName('provider_token');\n                const provider_refresh_token = getParameterByName('provider_refresh_token');\n                const access_token = getParameterByName('access_token');\n                if (!access_token)\n                    throw new AuthImplicitGrantRedirectError('No access_token detected.');\n                const expires_in = getParameterByName('expires_in');\n                if (!expires_in)\n                    throw new AuthImplicitGrantRedirectError('No expires_in detected.');\n                const refresh_token = getParameterByName('refresh_token');\n                if (!refresh_token)\n                    throw new AuthImplicitGrantRedirectError('No refresh_token detected.');\n                const token_type = getParameterByName('token_type');\n                if (!token_type)\n                    throw new AuthImplicitGrantRedirectError('No token_type detected.');\n                const timeNow = Math.round(Date.now() / 1000);\n                const expires_at = timeNow + parseInt(expires_in);\n                const { data, error } = yield this.getUser(access_token);\n                if (error)\n                    throw error;\n                const user = data.user;\n                const session = {\n                    provider_token,\n                    provider_refresh_token,\n                    access_token,\n                    expires_in: parseInt(expires_in),\n                    expires_at,\n                    refresh_token,\n                    token_type,\n                    user,\n                };\n                const redirectType = getParameterByName('type');\n                // Remove tokens from URL\n                window.location.hash = '';\n                return { data: { session, redirectType }, error: null };\n            }\n            catch (error) {\n                if (isAuthError(error)) {\n                    return { data: { session: null, redirectType: null }, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Checks if the current URL contains parameters given by an implicit oauth grant flow (https://www.rfc-editor.org/rfc/rfc6749.html#section-4.2)\n     */\n    _isImplicitGrantFlow() {\n        return (isBrowser() &&\n            (Boolean(getParameterByName('access_token')) ||\n                Boolean(getParameterByName('error_description'))));\n    }\n    /**\n     * Inside a browser context, `signOut()` will remove the logged in user from the browser session\n     * and log them out - removing all items from localstorage and then trigger a `\"SIGNED_OUT\"` event.\n     *\n     * For server-side management, you can revoke all refresh tokens for a user by passing a user's JWT through to `auth.api.signOut(JWT: string)`.\n     * There is no way to revoke a user's access token jwt until it expires. It is recommended to set a shorter expiry on the jwt for this reason.\n     */\n    signOut() {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            const { data, error: sessionError } = yield this.getSession();\n            if (sessionError) {\n                return { error: sessionError };\n            }\n            const accessToken = (_a = data.session) === null || _a === void 0 ? void 0 : _a.access_token;\n            if (accessToken) {\n                const { error } = yield this.admin.signOut(accessToken);\n                if (error) {\n                    // ignore 404s since user might not exist anymore\n                    // ignore 401s since an invalid or expired JWT should sign out the current session\n                    if (!(isAuthApiError(error) && (error.status === 404 || error.status === 401))) {\n                        return { error };\n                    }\n                }\n            }\n            yield this._removeSession();\n            this._notifyAllSubscribers('SIGNED_OUT', null);\n            return { error: null };\n        });\n    }\n    /**\n     * Receive a notification every time an auth event happens.\n     * @param callback A callback function to be invoked when an auth event happens.\n     */\n    onAuthStateChange(callback) {\n        const id = uuid();\n        const subscription = {\n            id,\n            callback,\n            unsubscribe: () => {\n                this.stateChangeEmitters.delete(id);\n            },\n        };\n        this.stateChangeEmitters.set(id, subscription);\n        return { data: { subscription } };\n    }\n    /**\n     * Sends a password reset request to an email address.\n     * @param email The email address of the user.\n     * @param options.redirectTo The URL to send the user to after they click the password reset link.\n     * @param options.captchaToken Verification token received when the user completes the captcha on the site.\n     */\n    resetPasswordForEmail(email, options = {}) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                return yield _request(this.fetch, 'POST', `${this.url}/recover`, {\n                    body: { email, gotrue_meta_security: { captcha_token: options.captchaToken } },\n                    headers: this.headers,\n                    redirectTo: options.redirectTo,\n                });\n            }\n            catch (error) {\n                if (isAuthError(error)) {\n                    return { data: null, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Generates a new JWT.\n     * @param refreshToken A valid refresh token that was returned on login.\n     */\n    _refreshAccessToken(refreshToken) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                return yield _request(this.fetch, 'POST', `${this.url}/token?grant_type=refresh_token`, {\n                    body: { refresh_token: refreshToken },\n                    headers: this.headers,\n                    xform: _sessionResponse,\n                });\n            }\n            catch (error) {\n                if (isAuthError(error)) {\n                    return { data: { session: null, user: null }, error };\n                }\n                throw error;\n            }\n        });\n    }\n    _isValidSession(maybeSession) {\n        const isValidSession = typeof maybeSession === 'object' &&\n            maybeSession !== null &&\n            'access_token' in maybeSession &&\n            'refresh_token' in maybeSession &&\n            'expires_at' in maybeSession;\n        return isValidSession;\n    }\n    _handleProviderSignIn(provider, options = {}) {\n        const url = this._getUrlForProvider(provider, {\n            redirectTo: options.redirectTo,\n            scopes: options.scopes,\n            queryParams: options.queryParams,\n        });\n        // try to open on the browser\n        if (isBrowser()) {\n            window.location.href = url;\n        }\n        return { data: { provider, url }, error: null };\n    }\n    /**\n     * Recovers the session from LocalStorage and refreshes\n     * Note: this method is async to accommodate for AsyncStorage e.g. in React native.\n     */\n    _recoverAndRefresh() {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const currentSession = yield getItemAsync(this.storage, this.storageKey);\n                if (!this._isValidSession(currentSession)) {\n                    if (currentSession !== null) {\n                        yield this._removeSession();\n                    }\n                    return;\n                }\n                const timeNow = Math.round(Date.now() / 1000);\n                if (((_a = currentSession.expires_at) !== null && _a !== void 0 ? _a : Infinity) < timeNow + EXPIRY_MARGIN) {\n                    if (this.autoRefreshToken && currentSession.refresh_token) {\n                        this.networkRetries++;\n                        const { error } = yield this._callRefreshToken(currentSession.refresh_token);\n                        if (error) {\n                            console.log(error.message);\n                            if (error instanceof AuthRetryableFetchError &&\n                                this.networkRetries < NETWORK_FAILURE.MAX_RETRIES) {\n                                if (this.refreshTokenTimer)\n                                    clearTimeout(this.refreshTokenTimer);\n                                this.refreshTokenTimer = setTimeout(() => this._recoverAndRefresh(), Math.pow(NETWORK_FAILURE.RETRY_INTERVAL, this.networkRetries) * 100 // exponential backoff\n                                );\n                                return;\n                            }\n                            yield this._removeSession();\n                        }\n                        this.networkRetries = 0;\n                    }\n                    else {\n                        yield this._removeSession();\n                    }\n                }\n                else {\n                    if (this.persistSession) {\n                        yield this._saveSession(currentSession);\n                    }\n                    this._notifyAllSubscribers('SIGNED_IN', currentSession);\n                }\n            }\n            catch (err) {\n                console.error(err);\n                return;\n            }\n        });\n    }\n    _callRefreshToken(refreshToken) {\n        var _a, _b;\n        return __awaiter(this, void 0, void 0, function* () {\n            // refreshing is already in progress\n            if (this.refreshingDeferred) {\n                return this.refreshingDeferred.promise;\n            }\n            try {\n                this.refreshingDeferred = new Deferred();\n                if (!refreshToken) {\n                    throw new AuthSessionMissingError();\n                }\n                const { data, error } = yield this._refreshAccessToken(refreshToken);\n                if (error)\n                    throw error;\n                if (!data.session)\n                    throw new AuthSessionMissingError();\n                yield this._saveSession(data.session);\n                this._notifyAllSubscribers('TOKEN_REFRESHED', data.session);\n                const result = { session: data.session, error: null };\n                this.refreshingDeferred.resolve(result);\n                return result;\n            }\n            catch (error) {\n                if (isAuthError(error)) {\n                    const result = { session: null, error };\n                    (_a = this.refreshingDeferred) === null || _a === void 0 ? void 0 : _a.resolve(result);\n                    return result;\n                }\n                (_b = this.refreshingDeferred) === null || _b === void 0 ? void 0 : _b.reject(error);\n                throw error;\n            }\n            finally {\n                this.refreshingDeferred = null;\n            }\n        });\n    }\n    _notifyAllSubscribers(event, session) {\n        this.stateChangeEmitters.forEach((x) => x.callback(event, session));\n    }\n    /**\n     * set currentSession and currentUser\n     * process to _startAutoRefreshToken if possible\n     */\n    _saveSession(session) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!this.persistSession) {\n                this.inMemorySession = session;\n            }\n            const expiresAt = session.expires_at;\n            if (expiresAt) {\n                const timeNow = Math.round(Date.now() / 1000);\n                const expiresIn = expiresAt - timeNow;\n                const refreshDurationBeforeExpires = expiresIn > EXPIRY_MARGIN ? EXPIRY_MARGIN : 0.5;\n                this._startAutoRefreshToken((expiresIn - refreshDurationBeforeExpires) * 1000);\n            }\n            if (this.persistSession && session.expires_at) {\n                yield this._persistSession(session);\n            }\n        });\n    }\n    _persistSession(currentSession) {\n        return setItemAsync(this.storage, this.storageKey, currentSession);\n    }\n    _removeSession() {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (this.persistSession) {\n                yield removeItemAsync(this.storage, this.storageKey);\n            }\n            else {\n                this.inMemorySession = null;\n            }\n            if (this.refreshTokenTimer) {\n                clearTimeout(this.refreshTokenTimer);\n            }\n        });\n    }\n    /**\n     * Clear and re-create refresh token timer\n     * @param value time intervals in milliseconds.\n     * @param session The current session.\n     */\n    _startAutoRefreshToken(value) {\n        if (this.refreshTokenTimer)\n            clearTimeout(this.refreshTokenTimer);\n        if (value <= 0 || !this.autoRefreshToken)\n            return;\n        this.refreshTokenTimer = setTimeout(() => __awaiter(this, void 0, void 0, function* () {\n            this.networkRetries++;\n            const { data: { session }, error: sessionError, } = yield this.getSession();\n            if (!sessionError && session) {\n                const { error } = yield this._callRefreshToken(session.refresh_token);\n                if (!error)\n                    this.networkRetries = 0;\n                if (error instanceof AuthRetryableFetchError &&\n                    this.networkRetries < NETWORK_FAILURE.MAX_RETRIES)\n                    this._startAutoRefreshToken(Math.pow(NETWORK_FAILURE.RETRY_INTERVAL, this.networkRetries) * 100); // exponential backoff\n            }\n        }), value);\n        if (typeof this.refreshTokenTimer.unref === 'function')\n            this.refreshTokenTimer.unref();\n    }\n    _handleVisibilityChange() {\n        if (!isBrowser() || !(window === null || window === void 0 ? void 0 : window.addEventListener)) {\n            return false;\n        }\n        try {\n            window === null || window === void 0 ? void 0 : window.addEventListener('visibilitychange', () => __awaiter(this, void 0, void 0, function* () {\n                if (document.visibilityState === 'visible') {\n                    yield this.initializePromise;\n                    yield this._recoverAndRefresh();\n                }\n            }));\n        }\n        catch (error) {\n            console.error('_handleVisibilityChange', error);\n        }\n    }\n    /**\n     * Generates the relevant login URL for a third-party provider.\n     * @param options.redirectTo A URL or mobile address to send the user to after they are confirmed.\n     * @param options.scopes A space-separated list of scopes granted to the OAuth application.\n     * @param options.queryParams An object of key-value pairs containing query parameters granted to the OAuth application.\n     */\n    _getUrlForProvider(provider, options) {\n        const urlParams = [`provider=${encodeURIComponent(provider)}`];\n        if (options === null || options === void 0 ? void 0 : options.redirectTo) {\n            urlParams.push(`redirect_to=${encodeURIComponent(options.redirectTo)}`);\n        }\n        if (options === null || options === void 0 ? void 0 : options.scopes) {\n            urlParams.push(`scopes=${encodeURIComponent(options.scopes)}`);\n        }\n        if (options === null || options === void 0 ? void 0 : options.queryParams) {\n            const query = new URLSearchParams(options.queryParams);\n            urlParams.push(query.toString());\n        }\n        return `${this.url}/authorize?${urlParams.join('&')}`;\n    }\n    _unenroll(params) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            const { data: sessionData, error: sessionError } = yield this.getSession();\n            if (sessionError) {\n                return { data: null, error: sessionError };\n            }\n            return yield _request(this.fetch, 'DELETE', `${this.url}/factors/${params.factorId}`, {\n                headers: this.headers,\n                jwt: (_a = sessionData === null || sessionData === void 0 ? void 0 : sessionData.session) === null || _a === void 0 ? void 0 : _a.access_token,\n            });\n        });\n    }\n    /**\n     * Deletes a registered factor from GoTrue\n     * @param friendlyName Human readable name assigned to a device\n     * @param factorType device which we're validating against. Can only be TOTP for now.\n     * @param issuer domain which the user is enrolling with\n     */\n    _enroll(params) {\n        var _a, _b;\n        return __awaiter(this, void 0, void 0, function* () {\n            const { data: sessionData, error: sessionError } = yield this.getSession();\n            if (sessionError) {\n                return { data: null, error: sessionError };\n            }\n            const { data, error } = yield _request(this.fetch, 'POST', `${this.url}/factors`, {\n                body: {\n                    friendly_name: params.friendlyName,\n                    factor_type: params.factorType,\n                    issuer: params.issuer,\n                },\n                headers: this.headers,\n                jwt: (_a = sessionData === null || sessionData === void 0 ? void 0 : sessionData.session) === null || _a === void 0 ? void 0 : _a.access_token,\n            });\n            if (error) {\n                return { data: null, error };\n            }\n            if ((_b = data === null || data === void 0 ? void 0 : data.totp) === null || _b === void 0 ? void 0 : _b.qr_code) {\n                data.totp.qr_code = `data:image/svg+xml;utf-8,${data.totp.qr_code}`;\n            }\n            return { data, error: null };\n        });\n    }\n    /**\n     * Validates a device as part of the enrollment step.\n     * @param factorID System assigned identifier for authenticator device as returned by enroll\n     * @param code Code Generated by an authenticator device\n     */\n    _verify(params) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            const { data: sessionData, error: sessionError } = yield this.getSession();\n            if (sessionError) {\n                return { data: null, error: sessionError };\n            }\n            const { data, error } = yield _request(this.fetch, 'POST', `${this.url}/factors/${params.factorId}/verify`, {\n                body: { code: params.code, challenge_id: params.challengeId },\n                headers: this.headers,\n                jwt: (_a = sessionData === null || sessionData === void 0 ? void 0 : sessionData.session) === null || _a === void 0 ? void 0 : _a.access_token,\n            });\n            if (error) {\n                return { data: null, error };\n            }\n            yield this._saveSession(Object.assign({ expires_at: Math.round(Date.now() / 1000) + data.expires_in }, data));\n            this._notifyAllSubscribers('MFA_CHALLENGE_VERIFIED', data);\n            return { data, error };\n        });\n    }\n    /**\n     * Creates a challenge which a user can verify against\n     * @param factorID System assigned identifier for authenticator device as returned by enroll\n     */\n    _challenge(params) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            const { data: sessionData, error: sessionError } = yield this.getSession();\n            if (sessionError) {\n                return { data: null, error: sessionError };\n            }\n            return yield _request(this.fetch, 'POST', `${this.url}/factors/${params.factorId}/challenge`, {\n                headers: this.headers,\n                jwt: (_a = sessionData === null || sessionData === void 0 ? void 0 : sessionData.session) === null || _a === void 0 ? void 0 : _a.access_token,\n            });\n        });\n    }\n    _challengeAndVerify(params) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const { data: challengeData, error: challengeError } = yield this._challenge({\n                factorId: params.factorId,\n            });\n            if (challengeError) {\n                return { data: null, error: challengeError };\n            }\n            return yield this._verify({\n                factorId: params.factorId,\n                challengeId: challengeData.id,\n                code: params.code,\n            });\n        });\n    }\n    /**\n     * Displays all devices for a given user\n     */\n    _listFactors() {\n        return __awaiter(this, void 0, void 0, function* () {\n            const { data: { user }, error: userError, } = yield this.getUser();\n            if (userError) {\n                return { data: null, error: userError };\n            }\n            const factors = (user === null || user === void 0 ? void 0 : user.factors) || [];\n            const totp = factors.filter((factor) => factor.factor_type === 'totp' && factor.status === 'verified');\n            return {\n                data: {\n                    all: factors,\n                    totp,\n                },\n                error: null,\n            };\n        });\n    }\n    _getAuthenticatorAssuranceLevel() {\n        var _a, _b;\n        return __awaiter(this, void 0, void 0, function* () {\n            const { data: { session }, error: sessionError, } = yield this.getSession();\n            if (sessionError) {\n                return { data: null, error: sessionError };\n            }\n            if (!session) {\n                return {\n                    data: { currentLevel: null, nextLevel: null, currentAuthenticationMethods: [] },\n                    error: null,\n                };\n            }\n            const payload = this._decodeJWT(session.access_token);\n            let currentLevel = null;\n            if (payload.aal) {\n                currentLevel = payload.aal;\n            }\n            let nextLevel = currentLevel;\n            const verifiedFactors = (_b = (_a = session.user.factors) === null || _a === void 0 ? void 0 : _a.filter((factor) => factor.status === 'verified')) !== null && _b !== void 0 ? _b : [];\n            if (verifiedFactors.length > 0) {\n                nextLevel = 'aal2';\n            }\n            const currentAuthenticationMethods = payload.amr || [];\n            return { data: { currentLevel, nextLevel, currentAuthenticationMethods }, error: null };\n        });\n    }\n}\n","import GoTrueAdminApi from './GoTrueAdminApi';\nimport GoTrueClient from './GoTrueClient';\nexport { GoTrueAdminApi, GoTrueClient };\nexport * from './lib/types';\nexport * from './lib/errors';\n","import { version } from './version';\nexport const GOTRUE_URL = 'http://localhost:9999';\nexport const STORAGE_KEY = 'supabase.auth.token';\nexport const AUDIENCE = '';\nexport const DEFAULT_HEADERS = { 'X-Client-Info': `gotrue-js/${version}` };\nexport const EXPIRY_MARGIN = 10; // in seconds\nexport const NETWORK_FAILURE = {\n    MAX_RETRIES: 10,\n    RETRY_INTERVAL: 2, // in deciseconds\n};\n","export class AuthError extends Error {\n    constructor(message) {\n        super(message);\n        this.__isAuthError = true;\n        this.name = 'AuthError';\n    }\n}\nexport function isAuthError(error) {\n    return typeof error === 'object' && error !== null && '__isAuthError' in error;\n}\nexport class AuthApiError extends AuthError {\n    constructor(message, status) {\n        super(message);\n        this.name = 'AuthApiError';\n        this.status = status;\n    }\n    toJSON() {\n        return {\n            name: this.name,\n            message: this.message,\n            status: this.status,\n        };\n    }\n}\nexport function isAuthApiError(error) {\n    return isAuthError(error) && error.name === 'AuthApiError';\n}\nexport class AuthUnknownError extends AuthError {\n    constructor(message, originalError) {\n        super(message);\n        this.name = 'AuthUnknownError';\n        this.originalError = originalError;\n    }\n}\nexport class CustomAuthError extends AuthError {\n    constructor(message, name, status) {\n        super(message);\n        this.name = name;\n        this.status = status;\n    }\n    toJSON() {\n        return {\n            name: this.name,\n            message: this.message,\n            status: this.status,\n        };\n    }\n}\nexport class AuthSessionMissingError extends CustomAuthError {\n    constructor() {\n        super('Auth session missing!', 'AuthSessionMissingError', 400);\n    }\n}\nexport class AuthInvalidCredentialsError extends CustomAuthError {\n    constructor(message) {\n        super(message, 'AuthInvalidCredentialsError', 400);\n    }\n}\nexport class AuthImplicitGrantRedirectError extends CustomAuthError {\n    constructor(message, details = null) {\n        super(message, 'AuthImplicitGrantRedirectError', 500);\n        this.details = null;\n        this.details = details;\n    }\n    toJSON() {\n        return {\n            name: this.name,\n            message: this.message,\n            status: this.status,\n            details: this.details,\n        };\n    }\n}\nexport class AuthRetryableFetchError extends CustomAuthError {\n    constructor(message, status) {\n        super(message, 'AuthRetryableFetchError', status);\n    }\n}\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { expiresAt, looksLikeFetchResponse } from './helpers';\nimport { AuthApiError, AuthRetryableFetchError, AuthUnknownError } from './errors';\nconst _getErrorMessage = (err) => err.msg || err.message || err.error_description || err.error || JSON.stringify(err);\nconst handleError = (error, reject) => __awaiter(void 0, void 0, void 0, function* () {\n    const NETWORK_ERROR_CODES = [502, 503, 504];\n    if (!looksLikeFetchResponse(error)) {\n        reject(new AuthRetryableFetchError(_getErrorMessage(error), 0));\n    }\n    else if (NETWORK_ERROR_CODES.includes(error.status)) {\n        // status in 500...599 range - server had an error, request might be retryed.\n        reject(new AuthRetryableFetchError(_getErrorMessage(error), error.status));\n    }\n    else {\n        // got a response from server that is not in the 500...599 range - should not retry\n        error\n            .json()\n            .then((err) => {\n            reject(new AuthApiError(_getErrorMessage(err), error.status || 500));\n        })\n            .catch((e) => {\n            // not a valid json response\n            reject(new AuthUnknownError(_getErrorMessage(e), e));\n        });\n    }\n});\nconst _getRequestParams = (method, options, parameters, body) => {\n    const params = { method, headers: (options === null || options === void 0 ? void 0 : options.headers) || {} };\n    if (method === 'GET') {\n        return params;\n    }\n    params.headers = Object.assign({ 'Content-Type': 'application/json;charset=UTF-8' }, options === null || options === void 0 ? void 0 : options.headers);\n    params.body = JSON.stringify(body);\n    return Object.assign(Object.assign({}, params), parameters);\n};\nexport function _request(fetcher, method, url, options) {\n    var _a;\n    return __awaiter(this, void 0, void 0, function* () {\n        const headers = Object.assign({}, options === null || options === void 0 ? void 0 : options.headers);\n        if (options === null || options === void 0 ? void 0 : options.jwt) {\n            headers['Authorization'] = `Bearer ${options.jwt}`;\n        }\n        const qs = (_a = options === null || options === void 0 ? void 0 : options.query) !== null && _a !== void 0 ? _a : {};\n        if (options === null || options === void 0 ? void 0 : options.redirectTo) {\n            qs['redirect_to'] = options.redirectTo;\n        }\n        const queryString = Object.keys(qs).length ? '?' + new URLSearchParams(qs).toString() : '';\n        const data = yield _handleRequest(fetcher, method, url + queryString, { headers, noResolveJson: options === null || options === void 0 ? void 0 : options.noResolveJson }, {}, options === null || options === void 0 ? void 0 : options.body);\n        return (options === null || options === void 0 ? void 0 : options.xform) ? options === null || options === void 0 ? void 0 : options.xform(data) : { data: Object.assign({}, data), error: null };\n    });\n}\nfunction _handleRequest(fetcher, method, url, options, parameters, body) {\n    return __awaiter(this, void 0, void 0, function* () {\n        return new Promise((resolve, reject) => {\n            fetcher(url, _getRequestParams(method, options, parameters, body))\n                .then((result) => {\n                if (!result.ok)\n                    throw result;\n                if (options === null || options === void 0 ? void 0 : options.noResolveJson)\n                    return result;\n                return result.json();\n            })\n                .then((data) => resolve(data))\n                .catch((error) => handleError(error, reject));\n        });\n    });\n}\nexport function _sessionResponse(data) {\n    var _a;\n    let session = null;\n    if (hasSession(data)) {\n        session = Object.assign({}, data);\n        session.expires_at = expiresAt(data.expires_in);\n    }\n    const user = (_a = data.user) !== null && _a !== void 0 ? _a : data;\n    return { data: { session, user }, error: null };\n}\nexport function _userResponse(data) {\n    var _a;\n    const user = (_a = data.user) !== null && _a !== void 0 ? _a : data;\n    return { data: { user }, error: null };\n}\nexport function _ssoResponse(data) {\n    return { data, error: null };\n}\nexport function _generateLinkResponse(data) {\n    const { action_link, email_otp, hashed_token, redirect_to, verification_type } = data, rest = __rest(data, [\"action_link\", \"email_otp\", \"hashed_token\", \"redirect_to\", \"verification_type\"]);\n    const properties = {\n        action_link,\n        email_otp,\n        hashed_token,\n        redirect_to,\n        verification_type,\n    };\n    const user = Object.assign({}, rest);\n    return {\n        data: {\n            properties,\n            user,\n        },\n        error: null,\n    };\n}\n/**\n * hasSession checks if the response object contains a valid session\n * @param data A response object\n * @returns true if a session is in the response\n */\nfunction hasSession(data) {\n    return data.access_token && data.refresh_token && data.expires_in;\n}\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nexport function expiresAt(expiresIn) {\n    const timeNow = Math.round(Date.now() / 1000);\n    return timeNow + expiresIn;\n}\nexport function uuid() {\n    return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n        const r = (Math.random() * 16) | 0, v = c == 'x' ? r : (r & 0x3) | 0x8;\n        return v.toString(16);\n    });\n}\nexport const isBrowser = () => typeof window !== 'undefined';\nexport function getParameterByName(name, url) {\n    var _a;\n    if (!url)\n        url = ((_a = window === null || window === void 0 ? void 0 : window.location) === null || _a === void 0 ? void 0 : _a.href) || '';\n    // eslint-disable-next-line no-useless-escape\n    name = name.replace(/[\\[\\]]/g, '\\\\$&');\n    const regex = new RegExp('[?&#]' + name + '(=([^&#]*)|&|#|$)'), results = regex.exec(url);\n    if (!results)\n        return null;\n    if (!results[2])\n        return '';\n    return decodeURIComponent(results[2].replace(/\\+/g, ' '));\n}\nexport const resolveFetch = (customFetch) => {\n    let _fetch;\n    if (customFetch) {\n        _fetch = customFetch;\n    }\n    else if (typeof fetch === 'undefined') {\n        _fetch = (...args) => __awaiter(void 0, void 0, void 0, function* () { return yield (yield import('cross-fetch')).fetch(...args); });\n    }\n    else {\n        _fetch = fetch;\n    }\n    return (...args) => _fetch(...args);\n};\nexport const looksLikeFetchResponse = (maybeResponse) => {\n    return (typeof maybeResponse === 'object' &&\n        maybeResponse !== null &&\n        'status' in maybeResponse &&\n        'ok' in maybeResponse &&\n        'json' in maybeResponse &&\n        typeof maybeResponse.json === 'function');\n};\n// Storage helpers\nexport const setItemAsync = (storage, key, data) => __awaiter(void 0, void 0, void 0, function* () {\n    yield storage.setItem(key, JSON.stringify(data));\n});\nexport const getItemAsync = (storage, key) => __awaiter(void 0, void 0, void 0, function* () {\n    const value = yield storage.getItem(key);\n    if (!value) {\n        return null;\n    }\n    try {\n        return JSON.parse(value);\n    }\n    catch (_a) {\n        return value;\n    }\n});\nexport const removeItemAsync = (storage, key) => __awaiter(void 0, void 0, void 0, function* () {\n    yield storage.removeItem(key);\n});\nexport const decodeBase64URL = (value) => {\n    try {\n        // atob is present in all browsers and nodejs >= 16\n        // but if it is not it will throw a ReferenceError in which case we can try to use Buffer\n        // replace are here to convert the Base64-URL into Base64 which is what atob supports\n        // replace with //g regex acts like replaceAll\n        // Decoding base64 to UTF8 see https://stackoverflow.com/a/30106551/17622044\n        return decodeURIComponent(atob(value.replace(/[-]/g, '+').replace(/[_]/g, '/'))\n            .split('')\n            .map((c) => '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2))\n            .join(''));\n    }\n    catch (e) {\n        if (e instanceof ReferenceError) {\n            // running on nodejs < 16\n            // Buffer supports Base64-URL transparently\n            return Buffer.from(value, 'base64').toString('utf-8');\n        }\n        else {\n            throw e;\n        }\n    }\n};\n/**\n * A deferred represents some asynchronous work that is not yet finished, which\n * may or may not culminate in a value.\n * Taken from: https://github.com/mike-north/types/blob/master/src/async.ts\n */\nexport class Deferred {\n    constructor() {\n        // eslint-disable-next-line @typescript-eslint/no-extra-semi\n        ;\n        this.promise = new Deferred.promiseConstructor((res, rej) => {\n            // eslint-disable-next-line @typescript-eslint/no-extra-semi\n            ;\n            this.resolve = res;\n            this.reject = rej;\n        });\n    }\n}\nDeferred.promiseConstructor = Promise;\n// Taken from: https://stackoverflow.com/questions/38552003/how-to-decode-jwt-token-in-javascript-without-using-a-library\nexport function decodeJWTPayload(token) {\n    const parts = token.split('.');\n    if (parts.length !== 3) {\n        throw new Error('JWT is not valid: not a JWT structure');\n    }\n    const base64Url = parts[1];\n    return JSON.parse(decodeBase64URL(base64Url));\n}\n","import { isBrowser } from './helpers';\nconst localStorageAdapter = {\n    getItem: (key) => {\n        if (!isBrowser()) {\n            return null;\n        }\n        return globalThis.localStorage.getItem(key);\n    },\n    setItem: (key, value) => {\n        if (!isBrowser()) {\n            return;\n        }\n        globalThis.localStorage.setItem(key, value);\n    },\n    removeItem: (key) => {\n        if (!isBrowser()) {\n            return;\n        }\n        globalThis.localStorage.removeItem(key);\n    },\n};\nexport default localStorageAdapter;\n","/**\n * https://mathiasbynens.be/notes/globalthis\n */\nexport function polyfillGlobalThis() {\n    if (typeof globalThis === 'object')\n        return;\n    try {\n        Object.defineProperty(Object.prototype, '__magic__', {\n            get: function () {\n                return this;\n            },\n            configurable: true,\n        });\n        // @ts-expect-error 'Allow access to magic'\n        __magic__.globalThis = __magic__;\n        // @ts-expect-error 'Allow access to magic'\n        delete Object.prototype.__magic__;\n    }\n    catch (e) {\n        if (typeof self !== 'undefined') {\n            // @ts-expect-error 'Allow access to globals'\n            self.globalThis = self;\n        }\n    }\n}\n","export {};\n","// Generated by genversion.\nexport const version = '2.3.1';\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport crossFetch from 'cross-fetch';\nexport default class PostgrestBuilder {\n    constructor(builder) {\n        this.shouldThrowOnError = false;\n        this.method = builder.method;\n        this.url = builder.url;\n        this.headers = builder.headers;\n        this.schema = builder.schema;\n        this.body = builder.body;\n        this.shouldThrowOnError = builder.shouldThrowOnError;\n        this.signal = builder.signal;\n        this.allowEmpty = builder.allowEmpty;\n        if (builder.fetch) {\n            this.fetch = builder.fetch;\n        }\n        else if (typeof fetch === 'undefined') {\n            this.fetch = crossFetch;\n        }\n        else {\n            this.fetch = fetch;\n        }\n    }\n    /**\n     * If there's an error with the query, throwOnError will reject the promise by\n     * throwing the error instead of returning it as part of a successful response.\n     *\n     * {@link https://github.com/supabase/supabase-js/issues/92}\n     */\n    throwOnError() {\n        this.shouldThrowOnError = true;\n        return this;\n    }\n    then(onfulfilled, onrejected) {\n        // https://postgrest.org/en/stable/api.html#switching-schemas\n        if (this.schema === undefined) {\n            // skip\n        }\n        else if (['GET', 'HEAD'].includes(this.method)) {\n            this.headers['Accept-Profile'] = this.schema;\n        }\n        else {\n            this.headers['Content-Profile'] = this.schema;\n        }\n        if (this.method !== 'GET' && this.method !== 'HEAD') {\n            this.headers['Content-Type'] = 'application/json';\n        }\n        // NOTE: Invoke w/o `this` to avoid illegal invocation error.\n        // https://github.com/supabase/postgrest-js/pull/247\n        const _fetch = this.fetch;\n        let res = _fetch(this.url.toString(), {\n            method: this.method,\n            headers: this.headers,\n            body: JSON.stringify(this.body),\n            signal: this.signal,\n        }).then((res) => __awaiter(this, void 0, void 0, function* () {\n            var _a, _b, _c;\n            let error = null;\n            let data = null;\n            let count = null;\n            let status = res.status;\n            let statusText = res.statusText;\n            if (res.ok) {\n                if (this.method !== 'HEAD') {\n                    const body = yield res.text();\n                    if (body === '') {\n                        // Prefer: return=minimal\n                    }\n                    else if (this.headers['Accept'] === 'text/csv') {\n                        data = body;\n                    }\n                    else if (this.headers['Accept'] &&\n                        this.headers['Accept'].includes('application/vnd.pgrst.plan+text')) {\n                        data = body;\n                    }\n                    else {\n                        data = JSON.parse(body);\n                    }\n                }\n                const countHeader = (_a = this.headers['Prefer']) === null || _a === void 0 ? void 0 : _a.match(/count=(exact|planned|estimated)/);\n                const contentRange = (_b = res.headers.get('content-range')) === null || _b === void 0 ? void 0 : _b.split('/');\n                if (countHeader && contentRange && contentRange.length > 1) {\n                    count = parseInt(contentRange[1]);\n                }\n            }\n            else {\n                const body = yield res.text();\n                try {\n                    error = JSON.parse(body);\n                }\n                catch (_d) {\n                    error = {\n                        message: body,\n                    };\n                }\n                if (error && this.allowEmpty && ((_c = error === null || error === void 0 ? void 0 : error.details) === null || _c === void 0 ? void 0 : _c.includes('Results contain 0 rows'))) {\n                    error = null;\n                    status = 200;\n                    statusText = 'OK';\n                }\n                if (error && this.shouldThrowOnError) {\n                    throw error;\n                }\n            }\n            const postgrestResponse = {\n                error,\n                data,\n                count,\n                status,\n                statusText,\n            };\n            return postgrestResponse;\n        }));\n        if (!this.shouldThrowOnError) {\n            res = res.catch((fetchError) => ({\n                error: {\n                    message: `FetchError: ${fetchError.message}`,\n                    details: '',\n                    hint: '',\n                    code: fetchError.code || '',\n                },\n                data: null,\n                count: null,\n                status: 0,\n                statusText: '',\n            }));\n        }\n        return res.then(onfulfilled, onrejected);\n    }\n}\n","import PostgrestQueryBuilder from './PostgrestQueryBuilder';\nimport PostgrestFilterBuilder from './PostgrestFilterBuilder';\nimport { DEFAULT_HEADERS } from './constants';\n/**\n * PostgREST client.\n *\n * @typeParam Database - Types for the schema from the [type\n * generator](https://supabase.com/docs/reference/javascript/next/typescript-support)\n *\n * @typeParam SchemaName - Postgres schema to switch to. Must be a string\n * literal, the same one passed to the constructor. If the schema is not\n * `\"public\"`, this must be supplied manually.\n */\nexport default class PostgrestClient {\n    // TODO: Add back shouldThrowOnError once we figure out the typings\n    /**\n     * Creates a PostgREST client.\n     *\n     * @param url - URL of the PostgREST endpoint\n     * @param options - Named parameters\n     * @param options.headers - Custom headers\n     * @param options.schema - Postgres schema to switch to\n     * @param options.fetch - Custom fetch\n     */\n    constructor(url, { headers = {}, schema, fetch, } = {}) {\n        this.url = url;\n        this.headers = Object.assign(Object.assign({}, DEFAULT_HEADERS), headers);\n        this.schema = schema;\n        this.fetch = fetch;\n    }\n    from(relation) {\n        const url = new URL(`${this.url}/${relation}`);\n        return new PostgrestQueryBuilder(url, {\n            headers: Object.assign({}, this.headers),\n            schema: this.schema,\n            fetch: this.fetch,\n        });\n    }\n    /**\n     * Perform a function call.\n     *\n     * @param fn - The function name to call\n     * @param args - The arguments to pass to the function call\n     * @param options - Named parameters\n     * @param options.head - When set to `true`, `data` will not be returned.\n     * Useful if you only need the count.\n     * @param options.count - Count algorithm to use to count rows returned by the\n     * function. Only applicable for [set-returning\n     * functions](https://www.postgresql.org/docs/current/functions-srf.html).\n     *\n     * `\"exact\"`: Exact but slow count algorithm. Performs a `COUNT(*)` under the\n     * hood.\n     *\n     * `\"planned\"`: Approximated but fast count algorithm. Uses the Postgres\n     * statistics under the hood.\n     *\n     * `\"estimated\"`: Uses exact count for low numbers and planned count for high\n     * numbers.\n     */\n    rpc(fn, args = {}, { head = false, count, } = {}) {\n        let method;\n        const url = new URL(`${this.url}/rpc/${fn}`);\n        let body;\n        if (head) {\n            method = 'HEAD';\n            Object.entries(args).forEach(([name, value]) => {\n                url.searchParams.append(name, `${value}`);\n            });\n        }\n        else {\n            method = 'POST';\n            body = args;\n        }\n        const headers = Object.assign({}, this.headers);\n        if (count) {\n            headers['Prefer'] = `count=${count}`;\n        }\n        return new PostgrestFilterBuilder({\n            method,\n            url,\n            headers,\n            schema: this.schema,\n            body,\n            fetch: this.fetch,\n            allowEmpty: false,\n        });\n    }\n}\n","import PostgrestTransformBuilder from './PostgrestTransformBuilder';\nexport default class PostgrestFilterBuilder extends PostgrestTransformBuilder {\n    eq(column, value) {\n        this.url.searchParams.append(column, `eq.${value}`);\n        return this;\n    }\n    neq(column, value) {\n        this.url.searchParams.append(column, `neq.${value}`);\n        return this;\n    }\n    gt(column, value) {\n        this.url.searchParams.append(column, `gt.${value}`);\n        return this;\n    }\n    gte(column, value) {\n        this.url.searchParams.append(column, `gte.${value}`);\n        return this;\n    }\n    lt(column, value) {\n        this.url.searchParams.append(column, `lt.${value}`);\n        return this;\n    }\n    lte(column, value) {\n        this.url.searchParams.append(column, `lte.${value}`);\n        return this;\n    }\n    like(column, pattern) {\n        this.url.searchParams.append(column, `like.${pattern}`);\n        return this;\n    }\n    ilike(column, pattern) {\n        this.url.searchParams.append(column, `ilike.${pattern}`);\n        return this;\n    }\n    is(column, value) {\n        this.url.searchParams.append(column, `is.${value}`);\n        return this;\n    }\n    in(column, values) {\n        const cleanedValues = values\n            .map((s) => {\n            // handle postgrest reserved characters\n            // https://postgrest.org/en/v7.0.0/api.html#reserved-characters\n            if (typeof s === 'string' && new RegExp('[,()]').test(s))\n                return `\"${s}\"`;\n            else\n                return `${s}`;\n        })\n            .join(',');\n        this.url.searchParams.append(column, `in.(${cleanedValues})`);\n        return this;\n    }\n    contains(column, value) {\n        if (typeof value === 'string') {\n            // range types can be inclusive '[', ']' or exclusive '(', ')' so just\n            // keep it simple and accept a string\n            this.url.searchParams.append(column, `cs.${value}`);\n        }\n        else if (Array.isArray(value)) {\n            // array\n            this.url.searchParams.append(column, `cs.{${value.join(',')}}`);\n        }\n        else {\n            // json\n            this.url.searchParams.append(column, `cs.${JSON.stringify(value)}`);\n        }\n        return this;\n    }\n    containedBy(column, value) {\n        if (typeof value === 'string') {\n            // range\n            this.url.searchParams.append(column, `cd.${value}`);\n        }\n        else if (Array.isArray(value)) {\n            // array\n            this.url.searchParams.append(column, `cd.{${value.join(',')}}`);\n        }\n        else {\n            // json\n            this.url.searchParams.append(column, `cd.${JSON.stringify(value)}`);\n        }\n        return this;\n    }\n    rangeGt(column, range) {\n        this.url.searchParams.append(column, `sr.${range}`);\n        return this;\n    }\n    rangeGte(column, range) {\n        this.url.searchParams.append(column, `nxl.${range}`);\n        return this;\n    }\n    rangeLt(column, range) {\n        this.url.searchParams.append(column, `sl.${range}`);\n        return this;\n    }\n    rangeLte(column, range) {\n        this.url.searchParams.append(column, `nxr.${range}`);\n        return this;\n    }\n    rangeAdjacent(column, range) {\n        this.url.searchParams.append(column, `adj.${range}`);\n        return this;\n    }\n    overlaps(column, value) {\n        if (typeof value === 'string') {\n            // range\n            this.url.searchParams.append(column, `ov.${value}`);\n        }\n        else {\n            // array\n            this.url.searchParams.append(column, `ov.{${value.join(',')}}`);\n        }\n        return this;\n    }\n    textSearch(column, query, { config, type } = {}) {\n        let typePart = '';\n        if (type === 'plain') {\n            typePart = 'pl';\n        }\n        else if (type === 'phrase') {\n            typePart = 'ph';\n        }\n        else if (type === 'websearch') {\n            typePart = 'w';\n        }\n        const configPart = config === undefined ? '' : `(${config})`;\n        this.url.searchParams.append(column, `${typePart}fts${configPart}.${query}`);\n        return this;\n    }\n    match(query) {\n        Object.entries(query).forEach(([column, value]) => {\n            this.url.searchParams.append(column, `eq.${value}`);\n        });\n        return this;\n    }\n    not(column, operator, value) {\n        this.url.searchParams.append(column, `not.${operator}.${value}`);\n        return this;\n    }\n    /**\n     * Match only rows which satisfy at least one of the filters.\n     *\n     * Unlike most filters, `filters` is used as-is and needs to follow [PostgREST\n     * syntax](https://postgrest.org/en/stable/api.html#operators). You also need\n     * to make sure it's properly sanitized.\n     *\n     * It's currently not possible to do an `.or()` filter across multiple tables.\n     *\n     * @param filters - The filters to use, following PostgREST syntax\n     * @param foreignTable - Set this to filter on foreign tables instead of the\n     * current table\n     */\n    or(filters, { foreignTable } = {}) {\n        const key = foreignTable ? `${foreignTable}.or` : 'or';\n        this.url.searchParams.append(key, `(${filters})`);\n        return this;\n    }\n    filter(column, operator, value) {\n        this.url.searchParams.append(column, `${operator}.${value}`);\n        return this;\n    }\n}\n","import PostgrestFilterBuilder from './PostgrestFilterBuilder';\nexport default class PostgrestQueryBuilder {\n    constructor(url, { headers = {}, schema, fetch, }) {\n        this.url = url;\n        this.headers = headers;\n        this.schema = schema;\n        this.fetch = fetch;\n    }\n    /**\n     * Perform a SELECT query on the table or view.\n     *\n     * @param columns - The columns to retrieve, separated by commas\n     *\n     * @param options - Named parameters\n     *\n     * @param options.head - When set to `true`, `data` will not be returned.\n     * Useful if you only need the count.\n     *\n     * @param options.count - Count algorithm to use to count rows in the table or view.\n     *\n     * `\"exact\"`: Exact but slow count algorithm. Performs a `COUNT(*)` under the\n     * hood.\n     *\n     * `\"planned\"`: Approximated but fast count algorithm. Uses the Postgres\n     * statistics under the hood.\n     *\n     * `\"estimated\"`: Uses exact count for low numbers and planned count for high\n     * numbers.\n     */\n    select(columns, { head = false, count, } = {}) {\n        const method = head ? 'HEAD' : 'GET';\n        // Remove whitespaces except when quoted\n        let quoted = false;\n        const cleanedColumns = (columns !== null && columns !== void 0 ? columns : '*')\n            .split('')\n            .map((c) => {\n            if (/\\s/.test(c) && !quoted) {\n                return '';\n            }\n            if (c === '\"') {\n                quoted = !quoted;\n            }\n            return c;\n        })\n            .join('');\n        this.url.searchParams.set('select', cleanedColumns);\n        if (count) {\n            this.headers['Prefer'] = `count=${count}`;\n        }\n        return new PostgrestFilterBuilder({\n            method,\n            url: this.url,\n            headers: this.headers,\n            schema: this.schema,\n            fetch: this.fetch,\n            allowEmpty: false,\n        });\n    }\n    /**\n     * Perform an INSERT into the table or view.\n     *\n     * By default, inserted rows are not returned. To return it, chain the call\n     * with `.select()`.\n     *\n     * @param values - The values to insert. Pass an object to insert a single row\n     * or an array to insert multiple rows.\n     *\n     * @param options - Named parameters\n     *\n     * @param options.count - Count algorithm to use to count inserted rows.\n     *\n     * `\"exact\"`: Exact but slow count algorithm. Performs a `COUNT(*)` under the\n     * hood.\n     *\n     * `\"planned\"`: Approximated but fast count algorithm. Uses the Postgres\n     * statistics under the hood.\n     *\n     * `\"estimated\"`: Uses exact count for low numbers and planned count for high\n     * numbers.\n     */\n    insert(values, { count, } = {}) {\n        const method = 'POST';\n        const prefersHeaders = [];\n        const body = values;\n        if (count) {\n            prefersHeaders.push(`count=${count}`);\n        }\n        if (this.headers['Prefer']) {\n            prefersHeaders.unshift(this.headers['Prefer']);\n        }\n        this.headers['Prefer'] = prefersHeaders.join(',');\n        if (Array.isArray(values)) {\n            const columns = values.reduce((acc, x) => acc.concat(Object.keys(x)), []);\n            if (columns.length > 0) {\n                const uniqueColumns = [...new Set(columns)].map((column) => `\"${column}\"`);\n                this.url.searchParams.set('columns', uniqueColumns.join(','));\n            }\n        }\n        return new PostgrestFilterBuilder({\n            method,\n            url: this.url,\n            headers: this.headers,\n            schema: this.schema,\n            body,\n            fetch: this.fetch,\n            allowEmpty: false,\n        });\n    }\n    /**\n     * Perform an UPSERT on the table or view. Depending on the column(s) passed\n     * to `onConflict`, `.upsert()` allows you to perform the equivalent of\n     * `.insert()` if a row with the corresponding `onConflict` columns doesn't\n     * exist, or if it does exist, perform an alternative action depending on\n     * `ignoreDuplicates`.\n     *\n     * By default, upserted rows are not returned. To return it, chain the call\n     * with `.select()`.\n     *\n     * @param values - The values to upsert with. Pass an object to upsert a\n     * single row or an array to upsert multiple rows.\n     *\n     * @param options - Named parameters\n     *\n     * @param options.onConflict - Comma-separated UNIQUE column(s) to specify how\n     * duplicate rows are determined. Two rows are duplicates if all the\n     * `onConflict` columns are equal.\n     *\n     * @param options.ignoreDuplicates - If `true`, duplicate rows are ignored. If\n     * `false`, duplicate rows are merged with existing rows.\n     *\n     * @param options.count - Count algorithm to use to count upserted rows.\n     *\n     * `\"exact\"`: Exact but slow count algorithm. Performs a `COUNT(*)` under the\n     * hood.\n     *\n     * `\"planned\"`: Approximated but fast count algorithm. Uses the Postgres\n     * statistics under the hood.\n     *\n     * `\"estimated\"`: Uses exact count for low numbers and planned count for high\n     * numbers.\n     */\n    upsert(values, { onConflict, ignoreDuplicates = false, count, } = {}) {\n        const method = 'POST';\n        const prefersHeaders = [`resolution=${ignoreDuplicates ? 'ignore' : 'merge'}-duplicates`];\n        if (onConflict !== undefined)\n            this.url.searchParams.set('on_conflict', onConflict);\n        const body = values;\n        if (count) {\n            prefersHeaders.push(`count=${count}`);\n        }\n        if (this.headers['Prefer']) {\n            prefersHeaders.unshift(this.headers['Prefer']);\n        }\n        this.headers['Prefer'] = prefersHeaders.join(',');\n        return new PostgrestFilterBuilder({\n            method,\n            url: this.url,\n            headers: this.headers,\n            schema: this.schema,\n            body,\n            fetch: this.fetch,\n            allowEmpty: false,\n        });\n    }\n    /**\n     * Perform an UPDATE on the table or view.\n     *\n     * By default, updated rows are not returned. To return it, chain the call\n     * with `.select()` after filters.\n     *\n     * @param values - The values to update with\n     *\n     * @param options - Named parameters\n     *\n     * @param options.count - Count algorithm to use to count updated rows.\n     *\n     * `\"exact\"`: Exact but slow count algorithm. Performs a `COUNT(*)` under the\n     * hood.\n     *\n     * `\"planned\"`: Approximated but fast count algorithm. Uses the Postgres\n     * statistics under the hood.\n     *\n     * `\"estimated\"`: Uses exact count for low numbers and planned count for high\n     * numbers.\n     */\n    update(values, { count, } = {}) {\n        const method = 'PATCH';\n        const prefersHeaders = [];\n        const body = values;\n        if (count) {\n            prefersHeaders.push(`count=${count}`);\n        }\n        if (this.headers['Prefer']) {\n            prefersHeaders.unshift(this.headers['Prefer']);\n        }\n        this.headers['Prefer'] = prefersHeaders.join(',');\n        return new PostgrestFilterBuilder({\n            method,\n            url: this.url,\n            headers: this.headers,\n            schema: this.schema,\n            body,\n            fetch: this.fetch,\n            allowEmpty: false,\n        });\n    }\n    /**\n     * Perform a DELETE on the table or view.\n     *\n     * By default, deleted rows are not returned. To return it, chain the call\n     * with `.select()` after filters.\n     *\n     * @param options - Named parameters\n     *\n     * @param options.count - Count algorithm to use to count deleted rows.\n     *\n     * `\"exact\"`: Exact but slow count algorithm. Performs a `COUNT(*)` under the\n     * hood.\n     *\n     * `\"planned\"`: Approximated but fast count algorithm. Uses the Postgres\n     * statistics under the hood.\n     *\n     * `\"estimated\"`: Uses exact count for low numbers and planned count for high\n     * numbers.\n     */\n    delete({ count, } = {}) {\n        const method = 'DELETE';\n        const prefersHeaders = [];\n        if (count) {\n            prefersHeaders.push(`count=${count}`);\n        }\n        if (this.headers['Prefer']) {\n            prefersHeaders.unshift(this.headers['Prefer']);\n        }\n        this.headers['Prefer'] = prefersHeaders.join(',');\n        return new PostgrestFilterBuilder({\n            method,\n            url: this.url,\n            headers: this.headers,\n            schema: this.schema,\n            fetch: this.fetch,\n            allowEmpty: false,\n        });\n    }\n}\n","import PostgrestBuilder from './PostgrestBuilder';\nexport default class PostgrestTransformBuilder extends PostgrestBuilder {\n    /**\n     * Perform a SELECT on the query result.\n     *\n     * By default, `.insert()`, `.update()`, `.upsert()`, and `.delete()` do not\n     * return modified rows. By calling this method, modified rows are returned in\n     * `data`.\n     *\n     * @param columns - The columns to retrieve, separated by commas\n     */\n    select(columns) {\n        // Remove whitespaces except when quoted\n        let quoted = false;\n        const cleanedColumns = (columns !== null && columns !== void 0 ? columns : '*')\n            .split('')\n            .map((c) => {\n            if (/\\s/.test(c) && !quoted) {\n                return '';\n            }\n            if (c === '\"') {\n                quoted = !quoted;\n            }\n            return c;\n        })\n            .join('');\n        this.url.searchParams.set('select', cleanedColumns);\n        if (this.headers['Prefer']) {\n            this.headers['Prefer'] += ',';\n        }\n        this.headers['Prefer'] += 'return=representation';\n        return this;\n    }\n    order(column, { ascending = true, nullsFirst, foreignTable, } = {}) {\n        const key = foreignTable ? `${foreignTable}.order` : 'order';\n        const existingOrder = this.url.searchParams.get(key);\n        this.url.searchParams.set(key, `${existingOrder ? `${existingOrder},` : ''}${column}.${ascending ? 'asc' : 'desc'}${nullsFirst === undefined ? '' : nullsFirst ? '.nullsfirst' : '.nullslast'}`);\n        return this;\n    }\n    /**\n     * Limit the query result by `count`.\n     *\n     * @param count - The maximum number of rows to return\n     * @param options - Named parameters\n     * @param options.foreignTable - Set this to limit rows of foreign tables\n     * instead of the current table\n     */\n    limit(count, { foreignTable } = {}) {\n        const key = typeof foreignTable === 'undefined' ? 'limit' : `${foreignTable}.limit`;\n        this.url.searchParams.set(key, `${count}`);\n        return this;\n    }\n    /**\n     * Limit the query result by `from` and `to` inclusively.\n     *\n     * @param from - The starting index from which to limit the result\n     * @param to - The last index to which to limit the result\n     * @param options - Named parameters\n     * @param options.foreignTable - Set this to limit rows of foreign tables\n     * instead of the current table\n     */\n    range(from, to, { foreignTable } = {}) {\n        const keyOffset = typeof foreignTable === 'undefined' ? 'offset' : `${foreignTable}.offset`;\n        const keyLimit = typeof foreignTable === 'undefined' ? 'limit' : `${foreignTable}.limit`;\n        this.url.searchParams.set(keyOffset, `${from}`);\n        // Range is inclusive, so add 1\n        this.url.searchParams.set(keyLimit, `${to - from + 1}`);\n        return this;\n    }\n    /**\n     * Set the AbortSignal for the fetch request.\n     *\n     * @param signal - The AbortSignal to use for the fetch request\n     */\n    abortSignal(signal) {\n        this.signal = signal;\n        return this;\n    }\n    /**\n     * Return `data` as a single object instead of an array of objects.\n     *\n     * Query result must be one row (e.g. using `.limit(1)`), otherwise this\n     * returns an error.\n     */\n    single() {\n        this.headers['Accept'] = 'application/vnd.pgrst.object+json';\n        return this;\n    }\n    /**\n     * Return `data` as a single object instead of an array of objects.\n     *\n     * Query result must be zero or one row (e.g. using `.limit(1)`), otherwise\n     * this returns an error.\n     */\n    maybeSingle() {\n        this.headers['Accept'] = 'application/vnd.pgrst.object+json';\n        this.allowEmpty = true;\n        return this;\n    }\n    /**\n     * Return `data` as a string in CSV format.\n     */\n    csv() {\n        this.headers['Accept'] = 'text/csv';\n        return this;\n    }\n    /**\n     * Return `data` as an object in [GeoJSON](https://geojson.org) format.\n     */\n    geojson() {\n        this.headers['Accept'] = 'application/geo+json';\n        return this;\n    }\n    /**\n     * Return `data` as the EXPLAIN plan for the query.\n     *\n     * @param options - Named parameters\n     *\n     * @param options.analyze - If `true`, the query will be executed and the\n     * actual run time will be returned\n     *\n     * @param options.verbose - If `true`, the query identifier will be returned\n     * and `data` will include the output columns of the query\n     *\n     * @param options.settings - If `true`, include information on configuration\n     * parameters that affect query planning\n     *\n     * @param options.buffers - If `true`, include information on buffer usage\n     *\n     * @param options.wal - If `true`, include information on WAL record generation\n     *\n     * @param options.format - The format of the output, can be `\"text\"` (default)\n     * or `\"json\"`\n     */\n    explain({ analyze = false, verbose = false, settings = false, buffers = false, wal = false, format = 'text', } = {}) {\n        const options = [\n            analyze ? 'analyze' : null,\n            verbose ? 'verbose' : null,\n            settings ? 'settings' : null,\n            buffers ? 'buffers' : null,\n            wal ? 'wal' : null,\n        ]\n            .filter(Boolean)\n            .join('|');\n        // An Accept header can carry multiple media types but postgrest-js always sends one\n        const forMediatype = this.headers['Accept'];\n        this.headers['Accept'] = `application/vnd.pgrst.plan+${format}; for=\"${forMediatype}\"; options=${options};`;\n        if (format === 'json')\n            return this;\n        else\n            return this;\n    }\n    /**\n     * Rollback the query.\n     *\n     * `data` will still be returned, but the query is not committed.\n     */\n    rollback() {\n        var _a;\n        if (((_a = this.headers['Prefer']) !== null && _a !== void 0 ? _a : '').trim().length > 0) {\n            this.headers['Prefer'] += ',tx=rollback';\n        }\n        else {\n            this.headers['Prefer'] = 'tx=rollback';\n        }\n        return this;\n    }\n    /**\n     * Override the type of the returned `data`.\n     *\n     * @typeParam NewResult - The new result type to override with\n     */\n    returns() {\n        return this;\n    }\n}\n","import { version } from './version';\nexport const DEFAULT_HEADERS = { 'X-Client-Info': `postgrest-js/${version}` };\n","export { default as PostgrestClient } from './PostgrestClient';\nexport { default as PostgrestQueryBuilder } from './PostgrestQueryBuilder';\nexport { default as PostgrestFilterBuilder } from './PostgrestFilterBuilder';\nexport { default as PostgrestTransformBuilder } from './PostgrestTransformBuilder';\nexport { default as PostgrestBuilder } from './PostgrestBuilder';\n","export const version = '1.1.0';\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { CHANNEL_EVENTS, CHANNEL_STATES } from './lib/constants';\nimport Push from './lib/push';\nimport Timer from './lib/timer';\nimport RealtimePresence from './RealtimePresence';\nimport * as Transformers from './lib/transformers';\nexport var REALTIME_POSTGRES_CHANGES_LISTEN_EVENT;\n(function (REALTIME_POSTGRES_CHANGES_LISTEN_EVENT) {\n    REALTIME_POSTGRES_CHANGES_LISTEN_EVENT[\"ALL\"] = \"*\";\n    REALTIME_POSTGRES_CHANGES_LISTEN_EVENT[\"INSERT\"] = \"INSERT\";\n    REALTIME_POSTGRES_CHANGES_LISTEN_EVENT[\"UPDATE\"] = \"UPDATE\";\n    REALTIME_POSTGRES_CHANGES_LISTEN_EVENT[\"DELETE\"] = \"DELETE\";\n})(REALTIME_POSTGRES_CHANGES_LISTEN_EVENT || (REALTIME_POSTGRES_CHANGES_LISTEN_EVENT = {}));\nexport var REALTIME_LISTEN_TYPES;\n(function (REALTIME_LISTEN_TYPES) {\n    REALTIME_LISTEN_TYPES[\"BROADCAST\"] = \"broadcast\";\n    REALTIME_LISTEN_TYPES[\"PRESENCE\"] = \"presence\";\n    REALTIME_LISTEN_TYPES[\"POSTGRES_CHANGES\"] = \"postgres_changes\";\n})(REALTIME_LISTEN_TYPES || (REALTIME_LISTEN_TYPES = {}));\nexport var REALTIME_SUBSCRIBE_STATES;\n(function (REALTIME_SUBSCRIBE_STATES) {\n    REALTIME_SUBSCRIBE_STATES[\"SUBSCRIBED\"] = \"SUBSCRIBED\";\n    REALTIME_SUBSCRIBE_STATES[\"TIMED_OUT\"] = \"TIMED_OUT\";\n    REALTIME_SUBSCRIBE_STATES[\"CLOSED\"] = \"CLOSED\";\n    REALTIME_SUBSCRIBE_STATES[\"CHANNEL_ERROR\"] = \"CHANNEL_ERROR\";\n})(REALTIME_SUBSCRIBE_STATES || (REALTIME_SUBSCRIBE_STATES = {}));\n/** A channel is the basic building block of Realtime\n * and narrows the scope of data flow to subscribed clients.\n * You can think of a channel as a chatroom where participants are able to see who's online\n * and send and receive messages.\n **/\nexport default class RealtimeChannel {\n    constructor(\n    /** Topic name can be any string. */\n    topic, params = { config: {} }, socket) {\n        this.topic = topic;\n        this.params = params;\n        this.socket = socket;\n        this.bindings = {};\n        this.state = CHANNEL_STATES.closed;\n        this.joinedOnce = false;\n        this.pushBuffer = [];\n        this.params.config = Object.assign({\n            broadcast: { ack: false, self: false },\n            presence: { key: '' },\n        }, params.config);\n        this.timeout = this.socket.timeout;\n        this.joinPush = new Push(this, CHANNEL_EVENTS.join, this.params, this.timeout);\n        this.rejoinTimer = new Timer(() => this._rejoinUntilConnected(), this.socket.reconnectAfterMs);\n        this.joinPush.receive('ok', () => {\n            this.state = CHANNEL_STATES.joined;\n            this.rejoinTimer.reset();\n            this.pushBuffer.forEach((pushEvent) => pushEvent.send());\n            this.pushBuffer = [];\n        });\n        this._onClose(() => {\n            this.rejoinTimer.reset();\n            this.socket.log('channel', `close ${this.topic} ${this._joinRef()}`);\n            this.state = CHANNEL_STATES.closed;\n            this.socket._remove(this);\n        });\n        this._onError((reason) => {\n            if (this._isLeaving() || this._isClosed()) {\n                return;\n            }\n            this.socket.log('channel', `error ${this.topic}`, reason);\n            this.state = CHANNEL_STATES.errored;\n            this.rejoinTimer.scheduleTimeout();\n        });\n        this.joinPush.receive('timeout', () => {\n            if (!this._isJoining()) {\n                return;\n            }\n            this.socket.log('channel', `timeout ${this.topic}`, this.joinPush.timeout);\n            this.state = CHANNEL_STATES.errored;\n            this.rejoinTimer.scheduleTimeout();\n        });\n        this._on(CHANNEL_EVENTS.reply, {}, (payload, ref) => {\n            this._trigger(this._replyEventName(ref), payload);\n        });\n        this.presence = new RealtimePresence(this);\n    }\n    /** Subscribe registers your client with the server */\n    subscribe(callback, timeout = this.timeout) {\n        var _a, _b;\n        if (this.joinedOnce) {\n            throw `tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance`;\n        }\n        else {\n            const { config: { broadcast, presence }, } = this.params;\n            this._onError((e) => callback && callback('CHANNEL_ERROR', e));\n            this._onClose(() => callback && callback('CLOSED'));\n            const accessTokenPayload = {};\n            const config = {\n                broadcast,\n                presence,\n                postgres_changes: (_b = (_a = this.bindings.postgres_changes) === null || _a === void 0 ? void 0 : _a.map((r) => r.filter)) !== null && _b !== void 0 ? _b : [],\n            };\n            if (this.socket.accessToken) {\n                accessTokenPayload.access_token = this.socket.accessToken;\n            }\n            this.updateJoinPayload(Object.assign({ config }, accessTokenPayload));\n            this.joinedOnce = true;\n            this._rejoin(timeout);\n            this.joinPush\n                .receive('ok', ({ postgres_changes: serverPostgresFilters, }) => {\n                var _a;\n                this.socket.accessToken &&\n                    this.socket.setAuth(this.socket.accessToken);\n                if (serverPostgresFilters === undefined) {\n                    callback && callback('SUBSCRIBED');\n                    return;\n                }\n                else {\n                    const clientPostgresBindings = this.bindings.postgres_changes;\n                    const bindingsLen = (_a = clientPostgresBindings === null || clientPostgresBindings === void 0 ? void 0 : clientPostgresBindings.length) !== null && _a !== void 0 ? _a : 0;\n                    const newPostgresBindings = [];\n                    for (let i = 0; i < bindingsLen; i++) {\n                        const clientPostgresBinding = clientPostgresBindings[i];\n                        const { filter: { event, schema, table, filter }, } = clientPostgresBinding;\n                        const serverPostgresFilter = serverPostgresFilters && serverPostgresFilters[i];\n                        if (serverPostgresFilter &&\n                            serverPostgresFilter.event === event &&\n                            serverPostgresFilter.schema === schema &&\n                            serverPostgresFilter.table === table &&\n                            serverPostgresFilter.filter === filter) {\n                            newPostgresBindings.push(Object.assign(Object.assign({}, clientPostgresBinding), { id: serverPostgresFilter.id }));\n                        }\n                        else {\n                            this.unsubscribe();\n                            callback &&\n                                callback('CHANNEL_ERROR', new Error('mismatch between server and client bindings for postgres changes'));\n                            return;\n                        }\n                    }\n                    this.bindings.postgres_changes = newPostgresBindings;\n                    callback && callback('SUBSCRIBED');\n                    return;\n                }\n            })\n                .receive('error', (error) => {\n                callback &&\n                    callback('CHANNEL_ERROR', new Error(JSON.stringify(Object.values(error).join(', ') || 'error')));\n                return;\n            })\n                .receive('timeout', () => {\n                callback && callback('TIMED_OUT');\n                return;\n            });\n        }\n        return this;\n    }\n    presenceState() {\n        return this.presence.state;\n    }\n    track(payload, opts = {}) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return yield this.send({\n                type: 'presence',\n                event: 'track',\n                payload,\n            }, opts.timeout || this.timeout);\n        });\n    }\n    untrack(opts = {}) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return yield this.send({\n                type: 'presence',\n                event: 'untrack',\n            }, opts);\n        });\n    }\n    on(type, filter, callback) {\n        return this._on(type, filter, callback);\n    }\n    send(payload, opts = {}) {\n        return new Promise((resolve) => {\n            var _a, _b, _c;\n            const push = this._push(payload.type, payload, opts.timeout || this.timeout);\n            if (push.rateLimited) {\n                resolve('rate limited');\n            }\n            if (payload.type === 'broadcast' &&\n                !((_c = (_b = (_a = this.params) === null || _a === void 0 ? void 0 : _a.config) === null || _b === void 0 ? void 0 : _b.broadcast) === null || _c === void 0 ? void 0 : _c.ack)) {\n                resolve('ok');\n            }\n            push.receive('ok', () => resolve('ok'));\n            push.receive('timeout', () => resolve('timed out'));\n        });\n    }\n    updateJoinPayload(payload) {\n        this.joinPush.updatePayload(payload);\n    }\n    /**\n     * Leaves the channel.\n     *\n     * Unsubscribes from server events, and instructs channel to terminate on server.\n     * Triggers onClose() hooks.\n     *\n     * To receive leave acknowledgements, use the a `receive` hook to bind to the server ack, ie:\n     * channel.unsubscribe().receive(\"ok\", () => alert(\"left!\") )\n     */\n    unsubscribe(timeout = this.timeout) {\n        this.state = CHANNEL_STATES.leaving;\n        const onClose = () => {\n            this.socket.log('channel', `leave ${this.topic}`);\n            this._trigger(CHANNEL_EVENTS.close, 'leave', this._joinRef());\n        };\n        this.rejoinTimer.reset();\n        // Destroy joinPush to avoid connection timeouts during unscription phase\n        this.joinPush.destroy();\n        return new Promise((resolve) => {\n            const leavePush = new Push(this, CHANNEL_EVENTS.leave, {}, timeout);\n            leavePush\n                .receive('ok', () => {\n                onClose();\n                resolve('ok');\n            })\n                .receive('timeout', () => {\n                onClose();\n                resolve('timed out');\n            })\n                .receive('error', () => {\n                resolve('error');\n            });\n            leavePush.send();\n            if (!this._canPush()) {\n                leavePush.trigger('ok', {});\n            }\n        });\n    }\n    /** @internal */\n    _push(event, payload, timeout = this.timeout) {\n        if (!this.joinedOnce) {\n            throw `tried to push '${event}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;\n        }\n        let pushEvent = new Push(this, event, payload, timeout);\n        if (this._canPush()) {\n            pushEvent.send();\n        }\n        else {\n            pushEvent.startTimeout();\n            this.pushBuffer.push(pushEvent);\n        }\n        return pushEvent;\n    }\n    /**\n     * Overridable message hook\n     *\n     * Receives all events for specialized message handling before dispatching to the channel callbacks.\n     * Must return the payload, modified or unmodified.\n     *\n     * @internal\n     */\n    _onMessage(_event, payload, _ref) {\n        return payload;\n    }\n    /** @internal */\n    _isMember(topic) {\n        return this.topic === topic;\n    }\n    /** @internal */\n    _joinRef() {\n        return this.joinPush.ref;\n    }\n    /** @internal */\n    _trigger(type, payload, ref) {\n        var _a, _b;\n        const typeLower = type.toLocaleLowerCase();\n        const { close, error, leave, join } = CHANNEL_EVENTS;\n        const events = [close, error, leave, join];\n        if (ref && events.indexOf(typeLower) >= 0 && ref !== this._joinRef()) {\n            return;\n        }\n        let handledPayload = this._onMessage(typeLower, payload, ref);\n        if (payload && !handledPayload) {\n            throw 'channel onMessage callbacks must return the payload, modified or unmodified';\n        }\n        if (['insert', 'update', 'delete'].includes(typeLower)) {\n            (_a = this.bindings.postgres_changes) === null || _a === void 0 ? void 0 : _a.filter((bind) => {\n                var _a, _b, _c;\n                return (((_a = bind.filter) === null || _a === void 0 ? void 0 : _a.event) === '*' ||\n                    ((_c = (_b = bind.filter) === null || _b === void 0 ? void 0 : _b.event) === null || _c === void 0 ? void 0 : _c.toLocaleLowerCase()) === typeLower);\n            }).map((bind) => bind.callback(handledPayload, ref));\n        }\n        else {\n            (_b = this.bindings[typeLower]) === null || _b === void 0 ? void 0 : _b.filter((bind) => {\n                var _a, _b, _c, _d, _e, _f;\n                if (['broadcast', 'presence', 'postgres_changes'].includes(typeLower)) {\n                    if ('id' in bind) {\n                        const bindId = bind.id;\n                        const bindEvent = (_a = bind.filter) === null || _a === void 0 ? void 0 : _a.event;\n                        return (bindId &&\n                            ((_b = payload.ids) === null || _b === void 0 ? void 0 : _b.includes(bindId)) &&\n                            (bindEvent === '*' ||\n                                (bindEvent === null || bindEvent === void 0 ? void 0 : bindEvent.toLocaleLowerCase()) ===\n                                    ((_c = payload.data) === null || _c === void 0 ? void 0 : _c.type.toLocaleLowerCase())));\n                    }\n                    else {\n                        const bindEvent = (_e = (_d = bind === null || bind === void 0 ? void 0 : bind.filter) === null || _d === void 0 ? void 0 : _d.event) === null || _e === void 0 ? void 0 : _e.toLocaleLowerCase();\n                        return (bindEvent === '*' ||\n                            bindEvent === ((_f = payload === null || payload === void 0 ? void 0 : payload.event) === null || _f === void 0 ? void 0 : _f.toLocaleLowerCase()));\n                    }\n                }\n                else {\n                    return bind.type.toLocaleLowerCase() === typeLower;\n                }\n            }).map((bind) => {\n                if (typeof handledPayload === 'object' && 'ids' in handledPayload) {\n                    const postgresChanges = handledPayload.data;\n                    const { schema, table, commit_timestamp, type, errors } = postgresChanges;\n                    const enrichedPayload = {\n                        schema: schema,\n                        table: table,\n                        commit_timestamp: commit_timestamp,\n                        eventType: type,\n                        new: {},\n                        old: {},\n                        errors: errors,\n                    };\n                    handledPayload = Object.assign(Object.assign({}, enrichedPayload), this._getPayloadRecords(postgresChanges));\n                }\n                bind.callback(handledPayload, ref);\n            });\n        }\n    }\n    /** @internal */\n    _isClosed() {\n        return this.state === CHANNEL_STATES.closed;\n    }\n    /** @internal */\n    _isJoined() {\n        return this.state === CHANNEL_STATES.joined;\n    }\n    /** @internal */\n    _isJoining() {\n        return this.state === CHANNEL_STATES.joining;\n    }\n    /** @internal */\n    _isLeaving() {\n        return this.state === CHANNEL_STATES.leaving;\n    }\n    /** @internal */\n    _replyEventName(ref) {\n        return `chan_reply_${ref}`;\n    }\n    /** @internal */\n    _on(type, filter, callback) {\n        const typeLower = type.toLocaleLowerCase();\n        const binding = {\n            type: typeLower,\n            filter: filter,\n            callback: callback,\n        };\n        if (this.bindings[typeLower]) {\n            this.bindings[typeLower].push(binding);\n        }\n        else {\n            this.bindings[typeLower] = [binding];\n        }\n        return this;\n    }\n    /** @internal */\n    _off(type, filter) {\n        const typeLower = type.toLocaleLowerCase();\n        this.bindings[typeLower] = this.bindings[typeLower].filter((bind) => {\n            var _a;\n            return !(((_a = bind.type) === null || _a === void 0 ? void 0 : _a.toLocaleLowerCase()) === typeLower &&\n                RealtimeChannel.isEqual(bind.filter, filter));\n        });\n        return this;\n    }\n    /** @internal */\n    static isEqual(obj1, obj2) {\n        if (Object.keys(obj1).length !== Object.keys(obj2).length) {\n            return false;\n        }\n        for (const k in obj1) {\n            if (obj1[k] !== obj2[k]) {\n                return false;\n            }\n        }\n        return true;\n    }\n    /** @internal */\n    _rejoinUntilConnected() {\n        this.rejoinTimer.scheduleTimeout();\n        if (this.socket.isConnected()) {\n            this._rejoin();\n        }\n    }\n    /**\n     * Registers a callback that will be executed when the channel closes.\n     *\n     * @internal\n     */\n    _onClose(callback) {\n        this._on(CHANNEL_EVENTS.close, {}, callback);\n    }\n    /**\n     * Registers a callback that will be executed when the channel encounteres an error.\n     *\n     * @internal\n     */\n    _onError(callback) {\n        this._on(CHANNEL_EVENTS.error, {}, (reason) => callback(reason));\n    }\n    /**\n     * Returns `true` if the socket is connected and the channel has been joined.\n     *\n     * @internal\n     */\n    _canPush() {\n        return this.socket.isConnected() && this._isJoined();\n    }\n    /** @internal */\n    _rejoin(timeout = this.timeout) {\n        if (this._isLeaving()) {\n            return;\n        }\n        this.socket._leaveOpenTopic(this.topic);\n        this.state = CHANNEL_STATES.joining;\n        this.joinPush.resend(timeout);\n    }\n    /** @internal */\n    _getPayloadRecords(payload) {\n        const records = {\n            new: {},\n            old: {},\n        };\n        if (payload.type === 'INSERT' || payload.type === 'UPDATE') {\n            records.new = Transformers.convertChangeData(payload.columns, payload.record);\n        }\n        if (payload.type === 'UPDATE' || payload.type === 'DELETE') {\n            records.old = Transformers.convertChangeData(payload.columns, payload.old_record);\n        }\n        return records;\n    }\n}\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { w3cwebsocket } from 'websocket';\nimport { VSN, CHANNEL_EVENTS, TRANSPORTS, SOCKET_STATES, DEFAULT_TIMEOUT, WS_CLOSE_NORMAL, DEFAULT_HEADERS, CONNECTION_STATE, } from './lib/constants';\nimport Timer from './lib/timer';\nimport Serializer from './lib/serializer';\nimport RealtimeChannel from './RealtimeChannel';\nconst noop = () => { };\nexport default class RealtimeClient {\n    /**\n     * Initializes the Socket.\n     *\n     * @param endPoint The string WebSocket endpoint, ie, \"ws://example.com/socket\", \"wss://example.com\", \"/socket\" (inherited host & protocol)\n     * @param options.transport The Websocket Transport, for example WebSocket.\n     * @param options.timeout The default timeout in milliseconds to trigger push timeouts.\n     * @param options.params The optional params to pass when connecting.\n     * @param options.headers The optional headers to pass when connecting.\n     * @param options.heartbeatIntervalMs The millisec interval to send a heartbeat message.\n     * @param options.logger The optional function for specialized logging, ie: logger: (kind, msg, data) => { console.log(`${kind}: ${msg}`, data) }\n     * @param options.encode The function to encode outgoing messages. Defaults to JSON: (payload, callback) => callback(JSON.stringify(payload))\n     * @param options.decode The function to decode incoming messages. Defaults to Serializer's decode.\n     * @param options.reconnectAfterMs he optional function that returns the millsec reconnect interval. Defaults to stepped backoff off.\n     */\n    constructor(endPoint, options) {\n        var _a;\n        this.accessToken = null;\n        this.channels = [];\n        this.endPoint = '';\n        this.headers = DEFAULT_HEADERS;\n        this.params = {};\n        this.timeout = DEFAULT_TIMEOUT;\n        this.transport = w3cwebsocket;\n        this.heartbeatIntervalMs = 30000;\n        this.heartbeatTimer = undefined;\n        this.pendingHeartbeatRef = null;\n        this.ref = 0;\n        this.logger = noop;\n        this.conn = null;\n        this.sendBuffer = [];\n        this.serializer = new Serializer();\n        this.stateChangeCallbacks = {\n            open: [],\n            close: [],\n            error: [],\n            message: [],\n        };\n        this.eventsPerSecondLimitMs = 100;\n        this.inThrottle = false;\n        this.endPoint = `${endPoint}/${TRANSPORTS.websocket}`;\n        if (options === null || options === void 0 ? void 0 : options.params)\n            this.params = options.params;\n        if (options === null || options === void 0 ? void 0 : options.headers)\n            this.headers = Object.assign(Object.assign({}, this.headers), options.headers);\n        if (options === null || options === void 0 ? void 0 : options.timeout)\n            this.timeout = options.timeout;\n        if (options === null || options === void 0 ? void 0 : options.logger)\n            this.logger = options.logger;\n        if (options === null || options === void 0 ? void 0 : options.transport)\n            this.transport = options.transport;\n        if (options === null || options === void 0 ? void 0 : options.heartbeatIntervalMs)\n            this.heartbeatIntervalMs = options.heartbeatIntervalMs;\n        const eventsPerSecond = (_a = options === null || options === void 0 ? void 0 : options.params) === null || _a === void 0 ? void 0 : _a.eventsPerSecond;\n        if (eventsPerSecond)\n            this.eventsPerSecondLimitMs = Math.floor(1000 / eventsPerSecond);\n        this.reconnectAfterMs = (options === null || options === void 0 ? void 0 : options.reconnectAfterMs)\n            ? options.reconnectAfterMs\n            : (tries) => {\n                return [1000, 2000, 5000, 10000][tries - 1] || 10000;\n            };\n        this.encode = (options === null || options === void 0 ? void 0 : options.encode)\n            ? options.encode\n            : (payload, callback) => {\n                return callback(JSON.stringify(payload));\n            };\n        this.decode = (options === null || options === void 0 ? void 0 : options.decode)\n            ? options.decode\n            : this.serializer.decode.bind(this.serializer);\n        this.reconnectTimer = new Timer(() => __awaiter(this, void 0, void 0, function* () {\n            this.disconnect();\n            this.connect();\n        }), this.reconnectAfterMs);\n    }\n    /**\n     * Connects the socket, unless already connected.\n     */\n    connect() {\n        if (this.conn) {\n            return;\n        }\n        this.conn = new this.transport(this._endPointURL(), [], null, this.headers);\n        if (this.conn) {\n            this.conn.binaryType = 'arraybuffer';\n            this.conn.onopen = () => this._onConnOpen();\n            this.conn.onerror = (error) => this._onConnError(error);\n            this.conn.onmessage = (event) => this._onConnMessage(event);\n            this.conn.onclose = (event) => this._onConnClose(event);\n        }\n    }\n    /**\n     * Disconnects the socket.\n     *\n     * @param code A numeric status code to send on disconnect.\n     * @param reason A custom reason for the disconnect.\n     */\n    disconnect(code, reason) {\n        if (this.conn) {\n            this.conn.onclose = function () { }; // noop\n            if (code) {\n                this.conn.close(code, reason !== null && reason !== void 0 ? reason : '');\n            }\n            else {\n                this.conn.close();\n            }\n            this.conn = null;\n            // remove open handles\n            this.heartbeatTimer && clearInterval(this.heartbeatTimer);\n            this.reconnectTimer.reset();\n        }\n    }\n    getChannels() {\n        return this.channels;\n    }\n    removeChannel(channel) {\n        return channel.unsubscribe().then((status) => {\n            if (this.channels.length === 0) {\n                this.disconnect();\n            }\n            return status;\n        });\n    }\n    removeAllChannels() {\n        return Promise.all(this.channels.map((channel) => channel.unsubscribe())).then((values) => {\n            this.disconnect();\n            return values;\n        });\n    }\n    /**\n     * Logs the message.\n     *\n     * For customized logging, `this.logger` can be overriden.\n     */\n    log(kind, msg, data) {\n        this.logger(kind, msg, data);\n    }\n    /**\n     * Returns the current state of the socket.\n     */\n    connectionState() {\n        switch (this.conn && this.conn.readyState) {\n            case SOCKET_STATES.connecting:\n                return CONNECTION_STATE.Connecting;\n            case SOCKET_STATES.open:\n                return CONNECTION_STATE.Open;\n            case SOCKET_STATES.closing:\n                return CONNECTION_STATE.Closing;\n            default:\n                return CONNECTION_STATE.Closed;\n        }\n    }\n    /**\n     * Retuns `true` is the connection is open.\n     */\n    isConnected() {\n        return this.connectionState() === CONNECTION_STATE.Open;\n    }\n    channel(topic, params = { config: {} }) {\n        if (!this.isConnected()) {\n            this.connect();\n        }\n        const chan = new RealtimeChannel(`realtime:${topic}`, params, this);\n        this.channels.push(chan);\n        return chan;\n    }\n    /**\n     * Push out a message if the socket is connected.\n     *\n     * If the socket is not connected, the message gets enqueued within a local buffer, and sent out when a connection is next established.\n     */\n    push(data) {\n        const { topic, event, payload, ref } = data;\n        let callback = () => {\n            this.encode(data, (result) => {\n                var _a;\n                (_a = this.conn) === null || _a === void 0 ? void 0 : _a.send(result);\n            });\n        };\n        this.log('push', `${topic} ${event} (${ref})`, payload);\n        if (this.isConnected()) {\n            if (['broadcast', 'presence', 'postgres_changes'].includes(event)) {\n                const isThrottled = this._throttle(callback)();\n                if (isThrottled) {\n                    return 'rate limited';\n                }\n            }\n            else {\n                callback();\n            }\n        }\n        else {\n            this.sendBuffer.push(callback);\n        }\n    }\n    /**\n     * Sets the JWT access token used for channel subscription authorization and Realtime RLS.\n     *\n     * @param token A JWT string.\n     */\n    setAuth(token) {\n        this.accessToken = token;\n        this.channels.forEach((channel) => {\n            token && channel.updateJoinPayload({ access_token: token });\n            if (channel.joinedOnce && channel._isJoined()) {\n                channel._push(CHANNEL_EVENTS.access_token, { access_token: token });\n            }\n        });\n    }\n    /**\n     * Return the next message ref, accounting for overflows\n     *\n     * @internal\n     */\n    _makeRef() {\n        let newRef = this.ref + 1;\n        if (newRef === this.ref) {\n            this.ref = 0;\n        }\n        else {\n            this.ref = newRef;\n        }\n        return this.ref.toString();\n    }\n    /**\n     * Unsubscribe from channels with the specified topic.\n     *\n     * @internal\n     */\n    _leaveOpenTopic(topic) {\n        let dupChannel = this.channels.find((c) => c.topic === topic && (c._isJoined() || c._isJoining()));\n        if (dupChannel) {\n            this.log('transport', `leaving duplicate topic \"${topic}\"`);\n            dupChannel.unsubscribe();\n        }\n    }\n    /**\n     * Removes a subscription from the socket.\n     *\n     * @param channel An open subscription.\n     *\n     * @internal\n     */\n    _remove(channel) {\n        this.channels = this.channels.filter((c) => c._joinRef() !== channel._joinRef());\n    }\n    /**\n     * Returns the URL of the websocket.\n     *\n     * @internal\n     */\n    _endPointURL() {\n        return this._appendParams(this.endPoint, Object.assign({}, this.params, { vsn: VSN }));\n    }\n    /** @internal */\n    _onConnMessage(rawMessage) {\n        this.decode(rawMessage.data, (msg) => {\n            let { topic, event, payload, ref } = msg;\n            if ((ref && ref === this.pendingHeartbeatRef) ||\n                event === (payload === null || payload === void 0 ? void 0 : payload.type)) {\n                this.pendingHeartbeatRef = null;\n            }\n            this.log('receive', `${payload.status || ''} ${topic} ${event} ${(ref && '(' + ref + ')') || ''}`, payload);\n            this.channels\n                .filter((channel) => channel._isMember(topic))\n                .forEach((channel) => channel._trigger(event, payload, ref));\n            this.stateChangeCallbacks.message.forEach((callback) => callback(msg));\n        });\n    }\n    /** @internal */\n    _onConnOpen() {\n        this.log('transport', `connected to ${this._endPointURL()}`);\n        this._flushSendBuffer();\n        this.reconnectTimer.reset();\n        this.heartbeatTimer && clearInterval(this.heartbeatTimer);\n        this.heartbeatTimer = setInterval(() => this._sendHeartbeat(), this.heartbeatIntervalMs);\n        this.stateChangeCallbacks.open.forEach((callback) => callback());\n    }\n    /** @internal */\n    _onConnClose(event) {\n        this.log('transport', 'close', event);\n        this._triggerChanError();\n        this.heartbeatTimer && clearInterval(this.heartbeatTimer);\n        this.reconnectTimer.scheduleTimeout();\n        this.stateChangeCallbacks.close.forEach((callback) => callback(event));\n    }\n    /** @internal */\n    _onConnError(error) {\n        this.log('transport', error.message);\n        this._triggerChanError();\n        this.stateChangeCallbacks.error.forEach((callback) => callback(error));\n    }\n    /** @internal */\n    _triggerChanError() {\n        this.channels.forEach((channel) => channel._trigger(CHANNEL_EVENTS.error));\n    }\n    /** @internal */\n    _appendParams(url, params) {\n        if (Object.keys(params).length === 0) {\n            return url;\n        }\n        const prefix = url.match(/\\?/) ? '&' : '?';\n        const query = new URLSearchParams(params);\n        return `${url}${prefix}${query}`;\n    }\n    /** @internal */\n    _flushSendBuffer() {\n        if (this.isConnected() && this.sendBuffer.length > 0) {\n            this.sendBuffer.forEach((callback) => callback());\n            this.sendBuffer = [];\n        }\n    }\n    /** @internal */\n    _sendHeartbeat() {\n        var _a;\n        if (!this.isConnected()) {\n            return;\n        }\n        if (this.pendingHeartbeatRef) {\n            this.pendingHeartbeatRef = null;\n            this.log('transport', 'heartbeat timeout. Attempting to re-establish connection');\n            (_a = this.conn) === null || _a === void 0 ? void 0 : _a.close(WS_CLOSE_NORMAL, 'hearbeat timeout');\n            return;\n        }\n        this.pendingHeartbeatRef = this._makeRef();\n        this.push({\n            topic: 'phoenix',\n            event: 'heartbeat',\n            payload: {},\n            ref: this.pendingHeartbeatRef,\n        });\n        this.setAuth(this.accessToken);\n    }\n    /** @internal */\n    _throttle(callback, eventsPerSecondLimit = this.eventsPerSecondLimitMs) {\n        return () => {\n            if (this.inThrottle)\n                return true;\n            callback();\n            this.inThrottle = true;\n            setTimeout(() => {\n                this.inThrottle = false;\n            }, eventsPerSecondLimit);\n            return false;\n        };\n    }\n}\n","/*\n  This file draws heavily from https://github.com/phoenixframework/phoenix/blob/d344ec0a732ab4ee204215b31de69cf4be72e3bf/assets/js/phoenix/presence.js\n  License: https://github.com/phoenixframework/phoenix/blob/d344ec0a732ab4ee204215b31de69cf4be72e3bf/LICENSE.md\n*/\nexport var REALTIME_PRESENCE_LISTEN_EVENTS;\n(function (REALTIME_PRESENCE_LISTEN_EVENTS) {\n    REALTIME_PRESENCE_LISTEN_EVENTS[\"SYNC\"] = \"sync\";\n    REALTIME_PRESENCE_LISTEN_EVENTS[\"JOIN\"] = \"join\";\n    REALTIME_PRESENCE_LISTEN_EVENTS[\"LEAVE\"] = \"leave\";\n})(REALTIME_PRESENCE_LISTEN_EVENTS || (REALTIME_PRESENCE_LISTEN_EVENTS = {}));\nexport default class RealtimePresence {\n    /**\n     * Initializes the Presence.\n     *\n     * @param channel - The RealtimeChannel\n     * @param opts - The options,\n     *        for example `{events: {state: 'state', diff: 'diff'}}`\n     */\n    constructor(channel, opts) {\n        this.channel = channel;\n        this.state = {};\n        this.pendingDiffs = [];\n        this.joinRef = null;\n        this.caller = {\n            onJoin: () => { },\n            onLeave: () => { },\n            onSync: () => { },\n        };\n        const events = (opts === null || opts === void 0 ? void 0 : opts.events) || {\n            state: 'presence_state',\n            diff: 'presence_diff',\n        };\n        this.channel._on(events.state, {}, (newState) => {\n            const { onJoin, onLeave, onSync } = this.caller;\n            this.joinRef = this.channel._joinRef();\n            this.state = RealtimePresence.syncState(this.state, newState, onJoin, onLeave);\n            this.pendingDiffs.forEach((diff) => {\n                this.state = RealtimePresence.syncDiff(this.state, diff, onJoin, onLeave);\n            });\n            this.pendingDiffs = [];\n            onSync();\n        });\n        this.channel._on(events.diff, {}, (diff) => {\n            const { onJoin, onLeave, onSync } = this.caller;\n            if (this.inPendingSyncState()) {\n                this.pendingDiffs.push(diff);\n            }\n            else {\n                this.state = RealtimePresence.syncDiff(this.state, diff, onJoin, onLeave);\n                onSync();\n            }\n        });\n        this.onJoin((key, currentPresences, newPresences) => {\n            this.channel._trigger('presence', {\n                event: 'join',\n                key,\n                currentPresences,\n                newPresences,\n            });\n        });\n        this.onLeave((key, currentPresences, leftPresences) => {\n            this.channel._trigger('presence', {\n                event: 'leave',\n                key,\n                currentPresences,\n                leftPresences,\n            });\n        });\n        this.onSync(() => {\n            this.channel._trigger('presence', { event: 'sync' });\n        });\n    }\n    /**\n     * Used to sync the list of presences on the server with the\n     * client's state.\n     *\n     * An optional `onJoin` and `onLeave` callback can be provided to\n     * react to changes in the client's local presences across\n     * disconnects and reconnects with the server.\n     *\n     * @internal\n     */\n    static syncState(currentState, newState, onJoin, onLeave) {\n        const state = this.cloneDeep(currentState);\n        const transformedState = this.transformState(newState);\n        const joins = {};\n        const leaves = {};\n        this.map(state, (key, presences) => {\n            if (!transformedState[key]) {\n                leaves[key] = presences;\n            }\n        });\n        this.map(transformedState, (key, newPresences) => {\n            const currentPresences = state[key];\n            if (currentPresences) {\n                const newPresenceRefs = newPresences.map((m) => m.presence_ref);\n                const curPresenceRefs = currentPresences.map((m) => m.presence_ref);\n                const joinedPresences = newPresences.filter((m) => curPresenceRefs.indexOf(m.presence_ref) < 0);\n                const leftPresences = currentPresences.filter((m) => newPresenceRefs.indexOf(m.presence_ref) < 0);\n                if (joinedPresences.length > 0) {\n                    joins[key] = joinedPresences;\n                }\n                if (leftPresences.length > 0) {\n                    leaves[key] = leftPresences;\n                }\n            }\n            else {\n                joins[key] = newPresences;\n            }\n        });\n        return this.syncDiff(state, { joins, leaves }, onJoin, onLeave);\n    }\n    /**\n     * Used to sync a diff of presence join and leave events from the\n     * server, as they happen.\n     *\n     * Like `syncState`, `syncDiff` accepts optional `onJoin` and\n     * `onLeave` callbacks to react to a user joining or leaving from a\n     * device.\n     *\n     * @internal\n     */\n    static syncDiff(state, diff, onJoin, onLeave) {\n        const { joins, leaves } = {\n            joins: this.transformState(diff.joins),\n            leaves: this.transformState(diff.leaves),\n        };\n        if (!onJoin) {\n            onJoin = () => { };\n        }\n        if (!onLeave) {\n            onLeave = () => { };\n        }\n        this.map(joins, (key, newPresences) => {\n            var _a;\n            const currentPresences = (_a = state[key]) !== null && _a !== void 0 ? _a : [];\n            state[key] = this.cloneDeep(newPresences);\n            if (currentPresences.length > 0) {\n                const joinedPresenceRefs = state[key].map((m) => m.presence_ref);\n                const curPresences = currentPresences.filter((m) => joinedPresenceRefs.indexOf(m.presence_ref) < 0);\n                state[key].unshift(...curPresences);\n            }\n            onJoin(key, currentPresences, newPresences);\n        });\n        this.map(leaves, (key, leftPresences) => {\n            let currentPresences = state[key];\n            if (!currentPresences)\n                return;\n            const presenceRefsToRemove = leftPresences.map((m) => m.presence_ref);\n            currentPresences = currentPresences.filter((m) => presenceRefsToRemove.indexOf(m.presence_ref) < 0);\n            state[key] = currentPresences;\n            onLeave(key, currentPresences, leftPresences);\n            if (currentPresences.length === 0)\n                delete state[key];\n        });\n        return state;\n    }\n    /** @internal */\n    static map(obj, func) {\n        return Object.getOwnPropertyNames(obj).map((key) => func(key, obj[key]));\n    }\n    /**\n     * Remove 'metas' key\n     * Change 'phx_ref' to 'presence_ref'\n     * Remove 'phx_ref' and 'phx_ref_prev'\n     *\n     * @example\n     * // returns {\n     *  abc123: [\n     *    { presence_ref: '2', user_id: 1 },\n     *    { presence_ref: '3', user_id: 2 }\n     *  ]\n     * }\n     * RealtimePresence.transformState({\n     *  abc123: {\n     *    metas: [\n     *      { phx_ref: '2', phx_ref_prev: '1' user_id: 1 },\n     *      { phx_ref: '3', user_id: 2 }\n     *    ]\n     *  }\n     * })\n     *\n     * @internal\n     */\n    static transformState(state) {\n        state = this.cloneDeep(state);\n        return Object.getOwnPropertyNames(state).reduce((newState, key) => {\n            const presences = state[key];\n            if ('metas' in presences) {\n                newState[key] = presences.metas.map((presence) => {\n                    presence['presence_ref'] = presence['phx_ref'];\n                    delete presence['phx_ref'];\n                    delete presence['phx_ref_prev'];\n                    return presence;\n                });\n            }\n            else {\n                newState[key] = presences;\n            }\n            return newState;\n        }, {});\n    }\n    /** @internal */\n    static cloneDeep(obj) {\n        return JSON.parse(JSON.stringify(obj));\n    }\n    /** @internal */\n    onJoin(callback) {\n        this.caller.onJoin = callback;\n    }\n    /** @internal */\n    onLeave(callback) {\n        this.caller.onLeave = callback;\n    }\n    /** @internal */\n    onSync(callback) {\n        this.caller.onSync = callback;\n    }\n    /** @internal */\n    inPendingSyncState() {\n        return !this.joinRef || this.joinRef !== this.channel._joinRef();\n    }\n}\n","import RealtimeClient from './RealtimeClient';\nimport RealtimeChannel, { REALTIME_LISTEN_TYPES, REALTIME_POSTGRES_CHANGES_LISTEN_EVENT, REALTIME_SUBSCRIBE_STATES, } from './RealtimeChannel';\nimport RealtimePresence, { REALTIME_PRESENCE_LISTEN_EVENTS, } from './RealtimePresence';\nexport { RealtimePresence, RealtimeChannel, RealtimeClient, REALTIME_LISTEN_TYPES, REALTIME_POSTGRES_CHANGES_LISTEN_EVENT, REALTIME_PRESENCE_LISTEN_EVENTS, REALTIME_SUBSCRIBE_STATES, };\n","import { version } from './version';\nexport const DEFAULT_HEADERS = { 'X-Client-Info': `realtime-js/${version}` };\nexport const VSN = '1.0.0';\nexport const DEFAULT_TIMEOUT = 10000;\nexport const WS_CLOSE_NORMAL = 1000;\nexport var SOCKET_STATES;\n(function (SOCKET_STATES) {\n    SOCKET_STATES[SOCKET_STATES[\"connecting\"] = 0] = \"connecting\";\n    SOCKET_STATES[SOCKET_STATES[\"open\"] = 1] = \"open\";\n    SOCKET_STATES[SOCKET_STATES[\"closing\"] = 2] = \"closing\";\n    SOCKET_STATES[SOCKET_STATES[\"closed\"] = 3] = \"closed\";\n})(SOCKET_STATES || (SOCKET_STATES = {}));\nexport var CHANNEL_STATES;\n(function (CHANNEL_STATES) {\n    CHANNEL_STATES[\"closed\"] = \"closed\";\n    CHANNEL_STATES[\"errored\"] = \"errored\";\n    CHANNEL_STATES[\"joined\"] = \"joined\";\n    CHANNEL_STATES[\"joining\"] = \"joining\";\n    CHANNEL_STATES[\"leaving\"] = \"leaving\";\n})(CHANNEL_STATES || (CHANNEL_STATES = {}));\nexport var CHANNEL_EVENTS;\n(function (CHANNEL_EVENTS) {\n    CHANNEL_EVENTS[\"close\"] = \"phx_close\";\n    CHANNEL_EVENTS[\"error\"] = \"phx_error\";\n    CHANNEL_EVENTS[\"join\"] = \"phx_join\";\n    CHANNEL_EVENTS[\"reply\"] = \"phx_reply\";\n    CHANNEL_EVENTS[\"leave\"] = \"phx_leave\";\n    CHANNEL_EVENTS[\"access_token\"] = \"access_token\";\n})(CHANNEL_EVENTS || (CHANNEL_EVENTS = {}));\nexport var TRANSPORTS;\n(function (TRANSPORTS) {\n    TRANSPORTS[\"websocket\"] = \"websocket\";\n})(TRANSPORTS || (TRANSPORTS = {}));\nexport var CONNECTION_STATE;\n(function (CONNECTION_STATE) {\n    CONNECTION_STATE[\"Connecting\"] = \"connecting\";\n    CONNECTION_STATE[\"Open\"] = \"open\";\n    CONNECTION_STATE[\"Closing\"] = \"closing\";\n    CONNECTION_STATE[\"Closed\"] = \"closed\";\n})(CONNECTION_STATE || (CONNECTION_STATE = {}));\n","import { DEFAULT_TIMEOUT } from '../lib/constants';\nexport default class Push {\n    /**\n     * Initializes the Push\n     *\n     * @param channel The Channel\n     * @param event The event, for example `\"phx_join\"`\n     * @param payload The payload, for example `{user_id: 123}`\n     * @param timeout The push timeout in milliseconds\n     */\n    constructor(channel, event, payload = {}, timeout = DEFAULT_TIMEOUT) {\n        this.channel = channel;\n        this.event = event;\n        this.payload = payload;\n        this.timeout = timeout;\n        this.sent = false;\n        this.timeoutTimer = undefined;\n        this.ref = '';\n        this.receivedResp = null;\n        this.recHooks = [];\n        this.refEvent = null;\n        this.rateLimited = false;\n    }\n    resend(timeout) {\n        this.timeout = timeout;\n        this._cancelRefEvent();\n        this.ref = '';\n        this.refEvent = null;\n        this.receivedResp = null;\n        this.sent = false;\n        this.send();\n    }\n    send() {\n        if (this._hasReceived('timeout')) {\n            return;\n        }\n        this.startTimeout();\n        this.sent = true;\n        const status = this.channel.socket.push({\n            topic: this.channel.topic,\n            event: this.event,\n            payload: this.payload,\n            ref: this.ref,\n            join_ref: this.channel._joinRef(),\n        });\n        if (status === 'rate limited') {\n            this.rateLimited = true;\n        }\n    }\n    updatePayload(payload) {\n        this.payload = Object.assign(Object.assign({}, this.payload), payload);\n    }\n    receive(status, callback) {\n        var _a;\n        if (this._hasReceived(status)) {\n            callback((_a = this.receivedResp) === null || _a === void 0 ? void 0 : _a.response);\n        }\n        this.recHooks.push({ status, callback });\n        return this;\n    }\n    startTimeout() {\n        if (this.timeoutTimer) {\n            return;\n        }\n        this.ref = this.channel.socket._makeRef();\n        this.refEvent = this.channel._replyEventName(this.ref);\n        const callback = (payload) => {\n            this._cancelRefEvent();\n            this._cancelTimeout();\n            this.receivedResp = payload;\n            this._matchReceive(payload);\n        };\n        this.channel._on(this.refEvent, {}, callback);\n        this.timeoutTimer = setTimeout(() => {\n            this.trigger('timeout', {});\n        }, this.timeout);\n    }\n    trigger(status, response) {\n        if (this.refEvent)\n            this.channel._trigger(this.refEvent, { status, response });\n    }\n    destroy() {\n        this._cancelRefEvent();\n        this._cancelTimeout();\n    }\n    _cancelRefEvent() {\n        if (!this.refEvent) {\n            return;\n        }\n        this.channel._off(this.refEvent, {});\n    }\n    _cancelTimeout() {\n        clearTimeout(this.timeoutTimer);\n        this.timeoutTimer = undefined;\n    }\n    _matchReceive({ status, response, }) {\n        this.recHooks\n            .filter((h) => h.status === status)\n            .forEach((h) => h.callback(response));\n    }\n    _hasReceived(status) {\n        return this.receivedResp && this.receivedResp.status === status;\n    }\n}\n","// This file draws heavily from https://github.com/phoenixframework/phoenix/commit/cf098e9cf7a44ee6479d31d911a97d3c7430c6fe\n// License: https://github.com/phoenixframework/phoenix/blob/master/LICENSE.md\nexport default class Serializer {\n    constructor() {\n        this.HEADER_LENGTH = 1;\n    }\n    decode(rawPayload, callback) {\n        if (rawPayload.constructor === ArrayBuffer) {\n            return callback(this._binaryDecode(rawPayload));\n        }\n        if (typeof rawPayload === 'string') {\n            return callback(JSON.parse(rawPayload));\n        }\n        return callback({});\n    }\n    _binaryDecode(buffer) {\n        const view = new DataView(buffer);\n        const decoder = new TextDecoder();\n        return this._decodeBroadcast(buffer, view, decoder);\n    }\n    _decodeBroadcast(buffer, view, decoder) {\n        const topicSize = view.getUint8(1);\n        const eventSize = view.getUint8(2);\n        let offset = this.HEADER_LENGTH + 2;\n        const topic = decoder.decode(buffer.slice(offset, offset + topicSize));\n        offset = offset + topicSize;\n        const event = decoder.decode(buffer.slice(offset, offset + eventSize));\n        offset = offset + eventSize;\n        const data = JSON.parse(decoder.decode(buffer.slice(offset, buffer.byteLength)));\n        return { ref: null, topic: topic, event: event, payload: data };\n    }\n}\n","/**\n * Creates a timer that accepts a `timerCalc` function to perform calculated timeout retries, such as exponential backoff.\n *\n * @example\n *    let reconnectTimer = new Timer(() => this.connect(), function(tries){\n *      return [1000, 5000, 10000][tries - 1] || 10000\n *    })\n *    reconnectTimer.scheduleTimeout() // fires after 1000\n *    reconnectTimer.scheduleTimeout() // fires after 5000\n *    reconnectTimer.reset()\n *    reconnectTimer.scheduleTimeout() // fires after 1000\n */\nexport default class Timer {\n    constructor(callback, timerCalc) {\n        this.callback = callback;\n        this.timerCalc = timerCalc;\n        this.timer = undefined;\n        this.tries = 0;\n        this.callback = callback;\n        this.timerCalc = timerCalc;\n    }\n    reset() {\n        this.tries = 0;\n        clearTimeout(this.timer);\n    }\n    // Cancels any previous scheduleTimeout and schedules callback\n    scheduleTimeout() {\n        clearTimeout(this.timer);\n        this.timer = setTimeout(() => {\n            this.tries = this.tries + 1;\n            this.callback();\n        }, this.timerCalc(this.tries + 1));\n    }\n}\n","/**\n * Helpers to convert the change Payload into native JS types.\n */\n// Adapted from epgsql (src/epgsql_binary.erl), this module licensed under\n// 3-clause BSD found here: https://raw.githubusercontent.com/epgsql/epgsql/devel/LICENSE\nexport var PostgresTypes;\n(function (PostgresTypes) {\n    PostgresTypes[\"abstime\"] = \"abstime\";\n    PostgresTypes[\"bool\"] = \"bool\";\n    PostgresTypes[\"date\"] = \"date\";\n    PostgresTypes[\"daterange\"] = \"daterange\";\n    PostgresTypes[\"float4\"] = \"float4\";\n    PostgresTypes[\"float8\"] = \"float8\";\n    PostgresTypes[\"int2\"] = \"int2\";\n    PostgresTypes[\"int4\"] = \"int4\";\n    PostgresTypes[\"int4range\"] = \"int4range\";\n    PostgresTypes[\"int8\"] = \"int8\";\n    PostgresTypes[\"int8range\"] = \"int8range\";\n    PostgresTypes[\"json\"] = \"json\";\n    PostgresTypes[\"jsonb\"] = \"jsonb\";\n    PostgresTypes[\"money\"] = \"money\";\n    PostgresTypes[\"numeric\"] = \"numeric\";\n    PostgresTypes[\"oid\"] = \"oid\";\n    PostgresTypes[\"reltime\"] = \"reltime\";\n    PostgresTypes[\"text\"] = \"text\";\n    PostgresTypes[\"time\"] = \"time\";\n    PostgresTypes[\"timestamp\"] = \"timestamp\";\n    PostgresTypes[\"timestamptz\"] = \"timestamptz\";\n    PostgresTypes[\"timetz\"] = \"timetz\";\n    PostgresTypes[\"tsrange\"] = \"tsrange\";\n    PostgresTypes[\"tstzrange\"] = \"tstzrange\";\n})(PostgresTypes || (PostgresTypes = {}));\n/**\n * Takes an array of columns and an object of string values then converts each string value\n * to its mapped type.\n *\n * @param {{name: String, type: String}[]} columns\n * @param {Object} record\n * @param {Object} options The map of various options that can be applied to the mapper\n * @param {Array} options.skipTypes The array of types that should not be converted\n *\n * @example convertChangeData([{name: 'first_name', type: 'text'}, {name: 'age', type: 'int4'}], {first_name: 'Paul', age:'33'}, {})\n * //=>{ first_name: 'Paul', age: 33 }\n */\nexport const convertChangeData = (columns, record, options = {}) => {\n    var _a;\n    const skipTypes = (_a = options.skipTypes) !== null && _a !== void 0 ? _a : [];\n    return Object.keys(record).reduce((acc, rec_key) => {\n        acc[rec_key] = convertColumn(rec_key, columns, record, skipTypes);\n        return acc;\n    }, {});\n};\n/**\n * Converts the value of an individual column.\n *\n * @param {String} columnName The column that you want to convert\n * @param {{name: String, type: String}[]} columns All of the columns\n * @param {Object} record The map of string values\n * @param {Array} skipTypes An array of types that should not be converted\n * @return {object} Useless information\n *\n * @example convertColumn('age', [{name: 'first_name', type: 'text'}, {name: 'age', type: 'int4'}], {first_name: 'Paul', age: '33'}, [])\n * //=> 33\n * @example convertColumn('age', [{name: 'first_name', type: 'text'}, {name: 'age', type: 'int4'}], {first_name: 'Paul', age: '33'}, ['int4'])\n * //=> \"33\"\n */\nexport const convertColumn = (columnName, columns, record, skipTypes) => {\n    const column = columns.find((x) => x.name === columnName);\n    const colType = column === null || column === void 0 ? void 0 : column.type;\n    const value = record[columnName];\n    if (colType && !skipTypes.includes(colType)) {\n        return convertCell(colType, value);\n    }\n    return noop(value);\n};\n/**\n * If the value of the cell is `null`, returns null.\n * Otherwise converts the string value to the correct type.\n * @param {String} type A postgres column type\n * @param {String} stringValue The cell value\n *\n * @example convertCell('bool', 't')\n * //=> true\n * @example convertCell('int8', '10')\n * //=> 10\n * @example convertCell('_int4', '{1,2,3,4}')\n * //=> [1,2,3,4]\n */\nexport const convertCell = (type, value) => {\n    // if data type is an array\n    if (type.charAt(0) === '_') {\n        const dataType = type.slice(1, type.length);\n        return toArray(value, dataType);\n    }\n    // If not null, convert to correct type.\n    switch (type) {\n        case PostgresTypes.bool:\n            return toBoolean(value);\n        case PostgresTypes.float4:\n        case PostgresTypes.float8:\n        case PostgresTypes.int2:\n        case PostgresTypes.int4:\n        case PostgresTypes.int8:\n        case PostgresTypes.numeric:\n        case PostgresTypes.oid:\n            return toNumber(value);\n        case PostgresTypes.json:\n        case PostgresTypes.jsonb:\n            return toJson(value);\n        case PostgresTypes.timestamp:\n            return toTimestampString(value); // Format to be consistent with PostgREST\n        case PostgresTypes.abstime: // To allow users to cast it based on Timezone\n        case PostgresTypes.date: // To allow users to cast it based on Timezone\n        case PostgresTypes.daterange:\n        case PostgresTypes.int4range:\n        case PostgresTypes.int8range:\n        case PostgresTypes.money:\n        case PostgresTypes.reltime: // To allow users to cast it based on Timezone\n        case PostgresTypes.text:\n        case PostgresTypes.time: // To allow users to cast it based on Timezone\n        case PostgresTypes.timestamptz: // To allow users to cast it based on Timezone\n        case PostgresTypes.timetz: // To allow users to cast it based on Timezone\n        case PostgresTypes.tsrange:\n        case PostgresTypes.tstzrange:\n            return noop(value);\n        default:\n            // Return the value for remaining types\n            return noop(value);\n    }\n};\nconst noop = (value) => {\n    return value;\n};\nexport const toBoolean = (value) => {\n    switch (value) {\n        case 't':\n            return true;\n        case 'f':\n            return false;\n        default:\n            return value;\n    }\n};\nexport const toNumber = (value) => {\n    if (typeof value === 'string') {\n        const parsedValue = parseFloat(value);\n        if (!Number.isNaN(parsedValue)) {\n            return parsedValue;\n        }\n    }\n    return value;\n};\nexport const toJson = (value) => {\n    if (typeof value === 'string') {\n        try {\n            return JSON.parse(value);\n        }\n        catch (error) {\n            console.log(`JSON parse error: ${error}`);\n            return value;\n        }\n    }\n    return value;\n};\n/**\n * Converts a Postgres Array into a native JS array\n *\n * @example toArray('{}', 'int4')\n * //=> []\n * @example toArray('{\"[2021-01-01,2021-12-31)\",\"(2021-01-01,2021-12-32]\"}', 'daterange')\n * //=> ['[2021-01-01,2021-12-31)', '(2021-01-01,2021-12-32]']\n * @example toArray([1,2,3,4], 'int4')\n * //=> [1,2,3,4]\n */\nexport const toArray = (value, type) => {\n    if (typeof value !== 'string') {\n        return value;\n    }\n    const lastIdx = value.length - 1;\n    const closeBrace = value[lastIdx];\n    const openBrace = value[0];\n    // Confirm value is a Postgres array by checking curly brackets\n    if (openBrace === '{' && closeBrace === '}') {\n        let arr;\n        const valTrim = value.slice(1, lastIdx);\n        // TODO: find a better solution to separate Postgres array data\n        try {\n            arr = JSON.parse('[' + valTrim + ']');\n        }\n        catch (_) {\n            // WARNING: splitting on comma does not cover all edge cases\n            arr = valTrim ? valTrim.split(',') : [];\n        }\n        return arr.map((val) => convertCell(type, val));\n    }\n    return value;\n};\n/**\n * Fixes timestamp to be ISO-8601. Swaps the space between the date and time for a 'T'\n * See https://github.com/supabase/supabase/issues/18\n *\n * @example toTimestampString('2019-09-10 00:00:00')\n * //=> '2019-09-10T00:00:00'\n */\nexport const toTimestampString = (value) => {\n    if (typeof value === 'string') {\n        return value.replace(' ', 'T');\n    }\n    return value;\n};\n","export const version = '2.1.0';\n","import StorageFileApi from './packages/StorageFileApi';\nimport StorageBucketApi from './packages/StorageBucketApi';\nexport class StorageClient extends StorageBucketApi {\n    constructor(url, headers = {}, fetch) {\n        super(url, headers, fetch);\n    }\n    /**\n     * Perform file operation in a bucket.\n     *\n     * @param id The bucket id to operate on.\n     */\n    from(id) {\n        return new StorageFileApi(this.url, this.headers, id, this.fetch);\n    }\n}\n","import { version } from './version';\nexport const DEFAULT_HEADERS = { 'X-Client-Info': `storage-js/${version}` };\n","export class StorageError extends Error {\n    constructor(message) {\n        super(message);\n        this.__isStorageError = true;\n        this.name = 'StorageError';\n    }\n}\nexport function isStorageError(error) {\n    return typeof error === 'object' && error !== null && '__isStorageError' in error;\n}\nexport class StorageApiError extends StorageError {\n    constructor(message, status) {\n        super(message);\n        this.name = 'StorageApiError';\n        this.status = status;\n    }\n    toJSON() {\n        return {\n            name: this.name,\n            message: this.message,\n            status: this.status,\n        };\n    }\n}\nexport class StorageUnknownError extends StorageError {\n    constructor(message, originalError) {\n        super(message);\n        this.name = 'StorageUnknownError';\n        this.originalError = originalError;\n    }\n}\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { StorageApiError, StorageUnknownError } from './errors';\nimport { resolveResponse } from './helpers';\nconst _getErrorMessage = (err) => err.msg || err.message || err.error_description || err.error || JSON.stringify(err);\nconst handleError = (error, reject) => __awaiter(void 0, void 0, void 0, function* () {\n    const Res = yield resolveResponse();\n    if (error instanceof Res) {\n        error.json().then((err) => {\n            reject(new StorageApiError(_getErrorMessage(err), error.status || 500));\n        });\n    }\n    else {\n        reject(new StorageUnknownError(_getErrorMessage(error), error));\n    }\n});\nconst _getRequestParams = (method, options, parameters, body) => {\n    const params = { method, headers: (options === null || options === void 0 ? void 0 : options.headers) || {} };\n    if (method === 'GET') {\n        return params;\n    }\n    params.headers = Object.assign({ 'Content-Type': 'application/json' }, options === null || options === void 0 ? void 0 : options.headers);\n    params.body = JSON.stringify(body);\n    return Object.assign(Object.assign({}, params), parameters);\n};\nfunction _handleRequest(fetcher, method, url, options, parameters, body) {\n    return __awaiter(this, void 0, void 0, function* () {\n        return new Promise((resolve, reject) => {\n            fetcher(url, _getRequestParams(method, options, parameters, body))\n                .then((result) => {\n                if (!result.ok)\n                    throw result;\n                if (options === null || options === void 0 ? void 0 : options.noResolveJson)\n                    return result;\n                return result.json();\n            })\n                .then((data) => resolve(data))\n                .catch((error) => handleError(error, reject));\n        });\n    });\n}\nexport function get(fetcher, url, options, parameters) {\n    return __awaiter(this, void 0, void 0, function* () {\n        return _handleRequest(fetcher, 'GET', url, options, parameters);\n    });\n}\nexport function post(fetcher, url, body, options, parameters) {\n    return __awaiter(this, void 0, void 0, function* () {\n        return _handleRequest(fetcher, 'POST', url, options, parameters, body);\n    });\n}\nexport function put(fetcher, url, body, options, parameters) {\n    return __awaiter(this, void 0, void 0, function* () {\n        return _handleRequest(fetcher, 'PUT', url, options, parameters, body);\n    });\n}\nexport function remove(fetcher, url, body, options, parameters) {\n    return __awaiter(this, void 0, void 0, function* () {\n        return _handleRequest(fetcher, 'DELETE', url, options, parameters, body);\n    });\n}\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nexport const resolveFetch = (customFetch) => {\n    let _fetch;\n    if (customFetch) {\n        _fetch = customFetch;\n    }\n    else if (typeof fetch === 'undefined') {\n        _fetch = (...args) => __awaiter(void 0, void 0, void 0, function* () { return yield (yield import('cross-fetch')).fetch(...args); });\n    }\n    else {\n        _fetch = fetch;\n    }\n    return (...args) => _fetch(...args);\n};\nexport const resolveResponse = () => __awaiter(void 0, void 0, void 0, function* () {\n    if (typeof Response === 'undefined') {\n        return (yield import('cross-fetch')).Response;\n    }\n    return Response;\n});\n","// generated by genversion\nexport const version = '2.0.0';\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { DEFAULT_HEADERS } from '../lib/constants';\nimport { isStorageError } from '../lib/errors';\nimport { get, post, put, remove } from '../lib/fetch';\nimport { resolveFetch } from '../lib/helpers';\nexport default class StorageBucketApi {\n    constructor(url, headers = {}, fetch) {\n        this.url = url;\n        this.headers = Object.assign(Object.assign({}, DEFAULT_HEADERS), headers);\n        this.fetch = resolveFetch(fetch);\n    }\n    /**\n     * Retrieves the details of all Storage buckets within an existing project.\n     */\n    listBuckets() {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const data = yield get(this.fetch, `${this.url}/bucket`, { headers: this.headers });\n                return { data, error: null };\n            }\n            catch (error) {\n                if (isStorageError(error)) {\n                    return { data: null, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Retrieves the details of an existing Storage bucket.\n     *\n     * @param id The unique identifier of the bucket you would like to retrieve.\n     */\n    getBucket(id) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const data = yield get(this.fetch, `${this.url}/bucket/${id}`, { headers: this.headers });\n                return { data, error: null };\n            }\n            catch (error) {\n                if (isStorageError(error)) {\n                    return { data: null, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Creates a new Storage bucket\n     *\n     * @param id A unique identifier for the bucket you are creating.\n     * @param options.public The visibility of the bucket. Public buckets don't require an authorization token to download objects, but still require a valid token for all other operations. By default, buckets are private.\n     * @returns newly created bucket id\n     */\n    createBucket(id, options = { public: false }) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const data = yield post(this.fetch, `${this.url}/bucket`, { id, name: id, public: options.public }, { headers: this.headers });\n                return { data, error: null };\n            }\n            catch (error) {\n                if (isStorageError(error)) {\n                    return { data: null, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Updates a Storage bucket\n     *\n     * @param id A unique identifier for the bucket you are updating.\n     * @param options.public The visibility of the bucket. Public buckets don't require an authorization token to download objects, but still require a valid token for all other operations.\n     */\n    updateBucket(id, options) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const data = yield put(this.fetch, `${this.url}/bucket/${id}`, { id, name: id, public: options.public }, { headers: this.headers });\n                return { data, error: null };\n            }\n            catch (error) {\n                if (isStorageError(error)) {\n                    return { data: null, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Removes all objects inside a single bucket.\n     *\n     * @param id The unique identifier of the bucket you would like to empty.\n     */\n    emptyBucket(id) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const data = yield post(this.fetch, `${this.url}/bucket/${id}/empty`, {}, { headers: this.headers });\n                return { data, error: null };\n            }\n            catch (error) {\n                if (isStorageError(error)) {\n                    return { data: null, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Deletes an existing bucket. A bucket can't be deleted with existing objects inside it.\n     * You must first `empty()` the bucket.\n     *\n     * @param id The unique identifier of the bucket you would like to delete.\n     */\n    deleteBucket(id) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const data = yield remove(this.fetch, `${this.url}/bucket/${id}`, {}, { headers: this.headers });\n                return { data, error: null };\n            }\n            catch (error) {\n                if (isStorageError(error)) {\n                    return { data: null, error };\n                }\n                throw error;\n            }\n        });\n    }\n}\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { isStorageError } from '../lib/errors';\nimport { get, post, remove } from '../lib/fetch';\nimport { resolveFetch } from '../lib/helpers';\nconst DEFAULT_SEARCH_OPTIONS = {\n    limit: 100,\n    offset: 0,\n    sortBy: {\n        column: 'name',\n        order: 'asc',\n    },\n};\nconst DEFAULT_FILE_OPTIONS = {\n    cacheControl: '3600',\n    contentType: 'text/plain;charset=UTF-8',\n    upsert: false,\n};\nexport default class StorageFileApi {\n    constructor(url, headers = {}, bucketId, fetch) {\n        this.url = url;\n        this.headers = headers;\n        this.bucketId = bucketId;\n        this.fetch = resolveFetch(fetch);\n    }\n    /**\n     * Uploads a file to an existing bucket or replaces an existing file at the specified path with a new one.\n     *\n     * @param method HTTP method.\n     * @param path The relative file path. Should be of the format `folder/subfolder/filename.png`. The bucket must already exist before attempting to upload.\n     * @param fileBody The body of the file to be stored in the bucket.\n     */\n    uploadOrUpdate(method, path, fileBody, fileOptions) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                let body;\n                const options = Object.assign(Object.assign({}, DEFAULT_FILE_OPTIONS), fileOptions);\n                const headers = Object.assign(Object.assign({}, this.headers), (method === 'POST' && { 'x-upsert': String(options.upsert) }));\n                if (typeof Blob !== 'undefined' && fileBody instanceof Blob) {\n                    body = new FormData();\n                    body.append('cacheControl', options.cacheControl);\n                    body.append('', fileBody);\n                }\n                else if (typeof FormData !== 'undefined' && fileBody instanceof FormData) {\n                    body = fileBody;\n                    body.append('cacheControl', options.cacheControl);\n                }\n                else {\n                    body = fileBody;\n                    headers['cache-control'] = `max-age=${options.cacheControl}`;\n                    headers['content-type'] = options.contentType;\n                }\n                const cleanPath = this._removeEmptyFolders(path);\n                const _path = this._getFinalPath(cleanPath);\n                const res = yield this.fetch(`${this.url}/object/${_path}`, {\n                    method,\n                    body: body,\n                    headers,\n                });\n                if (res.ok) {\n                    return {\n                        data: { path: cleanPath },\n                        error: null,\n                    };\n                }\n                else {\n                    const error = yield res.json();\n                    return { data: null, error };\n                }\n            }\n            catch (error) {\n                if (isStorageError(error)) {\n                    return { data: null, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Uploads a file to an existing bucket.\n     *\n     * @param path The file path, including the file name. Should be of the format `folder/subfolder/filename.png`. The bucket must already exist before attempting to upload.\n     * @param fileBody The body of the file to be stored in the bucket.\n     */\n    upload(path, fileBody, fileOptions) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return this.uploadOrUpdate('POST', path, fileBody, fileOptions);\n        });\n    }\n    /**\n     * Replaces an existing file at the specified path with a new one.\n     *\n     * @param path The relative file path. Should be of the format `folder/subfolder/filename.png`. The bucket must already exist before attempting to update.\n     * @param fileBody The body of the file to be stored in the bucket.\n     */\n    update(path, fileBody, fileOptions) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return this.uploadOrUpdate('PUT', path, fileBody, fileOptions);\n        });\n    }\n    /**\n     * Moves an existing file to a new path in the same bucket.\n     *\n     * @param fromPath The original file path, including the current file name. For example `folder/image.png`.\n     * @param toPath The new file path, including the new file name. For example `folder/image-new.png`.\n     */\n    move(fromPath, toPath) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const data = yield post(this.fetch, `${this.url}/object/move`, { bucketId: this.bucketId, sourceKey: fromPath, destinationKey: toPath }, { headers: this.headers });\n                return { data, error: null };\n            }\n            catch (error) {\n                if (isStorageError(error)) {\n                    return { data: null, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Copies an existing file to a new path in the same bucket.\n     *\n     * @param fromPath The original file path, including the current file name. For example `folder/image.png`.\n     * @param toPath The new file path, including the new file name. For example `folder/image-copy.png`.\n     */\n    copy(fromPath, toPath) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const data = yield post(this.fetch, `${this.url}/object/copy`, { bucketId: this.bucketId, sourceKey: fromPath, destinationKey: toPath }, { headers: this.headers });\n                return { data: { path: data.Key }, error: null };\n            }\n            catch (error) {\n                if (isStorageError(error)) {\n                    return { data: null, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Creates a signed URL. Use a signed URL to share a file for a fixed amount of time.\n     *\n     * @param path The file path, including the current file name. For example `folder/image.png`.\n     * @param expiresIn The number of seconds until the signed URL expires. For example, `60` for a URL which is valid for one minute.\n     * @param options.download triggers the file as a download if set to true. Set this parameter as the name of the file if you want to trigger the download with a different filename.\n     */\n    createSignedUrl(path, expiresIn, options) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const _path = this._getFinalPath(path);\n                let data = yield post(this.fetch, `${this.url}/object/sign/${_path}`, { expiresIn }, { headers: this.headers });\n                const downloadQueryParam = (options === null || options === void 0 ? void 0 : options.download)\n                    ? `&download=${options.download === true ? '' : options.download}`\n                    : '';\n                const signedUrl = encodeURI(`${this.url}${data.signedURL}${downloadQueryParam}`);\n                data = { signedUrl };\n                return { data, error: null };\n            }\n            catch (error) {\n                if (isStorageError(error)) {\n                    return { data: null, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Creates multiple signed URLs. Use a signed URL to share a file for a fixed amount of time.\n     *\n     * @param paths The file paths to be downloaded, including the current file names. For example `['folder/image.png', 'folder2/image2.png']`.\n     * @param expiresIn The number of seconds until the signed URLs expire. For example, `60` for URLs which are valid for one minute.\n     * @param options.download triggers the file as a download if set to true. Set this parameter as the name of the file if you want to trigger the download with a different filename.\n     */\n    createSignedUrls(paths, expiresIn, options) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const data = yield post(this.fetch, `${this.url}/object/sign/${this.bucketId}`, { expiresIn, paths }, { headers: this.headers });\n                const downloadQueryParam = (options === null || options === void 0 ? void 0 : options.download)\n                    ? `&download=${options.download === true ? '' : options.download}`\n                    : '';\n                return {\n                    data: data.map((datum) => (Object.assign(Object.assign({}, datum), { signedUrl: datum.signedURL\n                            ? encodeURI(`${this.url}${datum.signedURL}${downloadQueryParam}`)\n                            : null }))),\n                    error: null,\n                };\n            }\n            catch (error) {\n                if (isStorageError(error)) {\n                    return { data: null, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Downloads a file.\n     *\n     * @param path The full path and file name of the file to be downloaded. For example `folder/image.png`.\n     */\n    download(path) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const _path = this._getFinalPath(path);\n                const res = yield get(this.fetch, `${this.url}/object/${_path}`, {\n                    headers: this.headers,\n                    noResolveJson: true,\n                });\n                const data = yield res.blob();\n                return { data, error: null };\n            }\n            catch (error) {\n                if (isStorageError(error)) {\n                    return { data: null, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Retrieves the URL for an asset in a public bucket.\n     * This function does not verify if the bucket is public. If a public URL is created for a bucket which is not public, you will not be able to download the asset.\n     *\n     * @param path The path and name of the file to generate the public URL for. For example `folder/image.png`.\n     * @param options.download triggers the file as a download if set to true. Set this parameter as the name of the file if you want to trigger the download with a different filename.\n     */\n    getPublicUrl(path, options) {\n        const _path = this._getFinalPath(path);\n        const downloadQueryParam = (options === null || options === void 0 ? void 0 : options.download)\n            ? `?download=${options.download === true ? '' : options.download}`\n            : '';\n        return {\n            data: { publicUrl: encodeURI(`${this.url}/object/public/${_path}${downloadQueryParam}`) },\n        };\n    }\n    /**\n     * Deletes files within the same bucket\n     *\n     * @param paths An array of files to delete, including the path and file name. For example [`'folder/image.png'`].\n     */\n    remove(paths) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const data = yield remove(this.fetch, `${this.url}/object/${this.bucketId}`, { prefixes: paths }, { headers: this.headers });\n                return { data, error: null };\n            }\n            catch (error) {\n                if (isStorageError(error)) {\n                    return { data: null, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Get file metadata\n     * @param id the file id to retrieve metadata\n     */\n    // async getMetadata(\n    //   id: string\n    // ): Promise<\n    //   | {\n    //       data: Metadata\n    //       error: null\n    //     }\n    //   | {\n    //       data: null\n    //       error: StorageError\n    //     }\n    // > {\n    //   try {\n    //     const data = await get(this.fetch, `${this.url}/metadata/${id}`, { headers: this.headers })\n    //     return { data, error: null }\n    //   } catch (error) {\n    //     if (isStorageError(error)) {\n    //       return { data: null, error }\n    //     }\n    //     throw error\n    //   }\n    // }\n    /**\n     * Update file metadata\n     * @param id the file id to update metadata\n     * @param meta the new file metadata\n     */\n    // async updateMetadata(\n    //   id: string,\n    //   meta: Metadata\n    // ): Promise<\n    //   | {\n    //       data: Metadata\n    //       error: null\n    //     }\n    //   | {\n    //       data: null\n    //       error: StorageError\n    //     }\n    // > {\n    //   try {\n    //     const data = await post(\n    //       this.fetch,\n    //       `${this.url}/metadata/${id}`,\n    //       { ...meta },\n    //       { headers: this.headers }\n    //     )\n    //     return { data, error: null }\n    //   } catch (error) {\n    //     if (isStorageError(error)) {\n    //       return { data: null, error }\n    //     }\n    //     throw error\n    //   }\n    // }\n    /**\n     * Lists all the files within a bucket.\n     * @param path The folder path.\n     */\n    list(path, options, parameters) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const body = Object.assign(Object.assign(Object.assign({}, DEFAULT_SEARCH_OPTIONS), options), { prefix: path || '' });\n                const data = yield post(this.fetch, `${this.url}/object/list/${this.bucketId}`, body, { headers: this.headers }, parameters);\n                return { data, error: null };\n            }\n            catch (error) {\n                if (isStorageError(error)) {\n                    return { data: null, error };\n                }\n                throw error;\n            }\n        });\n    }\n    _getFinalPath(path) {\n        return `${this.bucketId}/${path}`;\n    }\n    _removeEmptyFolders(path) {\n        return path.replace(/^\\/|\\/$/g, '').replace(/\\/+/g, '/');\n    }\n}\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { FunctionsClient } from '@supabase/functions-js';\nimport { PostgrestClient, } from '@supabase/postgrest-js';\nimport { RealtimeClient, } from '@supabase/realtime-js';\nimport { StorageClient as SupabaseStorageClient } from '@supabase/storage-js';\nimport { DEFAULT_HEADERS } from './lib/constants';\nimport { fetchWithAuth } from './lib/fetch';\nimport { stripTrailingSlash, applySettingDefaults } from './lib/helpers';\nimport { SupabaseAuthClient } from './lib/SupabaseAuthClient';\nconst DEFAULT_GLOBAL_OPTIONS = {\n    headers: DEFAULT_HEADERS,\n};\nconst DEFAULT_DB_OPTIONS = {\n    schema: 'public',\n};\nconst DEFAULT_AUTH_OPTIONS = {\n    autoRefreshToken: true,\n    persistSession: true,\n    detectSessionInUrl: true,\n};\nconst DEFAULT_REALTIME_OPTIONS = {};\n/**\n * Supabase Client.\n *\n * An isomorphic Javascript client for interacting with Postgres.\n */\nexport default class SupabaseClient {\n    /**\n     * Create a new client for use in the browser.\n     * @param supabaseUrl The unique Supabase URL which is supplied when you create a new project in your project dashboard.\n     * @param supabaseKey The unique Supabase Key which is supplied when you create a new project in your project dashboard.\n     * @param options.db.schema You can switch in between schemas. The schema needs to be on the list of exposed schemas inside Supabase.\n     * @param options.auth.autoRefreshToken Set to \"true\" if you want to automatically refresh the token before expiring.\n     * @param options.auth.persistSession Set to \"true\" if you want to automatically save the user session into local storage.\n     * @param options.auth.detectSessionInUrl Set to \"true\" if you want to automatically detects OAuth grants in the URL and signs in the user.\n     * @param options.realtime Options passed along to realtime-js constructor.\n     * @param options.global.fetch A custom fetch implementation.\n     * @param options.global.headers Any additional headers to send with each network request.\n     */\n    constructor(supabaseUrl, supabaseKey, options) {\n        var _a, _b, _c, _d, _e, _f, _g, _h;\n        this.supabaseUrl = supabaseUrl;\n        this.supabaseKey = supabaseKey;\n        if (!supabaseUrl)\n            throw new Error('supabaseUrl is required.');\n        if (!supabaseKey)\n            throw new Error('supabaseKey is required.');\n        const _supabaseUrl = stripTrailingSlash(supabaseUrl);\n        this.realtimeUrl = `${_supabaseUrl}/realtime/v1`.replace(/^http/i, 'ws');\n        this.authUrl = `${_supabaseUrl}/auth/v1`;\n        this.storageUrl = `${_supabaseUrl}/storage/v1`;\n        const isPlatform = _supabaseUrl.match(/(supabase\\.co)|(supabase\\.in)/);\n        if (isPlatform) {\n            const urlParts = _supabaseUrl.split('.');\n            this.functionsUrl = `${urlParts[0]}.functions.${urlParts[1]}.${urlParts[2]}`;\n        }\n        else {\n            this.functionsUrl = `${_supabaseUrl}/functions/v1`;\n        }\n        // default storage key uses the supabase project ref as a namespace\n        const defaultStorageKey = `sb-${new URL(this.authUrl).hostname.split('.')[0]}-auth-token`;\n        const DEFAULTS = {\n            db: DEFAULT_DB_OPTIONS,\n            realtime: DEFAULT_REALTIME_OPTIONS,\n            auth: Object.assign(Object.assign({}, DEFAULT_AUTH_OPTIONS), { storageKey: defaultStorageKey }),\n            global: DEFAULT_GLOBAL_OPTIONS,\n        };\n        const settings = applySettingDefaults(options !== null && options !== void 0 ? options : {}, DEFAULTS);\n        this.storageKey = (_b = (_a = settings.auth) === null || _a === void 0 ? void 0 : _a.storageKey) !== null && _b !== void 0 ? _b : '';\n        this.headers = (_d = (_c = settings.global) === null || _c === void 0 ? void 0 : _c.headers) !== null && _d !== void 0 ? _d : {};\n        this.auth = this._initSupabaseAuthClient((_e = settings.auth) !== null && _e !== void 0 ? _e : {}, this.headers, (_f = settings.global) === null || _f === void 0 ? void 0 : _f.fetch);\n        this.fetch = fetchWithAuth(supabaseKey, this._getAccessToken.bind(this), (_g = settings.global) === null || _g === void 0 ? void 0 : _g.fetch);\n        this.realtime = this._initRealtimeClient(Object.assign({ headers: this.headers }, settings.realtime));\n        this.rest = new PostgrestClient(`${_supabaseUrl}/rest/v1`, {\n            headers: this.headers,\n            schema: (_h = settings.db) === null || _h === void 0 ? void 0 : _h.schema,\n            fetch: this.fetch,\n        });\n        this._listenForAuthEvents();\n    }\n    /**\n     * Supabase Functions allows you to deploy and invoke edge functions.\n     */\n    get functions() {\n        return new FunctionsClient(this.functionsUrl, {\n            headers: this.headers,\n            customFetch: this.fetch,\n        });\n    }\n    /**\n     * Supabase Storage allows you to manage user-generated content, such as photos or videos.\n     */\n    get storage() {\n        return new SupabaseStorageClient(this.storageUrl, this.headers, this.fetch);\n    }\n    from(relation) {\n        return this.rest.from(relation);\n    }\n    /**\n     * Perform a function call.\n     *\n     * @param fn  The function name to call.\n     * @param args  The parameters to pass to the function call.\n     * @param options.head   When set to true, no data will be returned.\n     * @param options.count  Count algorithm to use to count rows in a table.\n     *\n     */\n    rpc(fn, args = {}, options) {\n        return this.rest.rpc(fn, args, options);\n    }\n    /**\n     * Creates a Realtime channel with Broadcast, Presence, and Postgres Changes.\n     *\n     * @param {string} name - The name of the Realtime channel.\n     * @param {Object} opts - The options to pass to the Realtime channel.\n     *\n     */\n    channel(name, opts = { config: {} }) {\n        return this.realtime.channel(name, opts);\n    }\n    /**\n     * Returns all Realtime channels.\n     */\n    getChannels() {\n        return this.realtime.getChannels();\n    }\n    /**\n     * Unsubscribes and removes Realtime channel from Realtime client.\n     *\n     * @param {RealtimeChannel} channel - The name of the Realtime channel.\n     *\n     */\n    removeChannel(channel) {\n        return this.realtime.removeChannel(channel);\n    }\n    /**\n     * Unsubscribes and removes all Realtime channels from Realtime client.\n     */\n    removeAllChannels() {\n        return this.realtime.removeAllChannels();\n    }\n    _getAccessToken() {\n        var _a, _b;\n        return __awaiter(this, void 0, void 0, function* () {\n            const { data } = yield this.auth.getSession();\n            return (_b = (_a = data.session) === null || _a === void 0 ? void 0 : _a.access_token) !== null && _b !== void 0 ? _b : null;\n        });\n    }\n    _initSupabaseAuthClient({ autoRefreshToken, persistSession, detectSessionInUrl, storage, storageKey, }, headers, fetch) {\n        const authHeaders = {\n            Authorization: `Bearer ${this.supabaseKey}`,\n            apikey: `${this.supabaseKey}`,\n        };\n        return new SupabaseAuthClient({\n            url: this.authUrl,\n            headers: Object.assign(Object.assign({}, authHeaders), headers),\n            storageKey: storageKey,\n            autoRefreshToken,\n            persistSession,\n            detectSessionInUrl,\n            storage,\n            fetch,\n        });\n    }\n    _initRealtimeClient(options) {\n        return new RealtimeClient(this.realtimeUrl, Object.assign(Object.assign({}, options), { params: Object.assign({ apikey: this.supabaseKey }, options === null || options === void 0 ? void 0 : options.params) }));\n    }\n    _listenForAuthEvents() {\n        let data = this.auth.onAuthStateChange((event, session) => {\n            this._handleTokenChanged(event, session === null || session === void 0 ? void 0 : session.access_token, 'CLIENT');\n        });\n        return data;\n    }\n    _handleTokenChanged(event, token, source) {\n        if ((event === 'TOKEN_REFRESHED' || event === 'SIGNED_IN') &&\n            this.changedAccessToken !== token) {\n            // Token has changed\n            this.realtime.setAuth(token !== null && token !== void 0 ? token : null);\n            this.changedAccessToken = token;\n        }\n        else if (event === 'SIGNED_OUT' || event === 'USER_DELETED') {\n            // Token is removed\n            this.realtime.setAuth(this.supabaseKey);\n            if (source == 'STORAGE')\n                this.auth.signOut();\n        }\n    }\n}\n","import SupabaseClient from './SupabaseClient';\nexport * from '@supabase/gotrue-js';\nexport { FunctionsHttpError, FunctionsFetchError, FunctionsRelayError, FunctionsError, } from '@supabase/functions-js';\nexport * from '@supabase/realtime-js';\nexport { default as SupabaseClient } from './SupabaseClient';\n/**\n * Creates a new Supabase Client.\n */\nexport const createClient = (supabaseUrl, supabaseKey, options) => {\n    return new SupabaseClient(supabaseUrl, supabaseKey, options);\n};\n","import { GoTrueClient } from '@supabase/gotrue-js';\nexport class SupabaseAuthClient extends GoTrueClient {\n    constructor(options) {\n        super(options);\n    }\n}\n","// constants.ts\nimport { version } from './version';\nexport const DEFAULT_HEADERS = { 'X-Client-Info': `supabase-js/${version}` };\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport crossFetch, { Headers as CrossFetchHeaders } from 'cross-fetch';\nexport const resolveFetch = (customFetch) => {\n    let _fetch;\n    if (customFetch) {\n        _fetch = customFetch;\n    }\n    else if (typeof fetch === 'undefined') {\n        _fetch = crossFetch;\n    }\n    else {\n        _fetch = fetch;\n    }\n    return (...args) => _fetch(...args);\n};\nexport const resolveHeadersConstructor = () => {\n    if (typeof Headers === 'undefined') {\n        return CrossFetchHeaders;\n    }\n    return Headers;\n};\nexport const fetchWithAuth = (supabaseKey, getAccessToken, customFetch) => {\n    const fetch = resolveFetch(customFetch);\n    const HeadersConstructor = resolveHeadersConstructor();\n    return (input, init) => __awaiter(void 0, void 0, void 0, function* () {\n        var _a;\n        const accessToken = (_a = (yield getAccessToken())) !== null && _a !== void 0 ? _a : supabaseKey;\n        let headers = new HeadersConstructor(init === null || init === void 0 ? void 0 : init.headers);\n        if (!headers.has('apikey')) {\n            headers.set('apikey', supabaseKey);\n        }\n        if (!headers.has('Authorization')) {\n            headers.set('Authorization', `Bearer ${accessToken}`);\n        }\n        return fetch(input, Object.assign(Object.assign({}, init), { headers }));\n    });\n};\n","export function uuid() {\n    return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n        var r = (Math.random() * 16) | 0, v = c == 'x' ? r : (r & 0x3) | 0x8;\n        return v.toString(16);\n    });\n}\nexport function stripTrailingSlash(url) {\n    return url.replace(/\\/$/, '');\n}\nexport const isBrowser = () => typeof window !== 'undefined';\nexport function applySettingDefaults(options, defaults) {\n    const { db: dbOptions, auth: authOptions, realtime: realtimeOptions, global: globalOptions, } = options;\n    const { db: DEFAULT_DB_OPTIONS, auth: DEFAULT_AUTH_OPTIONS, realtime: DEFAULT_REALTIME_OPTIONS, global: DEFAULT_GLOBAL_OPTIONS, } = defaults;\n    return {\n        db: Object.assign(Object.assign({}, DEFAULT_DB_OPTIONS), dbOptions),\n        auth: Object.assign(Object.assign({}, DEFAULT_AUTH_OPTIONS), authOptions),\n        realtime: Object.assign(Object.assign({}, DEFAULT_REALTIME_OPTIONS), realtimeOptions),\n        global: Object.assign(Object.assign({}, DEFAULT_GLOBAL_OPTIONS), globalOptions),\n    };\n}\n","export const version = '2.1.1';\n","var global = typeof self !== 'undefined' ? self : this;\nvar __self__ = (function () {\nfunction F() {\nthis.fetch = false;\nthis.DOMException = global.DOMException\n}\nF.prototype = global;\nreturn new F();\n})();\n(function(self) {\n\nvar irrelevant = (function (exports) {\n\n  var support = {\n    searchParams: 'URLSearchParams' in self,\n    iterable: 'Symbol' in self && 'iterator' in Symbol,\n    blob:\n      'FileReader' in self &&\n      'Blob' in self &&\n      (function() {\n        try {\n          new Blob();\n          return true\n        } catch (e) {\n          return false\n        }\n      })(),\n    formData: 'FormData' in self,\n    arrayBuffer: 'ArrayBuffer' in self\n  };\n\n  function isDataView(obj) {\n    return obj && DataView.prototype.isPrototypeOf(obj)\n  }\n\n  if (support.arrayBuffer) {\n    var viewClasses = [\n      '[object Int8Array]',\n      '[object Uint8Array]',\n      '[object Uint8ClampedArray]',\n      '[object Int16Array]',\n      '[object Uint16Array]',\n      '[object Int32Array]',\n      '[object Uint32Array]',\n      '[object Float32Array]',\n      '[object Float64Array]'\n    ];\n\n    var isArrayBufferView =\n      ArrayBuffer.isView ||\n      function(obj) {\n        return obj && viewClasses.indexOf(Object.prototype.toString.call(obj)) > -1\n      };\n  }\n\n  function normalizeName(name) {\n    if (typeof name !== 'string') {\n      name = String(name);\n    }\n    if (/[^a-z0-9\\-#$%&'*+.^_`|~]/i.test(name)) {\n      throw new TypeError('Invalid character in header field name')\n    }\n    return name.toLowerCase()\n  }\n\n  function normalizeValue(value) {\n    if (typeof value !== 'string') {\n      value = String(value);\n    }\n    return value\n  }\n\n  // Build a destructive iterator for the value list\n  function iteratorFor(items) {\n    var iterator = {\n      next: function() {\n        var value = items.shift();\n        return {done: value === undefined, value: value}\n      }\n    };\n\n    if (support.iterable) {\n      iterator[Symbol.iterator] = function() {\n        return iterator\n      };\n    }\n\n    return iterator\n  }\n\n  function Headers(headers) {\n    this.map = {};\n\n    if (headers instanceof Headers) {\n      headers.forEach(function(value, name) {\n        this.append(name, value);\n      }, this);\n    } else if (Array.isArray(headers)) {\n      headers.forEach(function(header) {\n        this.append(header[0], header[1]);\n      }, this);\n    } else if (headers) {\n      Object.getOwnPropertyNames(headers).forEach(function(name) {\n        this.append(name, headers[name]);\n      }, this);\n    }\n  }\n\n  Headers.prototype.append = function(name, value) {\n    name = normalizeName(name);\n    value = normalizeValue(value);\n    var oldValue = this.map[name];\n    this.map[name] = oldValue ? oldValue + ', ' + value : value;\n  };\n\n  Headers.prototype['delete'] = function(name) {\n    delete this.map[normalizeName(name)];\n  };\n\n  Headers.prototype.get = function(name) {\n    name = normalizeName(name);\n    return this.has(name) ? this.map[name] : null\n  };\n\n  Headers.prototype.has = function(name) {\n    return this.map.hasOwnProperty(normalizeName(name))\n  };\n\n  Headers.prototype.set = function(name, value) {\n    this.map[normalizeName(name)] = normalizeValue(value);\n  };\n\n  Headers.prototype.forEach = function(callback, thisArg) {\n    for (var name in this.map) {\n      if (this.map.hasOwnProperty(name)) {\n        callback.call(thisArg, this.map[name], name, this);\n      }\n    }\n  };\n\n  Headers.prototype.keys = function() {\n    var items = [];\n    this.forEach(function(value, name) {\n      items.push(name);\n    });\n    return iteratorFor(items)\n  };\n\n  Headers.prototype.values = function() {\n    var items = [];\n    this.forEach(function(value) {\n      items.push(value);\n    });\n    return iteratorFor(items)\n  };\n\n  Headers.prototype.entries = function() {\n    var items = [];\n    this.forEach(function(value, name) {\n      items.push([name, value]);\n    });\n    return iteratorFor(items)\n  };\n\n  if (support.iterable) {\n    Headers.prototype[Symbol.iterator] = Headers.prototype.entries;\n  }\n\n  function consumed(body) {\n    if (body.bodyUsed) {\n      return Promise.reject(new TypeError('Already read'))\n    }\n    body.bodyUsed = true;\n  }\n\n  function fileReaderReady(reader) {\n    return new Promise(function(resolve, reject) {\n      reader.onload = function() {\n        resolve(reader.result);\n      };\n      reader.onerror = function() {\n        reject(reader.error);\n      };\n    })\n  }\n\n  function readBlobAsArrayBuffer(blob) {\n    var reader = new FileReader();\n    var promise = fileReaderReady(reader);\n    reader.readAsArrayBuffer(blob);\n    return promise\n  }\n\n  function readBlobAsText(blob) {\n    var reader = new FileReader();\n    var promise = fileReaderReady(reader);\n    reader.readAsText(blob);\n    return promise\n  }\n\n  function readArrayBufferAsText(buf) {\n    var view = new Uint8Array(buf);\n    var chars = new Array(view.length);\n\n    for (var i = 0; i < view.length; i++) {\n      chars[i] = String.fromCharCode(view[i]);\n    }\n    return chars.join('')\n  }\n\n  function bufferClone(buf) {\n    if (buf.slice) {\n      return buf.slice(0)\n    } else {\n      var view = new Uint8Array(buf.byteLength);\n      view.set(new Uint8Array(buf));\n      return view.buffer\n    }\n  }\n\n  function Body() {\n    this.bodyUsed = false;\n\n    this._initBody = function(body) {\n      this._bodyInit = body;\n      if (!body) {\n        this._bodyText = '';\n      } else if (typeof body === 'string') {\n        this._bodyText = body;\n      } else if (support.blob && Blob.prototype.isPrototypeOf(body)) {\n        this._bodyBlob = body;\n      } else if (support.formData && FormData.prototype.isPrototypeOf(body)) {\n        this._bodyFormData = body;\n      } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n        this._bodyText = body.toString();\n      } else if (support.arrayBuffer && support.blob && isDataView(body)) {\n        this._bodyArrayBuffer = bufferClone(body.buffer);\n        // IE 10-11 can't handle a DataView body.\n        this._bodyInit = new Blob([this._bodyArrayBuffer]);\n      } else if (support.arrayBuffer && (ArrayBuffer.prototype.isPrototypeOf(body) || isArrayBufferView(body))) {\n        this._bodyArrayBuffer = bufferClone(body);\n      } else {\n        this._bodyText = body = Object.prototype.toString.call(body);\n      }\n\n      if (!this.headers.get('content-type')) {\n        if (typeof body === 'string') {\n          this.headers.set('content-type', 'text/plain;charset=UTF-8');\n        } else if (this._bodyBlob && this._bodyBlob.type) {\n          this.headers.set('content-type', this._bodyBlob.type);\n        } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n          this.headers.set('content-type', 'application/x-www-form-urlencoded;charset=UTF-8');\n        }\n      }\n    };\n\n    if (support.blob) {\n      this.blob = function() {\n        var rejected = consumed(this);\n        if (rejected) {\n          return rejected\n        }\n\n        if (this._bodyBlob) {\n          return Promise.resolve(this._bodyBlob)\n        } else if (this._bodyArrayBuffer) {\n          return Promise.resolve(new Blob([this._bodyArrayBuffer]))\n        } else if (this._bodyFormData) {\n          throw new Error('could not read FormData body as blob')\n        } else {\n          return Promise.resolve(new Blob([this._bodyText]))\n        }\n      };\n\n      this.arrayBuffer = function() {\n        if (this._bodyArrayBuffer) {\n          return consumed(this) || Promise.resolve(this._bodyArrayBuffer)\n        } else {\n          return this.blob().then(readBlobAsArrayBuffer)\n        }\n      };\n    }\n\n    this.text = function() {\n      var rejected = consumed(this);\n      if (rejected) {\n        return rejected\n      }\n\n      if (this._bodyBlob) {\n        return readBlobAsText(this._bodyBlob)\n      } else if (this._bodyArrayBuffer) {\n        return Promise.resolve(readArrayBufferAsText(this._bodyArrayBuffer))\n      } else if (this._bodyFormData) {\n        throw new Error('could not read FormData body as text')\n      } else {\n        return Promise.resolve(this._bodyText)\n      }\n    };\n\n    if (support.formData) {\n      this.formData = function() {\n        return this.text().then(decode)\n      };\n    }\n\n    this.json = function() {\n      return this.text().then(JSON.parse)\n    };\n\n    return this\n  }\n\n  // HTTP methods whose capitalization should be normalized\n  var methods = ['DELETE', 'GET', 'HEAD', 'OPTIONS', 'POST', 'PUT'];\n\n  function normalizeMethod(method) {\n    var upcased = method.toUpperCase();\n    return methods.indexOf(upcased) > -1 ? upcased : method\n  }\n\n  function Request(input, options) {\n    options = options || {};\n    var body = options.body;\n\n    if (input instanceof Request) {\n      if (input.bodyUsed) {\n        throw new TypeError('Already read')\n      }\n      this.url = input.url;\n      this.credentials = input.credentials;\n      if (!options.headers) {\n        this.headers = new Headers(input.headers);\n      }\n      this.method = input.method;\n      this.mode = input.mode;\n      this.signal = input.signal;\n      if (!body && input._bodyInit != null) {\n        body = input._bodyInit;\n        input.bodyUsed = true;\n      }\n    } else {\n      this.url = String(input);\n    }\n\n    this.credentials = options.credentials || this.credentials || 'same-origin';\n    if (options.headers || !this.headers) {\n      this.headers = new Headers(options.headers);\n    }\n    this.method = normalizeMethod(options.method || this.method || 'GET');\n    this.mode = options.mode || this.mode || null;\n    this.signal = options.signal || this.signal;\n    this.referrer = null;\n\n    if ((this.method === 'GET' || this.method === 'HEAD') && body) {\n      throw new TypeError('Body not allowed for GET or HEAD requests')\n    }\n    this._initBody(body);\n  }\n\n  Request.prototype.clone = function() {\n    return new Request(this, {body: this._bodyInit})\n  };\n\n  function decode(body) {\n    var form = new FormData();\n    body\n      .trim()\n      .split('&')\n      .forEach(function(bytes) {\n        if (bytes) {\n          var split = bytes.split('=');\n          var name = split.shift().replace(/\\+/g, ' ');\n          var value = split.join('=').replace(/\\+/g, ' ');\n          form.append(decodeURIComponent(name), decodeURIComponent(value));\n        }\n      });\n    return form\n  }\n\n  function parseHeaders(rawHeaders) {\n    var headers = new Headers();\n    // Replace instances of \\r\\n and \\n followed by at least one space or horizontal tab with a space\n    // https://tools.ietf.org/html/rfc7230#section-3.2\n    var preProcessedHeaders = rawHeaders.replace(/\\r?\\n[\\t ]+/g, ' ');\n    preProcessedHeaders.split(/\\r?\\n/).forEach(function(line) {\n      var parts = line.split(':');\n      var key = parts.shift().trim();\n      if (key) {\n        var value = parts.join(':').trim();\n        headers.append(key, value);\n      }\n    });\n    return headers\n  }\n\n  Body.call(Request.prototype);\n\n  function Response(bodyInit, options) {\n    if (!options) {\n      options = {};\n    }\n\n    this.type = 'default';\n    this.status = options.status === undefined ? 200 : options.status;\n    this.ok = this.status >= 200 && this.status < 300;\n    this.statusText = 'statusText' in options ? options.statusText : 'OK';\n    this.headers = new Headers(options.headers);\n    this.url = options.url || '';\n    this._initBody(bodyInit);\n  }\n\n  Body.call(Response.prototype);\n\n  Response.prototype.clone = function() {\n    return new Response(this._bodyInit, {\n      status: this.status,\n      statusText: this.statusText,\n      headers: new Headers(this.headers),\n      url: this.url\n    })\n  };\n\n  Response.error = function() {\n    var response = new Response(null, {status: 0, statusText: ''});\n    response.type = 'error';\n    return response\n  };\n\n  var redirectStatuses = [301, 302, 303, 307, 308];\n\n  Response.redirect = function(url, status) {\n    if (redirectStatuses.indexOf(status) === -1) {\n      throw new RangeError('Invalid status code')\n    }\n\n    return new Response(null, {status: status, headers: {location: url}})\n  };\n\n  exports.DOMException = self.DOMException;\n  try {\n    new exports.DOMException();\n  } catch (err) {\n    exports.DOMException = function(message, name) {\n      this.message = message;\n      this.name = name;\n      var error = Error(message);\n      this.stack = error.stack;\n    };\n    exports.DOMException.prototype = Object.create(Error.prototype);\n    exports.DOMException.prototype.constructor = exports.DOMException;\n  }\n\n  function fetch(input, init) {\n    return new Promise(function(resolve, reject) {\n      var request = new Request(input, init);\n\n      if (request.signal && request.signal.aborted) {\n        return reject(new exports.DOMException('Aborted', 'AbortError'))\n      }\n\n      var xhr = new XMLHttpRequest();\n\n      function abortXhr() {\n        xhr.abort();\n      }\n\n      xhr.onload = function() {\n        var options = {\n          status: xhr.status,\n          statusText: xhr.statusText,\n          headers: parseHeaders(xhr.getAllResponseHeaders() || '')\n        };\n        options.url = 'responseURL' in xhr ? xhr.responseURL : options.headers.get('X-Request-URL');\n        var body = 'response' in xhr ? xhr.response : xhr.responseText;\n        resolve(new Response(body, options));\n      };\n\n      xhr.onerror = function() {\n        reject(new TypeError('Network request failed'));\n      };\n\n      xhr.ontimeout = function() {\n        reject(new TypeError('Network request failed'));\n      };\n\n      xhr.onabort = function() {\n        reject(new exports.DOMException('Aborted', 'AbortError'));\n      };\n\n      xhr.open(request.method, request.url, true);\n\n      if (request.credentials === 'include') {\n        xhr.withCredentials = true;\n      } else if (request.credentials === 'omit') {\n        xhr.withCredentials = false;\n      }\n\n      if ('responseType' in xhr && support.blob) {\n        xhr.responseType = 'blob';\n      }\n\n      request.headers.forEach(function(value, name) {\n        xhr.setRequestHeader(name, value);\n      });\n\n      if (request.signal) {\n        request.signal.addEventListener('abort', abortXhr);\n\n        xhr.onreadystatechange = function() {\n          // DONE (success or failure)\n          if (xhr.readyState === 4) {\n            request.signal.removeEventListener('abort', abortXhr);\n          }\n        };\n      }\n\n      xhr.send(typeof request._bodyInit === 'undefined' ? null : request._bodyInit);\n    })\n  }\n\n  fetch.polyfill = true;\n\n  if (!self.fetch) {\n    self.fetch = fetch;\n    self.Headers = Headers;\n    self.Request = Request;\n    self.Response = Response;\n  }\n\n  exports.Headers = Headers;\n  exports.Request = Request;\n  exports.Response = Response;\n  exports.fetch = fetch;\n\n  Object.defineProperty(exports, '__esModule', { value: true });\n\n  return exports;\n\n})({});\n})(__self__);\n__self__.fetch.ponyfill = true;\n// Remove \"polyfill\" property added by whatwg-fetch\ndelete __self__.fetch.polyfill;\n// Choose between native implementation (global) or custom implementation (__self__)\n// var ctx = global.fetch ? global : __self__;\nvar ctx = __self__; // this line disable service worker support temporarily\nexports = ctx.fetch // To enable: import fetch from 'cross-fetch'\nexports.default = ctx.fetch // For TypeScript consumers without esModuleInterop.\nexports.fetch = ctx.fetch // To enable: import {fetch} from 'cross-fetch'\nexports.Headers = ctx.Headers\nexports.Request = ctx.Request\nexports.Response = ctx.Response\nmodule.exports = exports\n","var naiveFallback = function () {\n\tif (typeof self === \"object\" && self) return self;\n\tif (typeof window === \"object\" && window) return window;\n\tthrow new Error(\"Unable to resolve global `this`\");\n};\n\nmodule.exports = (function () {\n\tif (this) return this;\n\n\t// Unexpected strict mode (may happen if e.g. bundled into ESM module)\n\n\t// Fallback to standard globalThis if available\n\tif (typeof globalThis === \"object\" && globalThis) return globalThis;\n\n\t// Thanks @mathiasbynens -> https://mathiasbynens.be/notes/globalthis\n\t// In all ES5+ engines global object inherits from Object.prototype\n\t// (if you approached one that doesn't please report)\n\ttry {\n\t\tObject.defineProperty(Object.prototype, \"__global__\", {\n\t\t\tget: function () { return this; },\n\t\t\tconfigurable: true\n\t\t});\n\t} catch (error) {\n\t\t// Unfortunate case of updates to Object.prototype being restricted\n\t\t// via preventExtensions, seal or freeze\n\t\treturn naiveFallback();\n\t}\n\ttry {\n\t\t// Safari case (window.__global__ works, but __global__ does not)\n\t\tif (!__global__) return naiveFallback();\n\t\treturn __global__;\n\t} finally {\n\t\tdelete Object.prototype.__global__;\n\t}\n})();\n","var _globalThis;\nif (typeof globalThis === 'object') {\n\t_globalThis = globalThis;\n} else {\n\ttry {\n\t\t_globalThis = require('es5-ext/global');\n\t} catch (error) {\n\t} finally {\n\t\tif (!_globalThis && typeof window !== 'undefined') { _globalThis = window; }\n\t\tif (!_globalThis) { throw new Error('Could not determine global this'); }\n\t}\n}\n\nvar NativeWebSocket = _globalThis.WebSocket || _globalThis.MozWebSocket;\nvar websocket_version = require('./version');\n\n\n/**\n * Expose a W3C WebSocket class with just one or two arguments.\n */\nfunction W3CWebSocket(uri, protocols) {\n\tvar native_instance;\n\n\tif (protocols) {\n\t\tnative_instance = new NativeWebSocket(uri, protocols);\n\t}\n\telse {\n\t\tnative_instance = new NativeWebSocket(uri);\n\t}\n\n\t/**\n\t * 'native_instance' is an instance of nativeWebSocket (the browser's WebSocket\n\t * class). Since it is an Object it will be returned as it is when creating an\n\t * instance of W3CWebSocket via 'new W3CWebSocket()'.\n\t *\n\t * ECMAScript 5: http://bclary.com/2004/11/07/#a-13.2.2\n\t */\n\treturn native_instance;\n}\nif (NativeWebSocket) {\n\t['CONNECTING', 'OPEN', 'CLOSING', 'CLOSED'].forEach(function(prop) {\n\t\tObject.defineProperty(W3CWebSocket, prop, {\n\t\t\tget: function() { return NativeWebSocket[prop]; }\n\t\t});\n\t});\n}\n\n/**\n * Module exports.\n */\nmodule.exports = {\n    'w3cwebsocket' : NativeWebSocket ? W3CWebSocket : null,\n    'version'      : websocket_version\n};\n","module.exports = require('../package.json').version;\n","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nexport default function _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}"],"names":["__awaiter","thisArg","_arguments","P","generator","adopt","value","resolve","Promise","reject","fulfilled","step","next","e","rejected","result","done","then","apply","resolveFetch","FunctionsFetchError","FunctionsHttpError","FunctionsRelayError","FunctionsClient","constructor","url","headers","customFetch","fetch","setAuth","token","Authorization","invoke","functionName","invokeOptions","_a","body","functionArgs","_headers","Object","prototype","hasOwnProperty","call","Blob","ArrayBuffer","FormData","JSON","stringify","response","method","assign","catch","fetchError","isRelayError","get","ok","responseType","split","trim","data","json","blob","formData","text","error","_fetch","args","FunctionsError","Error","message","name","context","__rest","s","t","p","indexOf","getOwnPropertySymbols","i","length","propertyIsEnumerable","_generateLinkResponse","_request","_userResponse","isAuthError","GoTrueAdminApi","mfa","listFactors","_listFactors","bind","deleteFactor","_deleteFactor","signOut","jwt","noResolveJson","inviteUserByEmail","email","options","redirectTo","xform","user","generateLink","params","rest","new_email","newEmail","properties","createUser","attributes","listUsers","users","getUserById","uid","updateUserById","deleteUser","id","userId","DEFAULT_HEADERS","EXPIRY_MARGIN","GOTRUE_URL","NETWORK_FAILURE","STORAGE_KEY","AuthImplicitGrantRedirectError","AuthInvalidCredentialsError","AuthRetryableFetchError","AuthSessionMissingError","AuthUnknownError","isAuthApiError","_sessionResponse","_ssoResponse","Deferred","getItemAsync","getParameterByName","isBrowser","removeItemAsync","setItemAsync","uuid","decodeJWTPayload","localStorageAdapter","polyfillGlobalThis","DEFAULT_OPTIONS","storageKey","autoRefreshToken","persistSession","detectSessionInUrl","GoTrueClient","stateChangeEmitters","Map","networkRetries","refreshingDeferred","initializePromise","settings","inMemorySession","storage","admin","initialize","verify","_verify","enroll","_enroll","unenroll","_unenroll","challenge","_challenge","challengeAndVerify","_challengeAndVerify","getAuthenticatorAssuranceLevel","_getAuthenticatorAssuranceLevel","_initialize","_isImplicitGrantFlow","_getSessionFromUrl","_removeSession","session","redirectType","_saveSession","_notifyAllSubscribers","_recoverAndRefresh","_handleVisibilityChange","signUp","credentials","_b","res","password","emailRedirectTo","gotrue_meta_security","captcha_token","captchaToken","phone","signInWithPassword","signInWithOAuth","_c","_handleProviderSignIn","provider","scopes","queryParams","signInWithOtp","_d","create_user","shouldCreateUser","verifyOtp","access_token","signInWithSSO","provider_id","providerId","domain","redirect_to","undefined","skip_http_redirect","getSession","currentSession","maybeSession","_isValidSession","hasExpired","expires_at","Date","now","_callRefreshToken","refresh_token","getUser","updateUser","sessionData","sessionError","userError","_decodeJWT","setSession","timeNow","expiresAt","payload","exp","_refreshAccessToken","token_type","expires_in","refreshSession","error_description","error_code","code","provider_token","provider_refresh_token","Math","round","parseInt","window","location","hash","Boolean","accessToken","status","onAuthStateChange","callback","subscription","unsubscribe","delete","set","resetPasswordForEmail","refreshToken","isValidSession","_getUrlForProvider","href","Infinity","console","log","MAX_RETRIES","refreshTokenTimer","clearTimeout","setTimeout","pow","RETRY_INTERVAL","err","promise","event","forEach","x","expiresIn","refreshDurationBeforeExpires","_startAutoRefreshToken","_persistSession","unref","addEventListener","document","visibilityState","urlParams","encodeURIComponent","push","query","URLSearchParams","toString","join","factorId","friendly_name","friendlyName","factor_type","factorType","issuer","totp","qr_code","challenge_id","challengeId","challengeData","challengeError","factors","filter","factor","all","currentLevel","nextLevel","currentAuthenticationMethods","aal","verifiedFactors","amr","version","AUDIENCE","AuthError","__isAuthError","AuthApiError","toJSON","originalError","CustomAuthError","details","looksLikeFetchResponse","_getErrorMessage","msg","handleError","NETWORK_ERROR_CODES","includes","_getRequestParams","parameters","fetcher","qs","queryString","keys","_handleRequest","hasSession","action_link","email_otp","hashed_token","verification_type","replace","c","r","random","v","regex","RegExp","results","exec","decodeURIComponent","maybeResponse","key","setItem","getItem","parse","removeItem","decodeBase64URL","atob","map","charCodeAt","slice","ReferenceError","Buffer","from","promiseConstructor","rej","parts","base64Url","globalThis","localStorage","defineProperty","configurable","__magic__","self","crossFetch","PostgrestBuilder","builder","shouldThrowOnError","schema","signal","allowEmpty","throwOnError","onfulfilled","onrejected","count","statusText","countHeader","match","contentRange","postgrestResponse","hint","PostgrestQueryBuilder","PostgrestFilterBuilder","PostgrestClient","relation","URL","rpc","fn","head","entries","searchParams","append","PostgrestTransformBuilder","eq","column","neq","gt","gte","lt","lte","like","pattern","ilike","is","in","values","cleanedValues","test","contains","Array","isArray","containedBy","rangeGt","range","rangeGte","rangeLt","rangeLte","rangeAdjacent","overlaps","textSearch","config","type","typePart","configPart","not","operator","or","filters","foreignTable","select","columns","quoted","cleanedColumns","insert","prefersHeaders","unshift","reduce","acc","concat","uniqueColumns","Set","upsert","onConflict","ignoreDuplicates","update","order","ascending","nullsFirst","existingOrder","limit","to","keyOffset","keyLimit","abortSignal","single","maybeSingle","csv","geojson","explain","analyze","verbose","buffers","wal","format","forMediatype","rollback","returns","default","CHANNEL_EVENTS","CHANNEL_STATES","Push","Timer","RealtimePresence","Transformers","REALTIME_POSTGRES_CHANGES_LISTEN_EVENT","REALTIME_LISTEN_TYPES","REALTIME_SUBSCRIBE_STATES","RealtimeChannel","topic","socket","bindings","state","closed","joinedOnce","pushBuffer","broadcast","ack","presence","timeout","joinPush","rejoinTimer","_rejoinUntilConnected","reconnectAfterMs","receive","joined","reset","pushEvent","send","_onClose","_joinRef","_remove","_onError","reason","_isLeaving","_isClosed","errored","scheduleTimeout","_isJoining","_on","reply","ref","_trigger","_replyEventName","subscribe","accessTokenPayload","postgres_changes","updateJoinPayload","_rejoin","serverPostgresFilters","clientPostgresBindings","bindingsLen","newPostgresBindings","clientPostgresBinding","table","serverPostgresFilter","presenceState","track","opts","untrack","on","_push","rateLimited","updatePayload","leaving","onClose","close","destroy","leavePush","leave","_canPush","trigger","startTimeout","_onMessage","_event","_ref","_isMember","typeLower","toLocaleLowerCase","events","handledPayload","_e","_f","bindId","bindEvent","ids","postgresChanges","commit_timestamp","errors","enrichedPayload","eventType","new","old","_getPayloadRecords","_isJoined","joining","binding","_off","isEqual","obj1","obj2","k","isConnected","_leaveOpenTopic","resend","records","convertChangeData","record","old_record","w3cwebsocket","VSN","TRANSPORTS","SOCKET_STATES","DEFAULT_TIMEOUT","WS_CLOSE_NORMAL","CONNECTION_STATE","Serializer","noop","RealtimeClient","endPoint","channels","transport","heartbeatIntervalMs","heartbeatTimer","pendingHeartbeatRef","logger","conn","sendBuffer","serializer","stateChangeCallbacks","open","eventsPerSecondLimitMs","inThrottle","websocket","eventsPerSecond","floor","tries","encode","decode","reconnectTimer","disconnect","connect","_endPointURL","binaryType","onopen","_onConnOpen","onerror","_onConnError","onmessage","_onConnMessage","onclose","_onConnClose","clearInterval","getChannels","removeChannel","channel","removeAllChannels","kind","connectionState","readyState","connecting","Connecting","Open","closing","Closing","Closed","chan","isThrottled","_throttle","_makeRef","newRef","dupChannel","find","_appendParams","vsn","rawMessage","_flushSendBuffer","setInterval","_sendHeartbeat","_triggerChanError","prefix","eventsPerSecondLimit","REALTIME_PRESENCE_LISTEN_EVENTS","pendingDiffs","joinRef","caller","onJoin","onLeave","onSync","diff","newState","syncState","syncDiff","inPendingSyncState","currentPresences","newPresences","leftPresences","currentState","cloneDeep","transformedState","transformState","joins","leaves","presences","newPresenceRefs","m","presence_ref","curPresenceRefs","joinedPresences","joinedPresenceRefs","curPresences","presenceRefsToRemove","obj","func","getOwnPropertyNames","metas","sent","timeoutTimer","receivedResp","recHooks","refEvent","_cancelRefEvent","_hasReceived","join_ref","_cancelTimeout","_matchReceive","h","HEADER_LENGTH","rawPayload","_binaryDecode","buffer","view","DataView","decoder","TextDecoder","_decodeBroadcast","topicSize","getUint8","eventSize","offset","byteLength","timerCalc","timer","PostgresTypes","skipTypes","rec_key","convertColumn","columnName","colType","convertCell","charAt","dataType","toArray","bool","toBoolean","float4","float8","int2","int4","int8","numeric","oid","toNumber","jsonb","toJson","timestamp","toTimestampString","abstime","date","daterange","int4range","int8range","money","reltime","time","timestamptz","timetz","tsrange","tstzrange","parsedValue","parseFloat","Number","isNaN","lastIdx","closeBrace","openBrace","arr","valTrim","_","val","StorageFileApi","StorageBucketApi","StorageClient","StorageError","__isStorageError","isStorageError","StorageApiError","StorageUnknownError","resolveResponse","Res","post","put","remove","Response","listBuckets","getBucket","createBucket","public","updateBucket","emptyBucket","deleteBucket","DEFAULT_SEARCH_OPTIONS","sortBy","DEFAULT_FILE_OPTIONS","cacheControl","contentType","bucketId","uploadOrUpdate","path","fileBody","fileOptions","String","cleanPath","_removeEmptyFolders","_path","_getFinalPath","upload","move","fromPath","toPath","sourceKey","destinationKey","copy","Key","createSignedUrl","downloadQueryParam","download","signedUrl","encodeURI","signedURL","createSignedUrls","paths","datum","getPublicUrl","publicUrl","prefixes","list","SupabaseStorageClient","fetchWithAuth","stripTrailingSlash","applySettingDefaults","SupabaseAuthClient","DEFAULT_GLOBAL_OPTIONS","DEFAULT_DB_OPTIONS","DEFAULT_AUTH_OPTIONS","DEFAULT_REALTIME_OPTIONS","SupabaseClient","supabaseUrl","supabaseKey","_g","_h","_supabaseUrl","realtimeUrl","authUrl","storageUrl","isPlatform","urlParts","functionsUrl","defaultStorageKey","hostname","DEFAULTS","db","realtime","auth","global","_initSupabaseAuthClient","_getAccessToken","_initRealtimeClient","_listenForAuthEvents","functions","authHeaders","apikey","_handleTokenChanged","source","changedAccessToken","createClient","Headers","CrossFetchHeaders","resolveHeadersConstructor","getAccessToken","HeadersConstructor","input","init","has","defaults","dbOptions","authOptions","realtimeOptions","globalOptions","__self__","F","DOMException","irrelevant","exports","support","iterable","Symbol","arrayBuffer","isDataView","isPrototypeOf","viewClasses","isArrayBufferView","isView","normalizeName","TypeError","toLowerCase","normalizeValue","iteratorFor","items","iterator","shift","header","oldValue","consumed","bodyUsed","fileReaderReady","reader","onload","readBlobAsArrayBuffer","FileReader","readAsArrayBuffer","readBlobAsText","readAsText","readArrayBufferAsText","buf","Uint8Array","chars","fromCharCode","bufferClone","Body","_initBody","_bodyInit","_bodyText","_bodyBlob","_bodyFormData","_bodyArrayBuffer","methods","normalizeMethod","upcased","toUpperCase","Request","mode","referrer","clone","form","bytes","parseHeaders","rawHeaders","preProcessedHeaders","line","bodyInit","redirectStatuses","redirect","RangeError","stack","create","request","aborted","xhr","XMLHttpRequest","abortXhr","abort","getAllResponseHeaders","responseURL","responseText","ontimeout","onabort","withCredentials","setRequestHeader","onreadystatechange","removeEventListener","polyfill","ponyfill","ctx","module","naiveFallback","__global__","_globalThis","require","NativeWebSocket","WebSocket","MozWebSocket","websocket_version","W3CWebSocket","uri","protocols","native_instance","prop"],"sourceRoot":"webpack:///","x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51]}